// Build date: 2017-0428T14:19:52

/*
* Author   Jonathan Lurie - http://me.jonahanlurie.fr
* License  MIT
* Link      https://github.com/jonathanlurie/pixpipejs
* Lab       MCIN - Montreal Neurological Institute
*/
/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js  Based on ndef.parser, by Raphael Graf(r@undefined.ch)
 http://www.undefined.ch/mparser/index.html

 Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)

 You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
 to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
 but don't feel like you have to let me know or ask permission.
*/
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.inherits=function(l,u){function v(){}v.prototype=u.prototype;l.prototype=new v;l.prototype.constructor=l;for(var y in u)if(Object.defineProperties){var G=Object.getOwnPropertyDescriptor(u,y);G&&Object.defineProperty(l,y,G)}else l[y]=u[y]};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(l,u,v){if(v.get||v.set)throw new TypeError("ES3 does not support getters and setters.");l!=Array.prototype&&l!=Object.prototype&&(l[u]=v.value)};$jscomp.getGlobal=function(l){return"undefined"!=typeof window&&window===l?l:"undefined"!=typeof global&&null!=global?global:l};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(l){return $jscomp.SYMBOL_PREFIX+(l||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.iterator;l||(l=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[l]&&$jscomp.defineProperty(Array.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(l){var u=0;return $jscomp.iteratorPrototype(function(){return u<l.length?{done:!1,value:l[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(l){$jscomp.initSymbolIterator();l={next:l};l[$jscomp.global.Symbol.iterator]=function(){return this};return l};$jscomp.iteratorFromArray=function(l,u){$jscomp.initSymbolIterator();l instanceof String&&(l+="");var v=0,y={next:function(){if(v<l.length){var G=v++;return{value:u(G,l[G]),done:!1}}y.next=function(){return{done:!0,value:void 0}};return y.next()}};y[Symbol.iterator]=function(){return y};return y};
$jscomp.polyfill=function(l,u,v,y){if(u){v=$jscomp.global;l=l.split(".");for(y=0;y<l.length-1;y++){var G=l[y];G in v||(v[G]={});v=v[G]}l=l[l.length-1];y=v[l];u=u(y);u!=y&&null!=u&&$jscomp.defineProperty(v,l,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.keys",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(l){return l})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(l){return l?l:function(l,v,y){var u=this.length||0;0>v&&(v=Math.max(0,u+v));if(null==y||y>u)y=u;y=Number(y);0>y&&(y=Math.max(0,u+y));for(v=Number(v||0);v<y;v++)this[v]=l;return this}},"es6-impl","es3");$jscomp.polyfill("Math.log2",function(l){return l?l:function(l){return Math.log(l)/Math.LN2}},"es6-impl","es3");
$jscomp.findInternal=function(l,u,v){l instanceof String&&(l=String(l));for(var y=l.length,G=0;G<y;G++){var ba=l[G];if(u.call(v,ba,G,l))return{i:G,v:ba}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(l){return l?l:function(l,v){return $jscomp.findInternal(this,l,v).v}},"es6-impl","es3");$jscomp.polyfill("Math.sinh",function(l){if(l)return l;var u=Math.exp;return function(l){l=Number(l);return 0===l?l:(u(l)-u(-l))/2}},"es6-impl","es3");
$jscomp.polyfill("Math.cosh",function(l){if(l)return l;var u=Math.exp;return function(l){l=Number(l);return(u(l)+u(-l))/2}},"es6-impl","es3");$jscomp.polyfill("Math.tanh",function(l){return l?l:function(l){l=Number(l);if(0===l)return l;var u=Math.exp(-2*Math.abs(l)),u=(1-u)/(1+u);return 0>l?-u:u}},"es6-impl","es3");$jscomp.polyfill("Math.asinh",function(l){return l?l:function(l){l=Number(l);if(0===l)return l;var u=Math.log(Math.abs(l)+Math.sqrt(l*l+1));return 0>l?-u:u}},"es6-impl","es3");
$jscomp.polyfill("Math.acosh",function(l){return l?l:function(l){l=Number(l);return Math.log(l+Math.sqrt(l*l-1))}},"es6-impl","es3");$jscomp.polyfill("Math.log1p",function(l){return l?l:function(l){l=Number(l);if(.25>l&&-.25<l){for(var u=l,y=1,G=l,ba=0,V=1;ba!=G;)u*=l,V*=-1,G=(ba=G)+V*u/++y;return G}return Math.log(1+l)}},"es6-impl","es3");$jscomp.polyfill("Math.atanh",function(l){if(l)return l;var u=Math.log1p;return function(l){l=Number(l);return(u(l)-u(-l))/2}},"es6-impl","es3");
$jscomp.polyfill("Math.log10",function(l){return l?l:function(l){return Math.log(l)/Math.LN10}},"es6-impl","es3");$jscomp.polyfill("Math.trunc",function(l){return l?l:function(l){l=Number(l);if(isNaN(l)||Infinity===l||-Infinity===l||0===l)return l;var u=Math.floor(Math.abs(l));return 0>l?-u:u}},"es6-impl","es3");
$jscomp.polyfill("Math.hypot",function(l){return l?l:function(l,v,y){l=Number(l);v=Number(v);var u,ba,V,ha=Math.max(Math.abs(l),Math.abs(v));for(u=2;u<arguments.length;u++)ha=Math.max(ha,Math.abs(arguments[u]));if(1E100<ha||1E-100>ha){l/=ha;v/=ha;V=l*l+v*v;for(u=2;u<arguments.length;u++)ba=Number(arguments[u])/ha,V+=ba*ba;return Math.sqrt(V)*ha}V=l*l+v*v;for(u=2;u<arguments.length;u++)ba=Number(arguments[u]),V+=ba*ba;return Math.sqrt(V)}},"es6-impl","es3");
(function(l,u){"object"===typeof exports&&"undefined"!==typeof module?u(exports):"function"===typeof define&&define.amd?define(["exports"],u):u(l.pixpipe=l.pixpipe||{})})(this,function(l){function u(){throw Error("setTimeout has not been defined");}function v(){throw Error("clearTimeout has not been defined");}function y(a){if(xa===setTimeout)return setTimeout(a,0);if((xa===u||!xa)&&setTimeout)return xa=setTimeout,setTimeout(a,0);try{return xa(a,0)}catch(b){try{return xa.call(null,a,0)}catch(c){return xa.call(this,
a,0)}}}function G(a){if(ya===clearTimeout)return clearTimeout(a);if((ya===v||!ya)&&clearTimeout)return ya=clearTimeout,clearTimeout(a);try{return ya(a)}catch(b){try{return ya.call(null,a)}catch(c){return ya.call(this,a)}}}function ba(){Pa&&Ea&&(Pa=!1,Ea.length?ra=Ea.concat(ra):yb=-1,ra.length&&V())}function V(){if(!Pa){var a=y(ba);Pa=!0;for(var b=ra.length;b;){Ea=ra;for(ra=[];++yb<b;)Ea&&Ea[yb].run();yb=-1;b=ra.length}Ea=null;Pa=!1;G(a)}}function ha(a,b){this.fun=a;this.array=b}function Fa(){}function Qa(a,
b){return b={exports:{}},a(b,b.exports),b.exports}function Cc(){Rb=!0;for(var a=0;64>a;++a)ia[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],ga["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;ga[45]=62;ga[95]=63}function pe(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(ia[b>>18&63]+ia[b>>12&63]+ia[b>>6&63]+ia[b&63]);return d.join("")}function Dc(a){Rb||Cc();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(pe(a,
f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=ia[a>>2],d+=ia[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=ia[a>>10],d+=ia[a>>4&63],d+=ia[a<<2&63],d+="=");e.push(d);return e.join("")}function zb(a,b,c,d,e){var f;f=8*e-d-1;var g=(1<<f)-1,h=g>>1,m=-7;e=c?e-1:0;var k=c?-1:1,n=a[b+e];e+=k;c=n&(1<<-m)-1;n>>=-m;for(m+=f;0<m;c=256*c+a[b+e],e+=k,m-=8);f=c&(1<<-m)-1;c>>=-m;for(m+=d;0<m;f=256*f+a[b+e],e+=k,m-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(n?-1:1);f+=Math.pow(2,d);c-=h}return(n?-1:
1)*f*Math.pow(2,c-d)}function Ec(a,b,c,d,e,f){var g,h=8*f-e-1,m=(1<<h)-1,k=m>>1,n=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var w=d?1:-1,l=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=m):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+k?b+n/g:b+n*Math.pow(2,1-k),2<=b*g&&(d++,g/=2),d+k>=m?(b=0,d=m):1<=d+k?(b=(b*g-1)*Math.pow(2,e),d+=k):(b=b*Math.pow(2,k-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+f]=b&255,f+=w,b/=256,e-=8);d=d<<e|b;for(h+=
e;0<h;a[c+f]=d&255,f+=w,d/=256,h-=8);a[c+f-w]|=128*l}function sa(a,b){if((q.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");q.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=q.prototype):(null===a&&(a=new q(b)),a.length=b);return a}function q(a,b,c){if(!(q.TYPED_ARRAY_SUPPORT||this instanceof q))return new q(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return Sb(this,
a)}return Fc(this,a,b,c)}function Fc(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);q.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=q.prototype):
a=Tb(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!q.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=Gc(b,a)|0;d=sa(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return qe(a,b)}function Hc(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function Sb(a,b){Hc(b);a=sa(a,0>b?0:Ub(b)|0);if(!q.TYPED_ARRAY_SUPPORT)for(var c=
0;c<b;++c)a[c]=0;return a}function Tb(a,b){var c=0>b.length?0:Ub(b.length)|0;a=sa(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function qe(a,b){if(ja(b)){var c=Ub(b.length)|0;a=sa(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?sa(a,0):Tb(a,b);if("Buffer"===b.type&&Ic(b.data))return Tb(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function Ub(a){if(a>=(q.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(q.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function ja(a){return!(null==a||!a._isBuffer)}function Gc(a,b){if(ja(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;
if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return Ab(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return Jc(a).length;default:if(d)return Ab(a).length;b=(""+b).toLowerCase();d=!0}}function re(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";
for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return Kc(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Dc(this):
Dc(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function Ga(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function Lc(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=
a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=q.from(b,d));if(ja(b))return 0===b.length?-1:Mc(a,b,c,d,e);if("number"===typeof b)return b&=255,q.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):Mc(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function Mc(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*
g)}var g=1,h=a.length,m=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;m/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===m)return d*g}else-1!==d&&(c-=c-d),d=-1;else for(c+m>h&&(c=h-m);0<=c;c--){h=!0;for(d=0;d<m;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function Kc(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?
4:223<e?3:191<e?2:1;if(b+g<=c){var h,m,k;switch(g){case 1:128>e&&(f=e);break;case 2:h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];m=a[b+2];128===(h&192)&&128===(m&192)&&(e=(e&15)<<12|(h&63)<<6|m&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1],m=a[b+2],k=a[b+3],128===(h&192)&&128===(m&192)&&128===(k&192)&&(e=(e&15)<<18|(h&63)<<12|(m&63)<<6|k&63,65535<e&&1114112>e&&(f=e))}}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);
d.push(f);b+=g}a=d.length;if(a<=Nc)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Nc));d=c}return d}function Q(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function Y(a,b,c,d,e,f){if(!ja(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");
}function Bb(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function Cb(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function Oc(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function Pc(a,b,c,d,e){e||Oc(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);Ec(a,b,c,d,23,4);return c+4}function Qc(a,
b,c,d,e){e||Oc(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);Ec(a,b,c,d,52,8);return c+8}function Ab(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;
f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function Rc(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function Jc(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(se,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";Rb||Cc();
var b,c,d,e,f;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");e="="===a[b-2]?2:"="===a[b-1]?1:0;f=new te(3*b/4-e);c=0<e?b-4:b;var g=0;for(b=0;b<c;b+=4)d=ga[a.charCodeAt(b)]<<18|ga[a.charCodeAt(b+1)]<<12|ga[a.charCodeAt(b+2)]<<6|ga[a.charCodeAt(b+3)],f[g++]=d>>16&255,f[g++]=d>>8&255,f[g++]=d&255;2===e?(d=ga[a.charCodeAt(b)]<<2|ga[a.charCodeAt(b+1)]>>4,f[g++]=d&255):1===e&&(d=ga[a.charCodeAt(b)]<<10|ga[a.charCodeAt(b+1)]<<4|ga[a.charCodeAt(b+2)]>>2,f[g++]=d>>8&255,
f[g++]=d&255);return f}function ab(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Sc(a){return null!=a&&(!!a._isBuffer||Tc(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&Tc(a.slice(0,0)))}function Tc(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Ra(a){for(var b=a.length;0<=--b;)a[b]=0}function Vb(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=
e;this.has_stree=a&&a.length}function Wb(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function bb(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function ca(a,b,c){a.bi_valid>16-c?(a.bi_buf|=b<<a.bi_valid&65535,bb(a,a.bi_buf),a.bi_buf=b>>16-a.bi_valid,a.bi_valid+=c-16):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function ka(a,b,c){ca(a,c[2*b],c[2*b+1])}function Uc(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function Vc(a,b,c){var d=Array(16),
e=0,f;for(f=1;15>=f;f++)d[f]=e=e+c[f-1]<<1;for(c=0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=Uc(d[e]++,e))}function Wc(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function Xc(a){8<a.bi_valid?bb(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function Yc(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function Xb(a,
b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<a.heap_len&&Yc(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(Yc(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function Zc(a,b,c){var d,e,f=0,g,h;if(0!==a.last_lit){do d=a.pending_buf[a.d_buf+2*f]<<8|a.pending_buf[a.d_buf+2*f+1],e=a.pending_buf[a.l_buf+f],f++,0===d?ka(a,e,b):(g=cb[e],ka(a,g+256+1,b),h=Yb[g],0!==h&&(e-=Zb[g],ca(a,e,h)),d--,g=256>d?Ha[d]:Ha[256+(d>>>7)],ka(a,g,c),h=Db[g],0!==h&&(d-=Eb[g],ca(a,d,h)));while(f<a.last_lit)
}ka(a,256,b)}function $b(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,m;a.heap_len=0;a.heap_max=573;for(g=0;g<f;g++)0!==c[2*g]?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[2*g+1]=0;for(;2>a.heap_len;)m=a.heap[++a.heap_len]=2>h?++h:0,c[2*m]=1,a.depth[m]=0,a.opt_len--,e&&(a.static_len-=d[2*m+1]);b.max_code=h;for(g=a.heap_len>>1;1<=g;g--)Xb(a,c,g);m=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Xb(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=
d,c[2*m]=c[2*g]+c[2*d],a.depth[m]=(a.depth[g]>=a.depth[d]?a.depth[g]:a.depth[d])+1,c[2*g+1]=c[2*d+1]=m,a.heap[1]=m++,Xb(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];g=b.dyn_tree;m=b.max_code;var d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.extra_bits,k=b.stat_desc.extra_base,n=b.stat_desc.max_length,w,l,p,t,L=0;for(l=0;15>=l;l++)a.bl_count[l]=0;g[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++)w=a.heap[b],l=g[2*g[2*w+1]+1]+1,l>n&&(l=n,L++),g[2*w+1]=l,w>m||(a.bl_count[l]++,
p=0,w>=k&&(p=f[w-k]),t=g[2*w],a.opt_len+=t*(l+p),e&&(a.static_len+=t*(d[2*w+1]+p)));if(0!==L){do{for(l=n-1;0===a.bl_count[l];)l--;a.bl_count[l]--;a.bl_count[l+1]+=2;a.bl_count[n]--;L-=2}while(0<L);for(l=n;0!==l;l--)for(w=a.bl_count[l];0!==w;)d=a.heap[--b],d>m||(g[2*d+1]!==l&&(a.opt_len+=(l-g[2*d+1])*g[2*d],g[2*d+1]=l),w--)}Vc(c,h,a.bl_count)}function $c(a,b,c){var d,e=-1,f,g=b[1],h=0,m=7,k=4;0===g&&(m=138,k=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++)f=g,g=b[2*(d+1)+1],++h<m&&f===g||(h<k?a.bl_tree[2*f]+=
h:0!==f?(f!==e&&a.bl_tree[2*f]++,a.bl_tree[32]++):10>=h?a.bl_tree[34]++:a.bl_tree[36]++,h=0,e=f,0===g?(m=138,k=3):f===g?(m=6,k=3):(m=7,k=4))}function ad(a,b,c){var d,e=-1,f,g=b[1],h=0,m=7,k=4;0===g&&(m=138,k=3);for(d=0;d<=c;d++)if(f=g,g=b[2*(d+1)+1],!(++h<m&&f===g)){if(h<k){do ka(a,f,a.bl_tree);while(0!==--h)}else 0!==f?(f!==e&&(ka(a,f,a.bl_tree),h--),ka(a,16,a.bl_tree),ca(a,h-3,2)):10>=h?(ka(a,17,a.bl_tree),ca(a,h-3,3)):(ka(a,18,a.bl_tree),ca(a,h-11,7));h=0;e=f;0===g?(m=138,k=3):f===g?(m=6,k=3):
(m=7,k=4)}}function ue(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function bd(a,b,c,d){ca(a,0+(d?1:0),3);Xc(a);bb(a,c);bb(a,~c);A.arraySet(a.pending_buf,a.window,b,c,a.pending);a.pending+=c}function za(a,b){a.msg=Sa[b];return b}function Aa(a){for(var b=a.length;0<=--b;)a[b]=0}function Ba(a){var b=a.state,c=b.pending;c>a.avail_out&&
(c=a.avail_out);0!==c&&(A.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function W(a,b){fa._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,b);a.block_start=a.strstart;Ba(a.strm)}function D(a,b){a.pending_buf[a.pending++]=b}function db(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function cd(a,b){var c=a.max_chain_length,
d=a.strstart,e,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,m=a.window,k=a.w_mask,n=a.prev,w=a.strstart+258,l=m[d+f-1],p=m[d+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do if(e=b,m[e+f]===p&&m[e+f-1]===l&&m[e]===m[d]&&m[++e]===m[d+1]){d+=2;for(e++;m[++d]===m[++e]&&m[++d]===m[++e]&&m[++d]===m[++e]&&m[++d]===m[++e]&&m[++d]===m[++e]&&m[++d]===m[++e]&&m[++d]===m[++e]&&m[++d]===m[++e]&&d<w;);e=258-(w-d);d=w-258;if(e>f){a.match_start=b;
f=e;if(e>=g)break;l=m[d+f-1];p=m[d+f]}}while((b=n[b&k])>h&&0!==--c);return f<=a.lookahead?f:a.lookahead}function Ia(a){var b=a.w_size,c,d,e,f;do{f=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){A.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=d=a.hash_size;do e=a.head[--c],a.head[c]=e>=b?e-b:0;while(--d);c=d=b;do e=a.prev[--c],a.prev[c]=e>=b?e-b:0;while(--d);f+=b}if(0===a.strm.avail_in)break;c=a.strm;d=a.window;e=a.strstart+a.lookahead;var g=c.avail_in;
g>f&&(g=f);0===g?d=0:(c.avail_in-=g,A.arraySet(d,c.input,c.next_in,g,e),1===c.state.wrap?c.adler=eb(c.adler,d,g,e):2===c.state.wrap&&(c.adler=O(c.adler,d,g,e)),c.next_in+=g,c.total_in+=g,d=g);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+3-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,3>a.lookahead+a.insert););
}while(262>a.lookahead&&0!==a.strm.avail_in)}function ac(a,b){for(var c;;){if(262>a.lookahead){Ia(a);if(262>a.lookahead&&0===b)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==c&&a.strstart-c<=a.w_size-262&&(a.match_length=cd(a,c));if(3<=a.match_length)if(c=fa._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=
a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else c=fa._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(c&&(W(a,!1),0===a.strm.avail_out))return 1}a.insert=
2>a.strstart?a.strstart:2;return 4===b?(W(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(W(a,!1),0===a.strm.avail_out)?1:2}function Ta(a,b){for(var c,d;;){if(262>a.lookahead){Ia(a);if(262>a.lookahead&&0===b)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==c&&a.prev_length<a.max_lazy_match&&
a.strstart-c<=a.w_size-262&&(a.match_length=cd(a,c),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-3;c=fa._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);
while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(c&&(W(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((c=fa._tr_tally(a,0,a.window[a.strstart-1]))&&W(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(fa._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===b?(W(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(W(a,!1),
0===a.strm.avail_out)?1:2}function ve(a,b){for(var c,d,e,f=a.window;;){if(258>=a.lookahead){Ia(a);if(258>=a.lookahead&&0===b)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(d=a.strstart-1,c=f[d],c===f[++d]&&c===f[++d]&&c===f[++d])){for(e=a.strstart+258;c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&c===f[++d]&&d<e;);a.match_length=258-(e-d);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(c=fa._tr_tally(a,
1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=fa._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(c&&(W(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===b?(W(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(W(a,!1),0===a.strm.avail_out)?1:2}function we(a,b){for(var c;;){if(0===a.lookahead&&(Ia(a),0===a.lookahead)){if(0===b)return 1;break}a.match_length=0;c=fa._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(c&&
(W(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===b?(W(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(W(a,!1),0===a.strm.avail_out)?1:2}function na(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function xe(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;
this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new A.Buf16(1146);this.dyn_dtree=new A.Buf16(122);this.bl_tree=new A.Buf16(78);Aa(this.dyn_ltree);Aa(this.dyn_dtree);Aa(this.bl_tree);
this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new A.Buf16(16);this.heap=new A.Buf16(573);Aa(this.heap);this.heap_max=this.heap_len=0;this.depth=new A.Buf16(573);Aa(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function dd(a){var b;if(!a||!a.state)return za(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;
a.adler=2===b.wrap?0:1;b.last_flush=0;fa._tr_init(b);return 0}function ed(a){var b=dd(a);0===b&&(a=a.state,a.window_size=2*a.w_size,Aa(a.head),a.max_lazy_match=Ua[a.level].max_lazy,a.good_match=Ua[a.level].good_length,a.nice_match=Ua[a.level].nice_length,a.max_chain_length=Ua[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function fd(a,b,c,d,e,f){if(!a)return-2;var g=1;-1===b&&(b=6);0>d?(g=0,d=-d):15<
d&&(g=2,d-=16);if(1>e||9<e||8!==c||8>d||15<d||0>b||9<b||0>f||4<f)return za(a,-2);8===d&&(d=9);var h=new xe;a.state=h;h.strm=a;h.wrap=g;h.gzhead=null;h.w_bits=d;h.w_size=1<<h.w_bits;h.w_mask=h.w_size-1;h.hash_bits=e+7;h.hash_size=1<<h.hash_bits;h.hash_mask=h.hash_size-1;h.hash_shift=~~((h.hash_bits+3-1)/3);h.window=new A.Buf8(2*h.w_size);h.head=new A.Buf16(h.hash_size);h.prev=new A.Buf16(h.w_size);h.lit_bufsize=1<<e+6;h.pending_buf_size=4*h.lit_bufsize;h.pending_buf=new A.Buf8(h.pending_buf_size);
h.d_buf=1*h.lit_bufsize;h.l_buf=3*h.lit_bufsize;h.level=b;h.strategy=f;h.method=c;return ed(a)}function gd(a,b){if(65537>b&&(a.subarray&&hd||!a.subarray&&id))return String.fromCharCode.apply(null,A.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}function Ja(a){if(!(this instanceof Ja))return new Ja(a);a=this.options=A.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<
a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new jd;this.strm.avail_out=0;var b=fb.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(0!==b)throw Error(Sa[b]);a.header&&fb.deflateSetHeader(this.strm,a.header);if(a.dictionary){a="string"===typeof a.dictionary?Ka.string2buf(a.dictionary):"[object ArrayBuffer]"===kd.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary;b=fb.deflateSetDictionary(this.strm,
a);if(0!==b)throw Error(Sa[b]);this._dict_set=!0}}function bc(a,b){b=new Ja(b);b.push(a,!0);if(b.err)throw b.msg||Sa[b.err];return b.result}function ld(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function ye(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=
this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new A.Buf16(320);this.work=new A.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function md(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new A.Buf32(852);b.distcode=b.distdyn=new A.Buf32(592);b.sane=1;b.back=-1;return 0}function nd(a){var b;
if(!a||!a.state)return-2;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return md(a)}function od(a,b){var c,d;if(!a||!a.state)return-2;d=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==d.window&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return nd(a)}function pd(a,b){var c;if(!a)return-2;c=new ye;a.state=c;c.window=null;b=od(a,b);0!==b&&(a.state=null);return b}function qd(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new A.Buf8(e.wsize));
d>=e.wsize?(A.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&(a=d),A.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(A.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}function La(a){if(!(this instanceof La))return new La(a);var b=this.options=A.assign({chunkSize:16384,windowBits:0,to:""},a||{});b.raw&&0<=b.windowBits&&16>b.windowBits&&(b.windowBits=-b.windowBits,0===
b.windowBits&&(b.windowBits=-15));!(0<=b.windowBits&&16>b.windowBits)||a&&a.windowBits||(b.windowBits+=32);15<b.windowBits&&48>b.windowBits&&0===(b.windowBits&15)&&(b.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new jd;this.strm.avail_out=0;a=gb.inflateInit2(this.strm,b.windowBits);if(a!==M.Z_OK)throw Error(Sa[a]);this.header=new ze;gb.inflateGetHeader(this.strm,this.header)}function cc(a,b){b=new La(b);b.push(a,!0);if(b.err)throw b.msg||Sa[b.err];return b.result}
function rd(){}function Ae(a,b,c,d,e){function f(a){var b=a.slice(1,-1);if(b in c)return c[b];if("#"===b.charAt(0))return a=parseInt(b.substr(1).replace("x","0x")),65535<a?(a-=65536,a=String.fromCharCode(55296+(a>>10),56320+(a&1023))):a=String.fromCharCode(a),a;e.error("entity not found:"+a);return a}function g(b){if(b>p){var c=a.substring(p,b).replace(/&#?\w+;/g,f);w&&h(p);d.characters(c,0,b-p);p=b}}function h(b,c){for(;b>=k&&(c=n.exec(a));)m=c.index,k=m+c[0].length,w.lineNumber++;w.columnNumber=
b-m+1}var m=0,k=0,n=/.*(?:\r\n?|\n)|.*$/g,w=d.locator;b=[{currentNSMap:b}];for(var l={},p=0;;){try{var t=a.indexOf("<",p);if(0>t){if(!a.substr(p).match(/^\s*$/)){var L=d.doc,sd=L.createTextNode(a.substr(p));L.appendChild(sd);d.currentElement=sd}break}t>p&&g(t);switch(a.charAt(t+1)){case "/":var H=a.indexOf(">",t+3),ma=a.substring(t+2,H),z=b.pop();0>H?(ma=a.substring(t+2).replace(/[\s<].*/,""),e.error("end tag name: "+ma+" is not complete:"+z.tagName),H=t+1+ma.length):ma.match(/\s</)&&(ma=ma.replace(/[\s<].*/,
""),e.error("end tag name: "+ma+" maybe not complete"),H=t+1+ma.length);var td=z.localNSMap,q=z.tagName==ma;if(q||z.tagName&&z.tagName.toLowerCase()==ma.toLowerCase()){d.endElement(z.uri,z.localName,ma);if(td)for(var u in td)d.endPrefixMapping(u);q||e.fatalError("end tag name: "+ma+" is not match the current start tagName:"+z.tagName)}else b.push(z);H++;break;case "?":w&&h(t);H=Ce(a,t,d);break;case "!":w&&h(t);H=De(a,t,d,e);break;default:w&&h(t);var r=new ud,x=b[b.length-1].currentNSMap,H=Ee(a,t,
r,x,f,e),A=r.length;!r.closed&&Fe(a,H,r.tagName,l)&&(r.closed=!0,c.nbsp||e.warning("unclosed xml attribute"));if(w&&A){for(var v=vd(w,{}),B=0;B<A;B++){var E=r[B];h(E.offset);E.locator=vd(w,{})}d.locator=v;wd(r,d,x)&&b.push(r);d.locator=w}else wd(r,d,x)&&b.push(r);"http://www.w3.org/1999/xhtml"!==r.uri||r.closed?H++:H=Ge(a,H,r.tagName,f,d)}}catch(la){e.error("element parse error: "+la),H=-1}H>p?p=H:g(Math.max(t,p)+1)}}function vd(a,b){b.lineNumber=a.lineNumber;b.columnNumber=a.columnNumber;return b}
function Ee(a,b,c,d,e,f){for(var g,h,m=++b,k=0;;){var n=a.charAt(m);switch(n){case "=":if(1===k)g=a.slice(b,m),k=3;else if(2===k)k=3;else throw Error("attribute equal must after attrName");break;case "'":case '"':if(3===k||1===k)if(1===k&&(f.warning('attribute value must after "="'),g=a.slice(b,m)),b=m+1,m=a.indexOf(n,b),0<m)h=a.slice(b,m).replace(/&#?\w+;/g,e),c.add(g,h,b-1),k=5;else throw Error("attribute value no end '"+n+"' match");else if(4==k)h=a.slice(b,m).replace(/&#?\w+;/g,e),c.add(g,h,b),
f.warning('attribute "'+g+'" missed start quot('+n+")!!"),b=m+1,k=5;else throw Error('attribute value must after "="');break;case "/":switch(k){case 0:c.setTagName(a.slice(b,m));case 5:case 6:case 7:k=7,c.closed=!0;case 4:case 1:case 2:break;default:throw Error("attribute invalid close char('/')");}break;case "":return f.error("unexpected end of input"),0==k&&c.setTagName(a.slice(b,m)),m;case ">":switch(k){case 0:c.setTagName(a.slice(b,m));case 5:case 6:case 7:break;case 4:case 1:h=a.slice(b,m),"/"===
h.slice(-1)&&(c.closed=!0,h=h.slice(0,-1));case 2:2===k&&(h=g);4==k?(f.warning('attribute "'+h+'" missed quot(")!!'),c.add(g,h.replace(/&#?\w+;/g,e),b)):("http://www.w3.org/1999/xhtml"===d[""]&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),c.add(h,h,b));break;case 3:throw Error("attribute value missed!!");}return m;case "\u0080":n=" ";default:if(" ">=n)switch(k){case 0:c.setTagName(a.slice(b,m));k=6;break;case 1:g=a.slice(b,m);k=2;break;
case 4:h=a.slice(b,m).replace(/&#?\w+;/g,e),f.warning('attribute "'+h+'" missed quot(")!!'),c.add(g,h,b);case 5:k=6}else switch(k){case 2:"http://www.w3.org/1999/xhtml"===d[""]&&g.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!');c.add(g,g,b);b=m;k=1;break;case 5:f.warning('attribute space is required"'+g+'"!!');case 6:k=1;b=m;break;case 3:k=4;b=m;break;case 7:throw Error("elements closed character '/' and '>' must be connected to");}}m++}}
function wd(a,b,c){for(var d=a.tagName,e=null,f=a.length;f--;){var g=a[f],h=g.qName,m=g.value,k=h.indexOf(":");if(0<k)var n=g.prefix=h.slice(0,k),k=h.slice(k+1),n="xmlns"===n&&k;else k=h,n="xmlns"===h&&"";g.localName=k;!1!==n&&(null==e&&(e={},xd(c,c={})),c[n]=e[n]=m,g.uri="http://www.w3.org/2000/xmlns/",b.startPrefixMapping(n,m))}for(f=a.length;f--;)if(g=a[f],n=g.prefix)"xml"===n&&(g.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==n&&(g.uri=c[n||""]);k=d.indexOf(":");0<k?(n=a.prefix=d.slice(0,
k),k=a.localName=d.slice(k+1)):(n=null,k=a.localName=d);f=a.uri=c[n||""];b.startElement(f,k,d,a);if(a.closed){if(b.endElement(f,k,d),e)for(n in e)b.endPrefixMapping(n)}else return a.currentNSMap=c,a.localNSMap=e,!0}function Ge(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b);a=a.substring(b+1,f);if(/[&<]/.test(a)){if(/^script$/i.test(c))return e.characters(a,0,a.length),f;a=a.replace(/&#?\w+;/g,d);e.characters(a,0,a.length);return f}}return b+1}function Fe(a,b,c,d){var e=
d[c];null==e&&(e=a.lastIndexOf("</"+c+">"),e<b&&(e=a.lastIndexOf("</"+c)),d[c]=e);return e<b}function xd(a,b){for(var c in a)b[c]=a[c]}function De(a,b,c,d){switch(a.charAt(b+2)){case "-":if("-"===a.charAt(b+3)){var e=a.indexOf("--\x3e",b+4);if(e>b)return c.comment(a,b+4,e-b-4),e+3;d.error("Unclosed comment")}break;default:if("CDATA["==a.substr(b+3,6))return e=a.indexOf("]]\x3e",b+9),c.startCDATA(),c.characters(a,b+9,e-b-9),c.endCDATA(),e+3;a:{d=[];e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;e.lastIndex=
b;for(e.exec(a);b=e.exec(a);)if(d.push(b),b[1]){e=d;break a}e=void 0}var f=e.length;if(1<f&&/!doctype/i.test(e[0][0]))return a=e[1][0],b=3<f&&/^public$/i.test(e[2][0])&&e[3][0],d=4<f&&e[4][0],e=e[f-1],c.startDTD(a,b&&b.replace(/^(['"])(.*?)\1$/,"$2"),d&&d.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),e.index+e[0].length}return-1}function Ce(a,b,c){var d=a.indexOf("?>",b);return d&&(a=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(c.processingInstruction(a[1],a[2]),d+2):-1}function ud(a){}function Fb(a,
b){a.__proto__=b;return a}function ib(a,b){for(var c in a)b[c]=a[c]}function X(a,b){var c=a.prototype;if(Object.create){var d=Object.create(b.prototype);c.__proto__=d}c instanceof b||(d=function(){},d.prototype=b.prototype,d=new d,ib(c,d),a.prototype=c=d);c.constructor!=a&&("function"!=typeof a&&console.error("unknow Class:"+a),c.constructor=a)}function Va(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,J[a]),this.message=J[a],Error.captureStackTrace&&Error.captureStackTrace(this,Va);
c.code=a;b&&(this.message=this.message+": "+b);return c}function Ca(){}function jb(a,b){this._node=a;this._refresh=b;dc(this)}function dc(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);yd(a,"length",c.length);ib(c,a);a._inc=b}}function Gb(){}function zd(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function Ad(a,b,c,d){d?b[zd(b,d)]=c:b[b.length++]=c;a&&(c.ownerElement=a,b=a.ownerDocument)&&(d&&Bd(b,a,d),b&&b._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&
(a._nsMap[c.prefix?c.localName:""]=c.value))}function Cd(a,b,c){var d=zd(b,c);if(0<=d){for(var e=b.length-1;d<e;)b[d]=b[++d];b.length=e;a&&(b=a.ownerDocument)&&(Bd(b,a,c),c.ownerElement=null)}else throw Va(He,Error(a.tagName+"@"+c));}function Dd(a){this._features={};if(a)for(var b in a)this._features=a[b]}function Z(){}function Ed(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function Hb(a,b){if(b(a))return!0;if(a=a.firstChild){do if(Hb(a,b))return!0;
while(a=a.nextSibling)}}function kb(){}function Bd(a,b,c,d){a&&a._inc++;"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete b._nsMap[c.prefix?c.localName:""]}function ec(a,b,c){if(a&&a._inc)if(a._inc++,a=b.childNodes,c)a[a.length++]=c;else{b=b.firstChild;for(c=0;b;)a[c++]=b,b=b.nextSibling;a.length=c}}function Fd(a,b){var c=b.previousSibling,d=b.nextSibling;c?c.nextSibling=d:a.firstChild=d;d?d.previousSibling=c:a.lastChild=c;ec(a.ownerDocument,a);return b}function Gd(a,b,c){var d=b.parentNode;
d&&d.removeChild(b);if(b.nodeType===ta){d=b.firstChild;if(null==d)return b;var e=b.lastChild}else d=e=b;var f=c?c.previousSibling:a.lastChild;d.previousSibling=f;e.nextSibling=c;f?f.nextSibling=d:a.firstChild=d;null==c?a.lastChild=e:c.previousSibling=e;do d.parentNode=a;while(d!==e&&(d=d.nextSibling));ec(a.ownerDocument||a,a);b.nodeType==ta&&(b.firstChild=b.lastChild=null);return b}function Wa(){this._nsMap={}}function Ib(){}function lb(){}function fc(){}function gc(){}function hc(){}function ic(){}
function Hd(){}function Id(){}function jc(){}function Jb(){}function kc(){}function Jd(){}function Kd(a,b){var c=[],d=9==this.nodeType?this.documentElement:this,e=d.prefix,f=d.namespaceURI;if(f&&null==e&&(e=d.lookupPrefix(f),null==e))var g=[{namespace:f,prefix:null}];Xa(this,c,a,b,g);return c.join("")}function Ld(a,b,c){b=a.prefix||"";a=a.namespaceURI;if(!b&&!a||"xml"===b&&"http://www.w3.org/XML/1998/namespace"===a||"http://www.w3.org/2000/xmlns/"==a)return!1;for(var d=c.length;d--;){var e=c[d];if(e.prefix==
b)return e.namespace!=a}return!0}function Xa(a,b,c,d,e){if(d)if(a=d(a)){if("string"==typeof a){b.push(a);return}}else return;switch(a.nodeType){case oa:e||(e=[]);var f=a.attributes,g=f.length,h=a.firstChild,m=a.tagName;c="http://www.w3.org/1999/xhtml"===a.namespaceURI||c;b.push("<",m);for(var k=0;k<g;k++){var n=f.item(k);"xmlns"==n.prefix?e.push({prefix:n.localName,namespace:n.value}):"xmlns"==n.nodeName&&e.push({prefix:"",namespace:n.value})}for(k=0;k<g;k++){n=f.item(k);if(Ld(n,c,e)){var w=n.prefix||
"",l=n.namespaceURI;b.push(w?" xmlns:"+w:" xmlns",'="',l,'"');e.push({prefix:w,namespace:l})}Xa(n,b,c,d,e)}Ld(a,c,e)&&(w=a.prefix||"",l=a.namespaceURI,b.push(w?" xmlns:"+w:" xmlns",'="',l,'"'),e.push({prefix:w,namespace:l}));if(h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(m)){b.push(">");if(c&&/^script$/i.test(m))for(;h;)h.data?b.push(h.data):Xa(h,b,c,d,e),h=h.nextSibling;else for(;h;)Xa(h,b,c,d,e),h=h.nextSibling;b.push("</",m,">")}else b.push("/>");break;case Md:case ta:for(h=a.firstChild;h;)Xa(h,
b,c,d,e),h=h.nextSibling;break;case Ya:return b.push(" ",a.name,'="',a.value.replace(/[<&"]/g,Ed),'"');case Kb:return b.push(a.data.replace(/[<&]/g,Ed));case Nd:return b.push("<![CDATA[",a.data,"]]\x3e");case Od:return b.push("\x3c!--",a.data,"--\x3e");case Pd:c=a.publicId;d=a.systemId;b.push("<!DOCTYPE ",a.name);c?(b.push(' PUBLIC "',c),d&&"."!=d&&b.push('" "',d),b.push('">')):d&&"."!=d?b.push(' SYSTEM "',d,'">'):((a=a.internalSubset)&&b.push(" [",a,"]"),b.push(">"));break;case Qd:return b.push("<?",
a.target," ",a.data,"?>");case Rd:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function Sd(a,b,c){var d;switch(b.nodeType){case oa:d=b.cloneNode(!1),d.ownerDocument=a;case ta:break;case Ya:c=!0}d||(d=b.cloneNode(!1));d.ownerDocument=a;d.parentNode=null;if(c)for(b=b.firstChild;b;)d.appendChild(Sd(a,b,c)),b=b.nextSibling;return d}function lc(a,b,c){var d=new b.constructor,e;for(e in b){var f=b[e];"object"!=typeof f&&f!=d[e]&&(d[e]=f)}b.childNodes&&(d.childNodes=new Ca);d.ownerDocument=
a;switch(d.nodeType){case oa:e=b.attributes;var g=d.attributes=new Gb,f=e.length;g._ownerElement=d;for(g=0;g<f;g++)d.setAttributeNode(lc(a,e.item(g),!0));break;case Ya:c=!0}if(c)for(b=b.firstChild;b;)d.appendChild(lc(a,b,c)),b=b.nextSibling;return d}function yd(a,b,c){a[b]=c}function mb(){}function nb(){}function mc(){this.littleEndian=!1;this.position=0;this._makeEntryLookup=!1;this.dictionary=[]}function ob(){this.decompressor=new mc}function pb(){}function qb(){}function Td(a,b,c,d,e){this.fileDirectory=
a;this.geoKeys=b;this.dataView=c;this.littleEndian=d;this.tiles=e?{}:null;this.isTiled=a.StripOffsets?!1:!0;a=a.PlanarConfiguration;this.planarConfiguration="undefined"===typeof a?1:a;if(1!==this.planarConfiguration&&2!==this.planarConfiguration)throw Error("Invalid planar configuration.");switch(this.fileDirectory.Compression){case void 0:case 1:this.decoder=new Ie;break;case 5:this.decoder=new Je;break;case 6:throw Error("JPEG compression not supported.");case 8:this.decoder=new Ke;break;case 32773:this.decoder=
new Le;break;default:throw Error("Unknown compresseion method identifier: "+this.fileDirectory.Compression);}}function Ud(a,b){this.dataView=new Me(a);b=b||{};this.cache=b.cache||!1;a=this.dataView.getUint16(0,0);if(18761===a)this.littleEndian=!0;else if(19789===a)this.littleEndian=!1;else throw new TypeError("Invalid byte order value.");a=this.dataView.getUint16(2,this.littleEndian);if(42===this.dataView.getUint16(2,this.littleEndian))this.bigTiff=!1;else if(43===a){if(this.bigTiff=!0,8!==this.dataView.getUint16(4,
this.littleEndian))throw Error("Unsupported offset byte-size.");}else throw new TypeError("Invalid magic number.");this.fileDirectories=this.parseFileDirectories(this.getOffset(this.bigTiff?8:4))}var T=function(){this._uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});this._metadata={};this._type=T.TYPE()};T.TYPE=function(){return"GENERIC"};T.prototype.isOfType=function(a){return!this._type.localeCompare(a)};T.prototype.getType=
function(){this._type};T.prototype.getUuid=function(){return this._uuid.slice()};T.prototype.setMetadata=function(a,b){"string"===typeof a||a instanceof String?this._metadata[a]=b:console.warn("The given key must be a String Object.")};T.prototype.getMetadata=function(a){if(a in this._metadata)return this._metadata[a];console.warn("The metadata with key: "+a+" doe not exist.");return null};T.prototype.hasMetadata=function(a){return a in this._metadata};T.prototype.getMetadataKeys=function(){return Object.keys(this._metadata)};
T.prototype.copyMetadataFrom=function(a){var b=this;a.getMetadataKeys().forEach(function(c){try{var d=JSON.parse(JSON.stringify(a.getMetadata(c)));b.setMetadata(c,d)}catch(e){console.error(e)}})};T.prototype.getMetadataCopy=function(){return JSON.parse(JSON.stringify(this._metadata))};var x=function(){var a;a=T.call(this)||this;a._type=x.TYPE();a._events={};a._inputValidator={};a._input={};a._output={};a._timer={};a._isOutputReady=!1;return a};$jscomp.inherits(x,T);x.TYPE=function(){return"FILTER"};
x.prototype.addInput=function(a,b){b=void 0===b?0:b;a?(b in this._input||(this._input[b]=null),this._input[b]=a,this._isOutputReady=!1):console.warn("A null input cannot be added.")};x.prototype.getOutput=function(a){a=void 0===a?0:a;return a in this._output?this._output[a]:null};x.prototype.forEachOutput=function(a){if(a)for(var b=this.getOutputCategories(),c=0;c<b.length;c++)a.call(this,b[c],this.getOutput(b[c]));else console.warn("forEachOutput requires a callback.")};x.prototype._forEachInput=
function(a){if(a)for(var b=this.getInputCategories(),c=0;c<b.length;c++)a.call(this,b[c],this._getInput(b[c]));else console.warn("forEachOutput requires a callback.")};x.prototype._addOutput=function(a,b){b=void 0===b?0:b;var c=null;b in this._output?console.warn("An output of category "+b+" was already defined. Nothing to be done."):(c=new a,this._output[b]=c,console.log("filter "+this.constructor.name+" creates a new output."));return c};x.prototype._getInput=function(a){a=void 0===a?0:a;return a in
this._input?this._input[a]:null};x.prototype.hasInputOfCategory=function(a){return a in this._input};x.prototype.getInputCategories=function(){return Object.keys(this._input)};x.prototype.getOutputCategories=function(){return Object.keys(this._output)};x.prototype.setMetadata=function(a,b){T.prototype.setMetadata.call(this,a,b);this._isOutputReady=!1};x.prototype.hasOutputReady=function(){return this._isOutputReady};x.prototype.setOutputAsReady=function(){this._isOutputReady=!0};x.prototype.addInputValidator=
function(a,b){this._inputValidator[a]="TYPE"in b?b.TYPE():b};x.prototype.hasValidInput=function(){var a=this,b=Object.keys(this._inputValidator),c=!0;0==b.length&&(c=!1,console.warn("No input validator was added. Filter cannot run. Use addInputValidator(...) to specify input types."));b.forEach(function(b){var d=a._getInput(b);if(d)if("isOfType"in d)c=c&&d.isOfType(a._inputValidator[b]);else try{c=c&&d instanceof a._inputValidator[b]}catch(f){c=!1}else c=!1});c||console.warn("The input is not valid.");
return c};x.prototype.update=function(){this.addTimeRecord("begin");this._run();this.addTimeRecord("end");console.log("Running time for filter "+this.constructor.name+": "+this.getTime("begin","end")+"ms.");this.getNumberOfOutputs()&&this.setOutputAsReady()};x.prototype._run=function(){console.error("The update() method has not been written, this filter is not valid.")};x.prototype.addTimeRecord=function(a){this._timer[a]=performance.now()};x.prototype.getTime=function(a,b,c){c=void 0===c?!1:c;if(a in
this._timer&&b in this._timer){var d=Math.abs(this._timer[b]-this._timer[a]);c&&console.log("> Time: ["+a+" , "+b+"] is "+d+" millisec.");return d}console.warn("The two given record name must exist in the time record table.");return-1};x.prototype.on=function(a,b){this._events[a]=b};x.prototype.triggerEvent=function(a){var b=null;if(this.hasEvent(a))if(1<arguments.length){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);b=this._events[a].apply(this,b)}else b=this._events[a].call(this);
else console.warn("The event "+a+" does not exist.");return b};x.prototype.hasEvent=function(a){return a in this._events};x.prototype.getNumberOfInputs=function(){return Object.keys(this._input).length};x.prototype.getNumberOfOutputs=function(){return Object.keys(this._output).length};var Ma=function(){var a;a=T.call(this)||this;a._data=null;return a};$jscomp.inherits(Ma,T);Ma.prototype.setRawData=function(a){this._data=a};Ma.prototype.setRawMetadata=function(a){this._metadata=a};var B=function(a){var b;
a=void 0===a?null:a;b=Ma.call(this)||this;b._type=B.TYPE();b.setMetadata("ncpp",4);if(a&&"width"in a&&"height"in a&&0<a.width&&0<a.height){b.setMetadata("width",a.width);b.setMetadata("height",a.height);"color"in a&&b.setMetadata("ncpp",a.color.length);b._data=new Float32Array(a.width*a.height*b.getMetadata("ncpp"));var c=b.getMetadata("ncpp");if("color"in a){a=a.color;for(var d=0;d<b._data.length;d++)b._data[d]=a[d%c];b.computeSimpleStat()}else b._data.fill(0)}return b};$jscomp.inherits(B,Ma);B.TYPE=
function(){return"IMAGE2D"};B.prototype.clone=function(){var a=new B;a.setData(this._data,this.getMetadata("width"),this.getMetadata("height"),this.getMetadata("ncpp"),!0);a.copyMetadataFrom(this);return a};B.prototype.setData=function(a,b,c,d,e){d=void 0===d?4:d;e=void 0===e?!1:e;this.setMetadata("ncpp",d);a.length!=b*c*d?console.warn("The array size does not match the width and height. Cannot init the Image2D."):(this._data=e?new a.constructor(a):a,this.setMetadata("width",b),this.setMetadata("height",
c),this.computeSimpleStat())};B.prototype.setPixel=function(a,b,c){c=void 0===c?!1:c;if(this._data){var d=this._metadata.ncpp;if("x"in a&&0<=a.x&&a.x<this._metadata.width&&"y"in a&&0<=a.y&&a.y<this._metadata.height&&b.length==d){a=this.get1dIndexFrom2dPosition(a);if(1==d)this._data[a]=b[0];else{a*=d;for(var e=0;e<d;e++)this._data[a+e]=b[e]}c&&this.computeSimpleStat()}else console.error("x and y position have to be within the image dimensions and color size must be the same as the original image.")}else console.warn("The image is empty")};
B.prototype.getPixel=function(a){if(this._data){if("x"in a&&0<=a.x&&a.x<this._metadata.width&&"y"in a&&0<=a.y&&a.y<this._metadata.height){var b=this._metadata.ncpp;a=this.get1dIndexFrom2dPosition(a);1==b?b=[this._data[a]]:(a*=b,b=this._data.slice(a,a+b));return b}console.warn("The requested position is outside the image.");return null}console.warn("The image is empty")};B.prototype.getWidth=function(){return this._metadata.width};B.prototype.getHeight=function(){return this._metadata.height};B.prototype.getComponentsPerPixel=
function(){return this._metadata.ncpp};B.prototype.getData=function(){return this._data};B.prototype.getDataCopy=function(){return new this._data.constructor(this._data)};B.prototype.getDataAsUInt8Array=function(){if(this._data){for(var a=this.getMin(),b=this.getMax(),c=new Uint8Array(this._data.length),d=0;d<this._data.length;d++)c[d]=(this._data[d]-a)/b*256;return c}console.warn("No data, cannot make a copy of it.")};B.prototype.get2dPositionFrom1dIndex=function(a){return{x:a%this._metadata.width,
y:Math.floor(a/this._metadata.width)}};B.prototype.get1dIndexFrom2dPosition=function(a){return a.x+a.y*this._metadata.width};B.prototype.computeSimpleStat=function(){if(this._data){for(var a=Infinity,b=-Infinity,c=0,d=0;d<this._data.length;d++)a=Math.min(a,this._data[d]),b=Math.max(a,this._data[d]),c+=this._data[d];this.setMetadata("min",a);this.setMetadata("max",b);this.setMetadata("avg",c/this._data.length)}else console.warn("The image is empty")};B.prototype.getMin=function(){this.hasMetadata("min")||
this.computeSimpleStat();return this.getMetadata("min")};B.prototype.getMax=function(){this.hasMetadata("max")||this.computeSimpleStat();return this.getMetadata("max")};B.prototype.getAvg=function(){this.hasMetadata("avg")||this.computeSimpleStat();return this.getMetadata("avg")};var K=function(a){var b;a=void 0===a?null:a;b=Ma.call(this)||this;b._type=K.TYPE();b.setMetadata("ncpp",1);a&&"order"in a?b.setMetadata("order",a.order):b.setMetadata("order",["zspace","yspace","xspace"]);var c={offset:1,
step:1},d={step:1},e={step:1};b.setMetadata("xspace",c);b.setMetadata("yspace",d);b.setMetadata("zspace",e);a&&"ncpp"in a&&b.setMetadata("ncpp",a.ncpp);a&&"xSize"in a&&"ySize"in a&&"zSize"in a&&0<a.xSize&&0<a.ySize&&0<a.zSize&&(c.space_length=a.xSize,d.space_length=a.ySize,e.space_length=a.zSize,d.offset=c.space_length,e.offset=c.space_length*d.space_length,b._data=new Float32Array(a.xSize*a.ySize*a.zSize*b.getMetadata("ncpp")),b._data.fill(0),b._scanDataRange(),b._finishHeader());return b};$jscomp.inherits(K,
Ma);K.TYPE=function(){return"IMAGE3D"};K.prototype.clone=function(){var a=new K;a.setData(this._data,this.getMetadata("xspace").space_length,this.getMetadata("yspace").space_length,this.getMetadata("zspace").space_length,{ncpp:this.getMetadata("ncpp"),order:this.getMetadata("order").slice(),deepCopy:!0});a.copyMetadataFrom(this);return a};K.prototype.setData=function(a,b,c,d,e){var f=1;e&&"ncpp"in e&&(f=e.ncpp);a.length!=b*c*d*f?console.warn("The array size does not match the width and height. Cannot init the Image3D."):
(e&&"ncpp"in e&&this.setMetadata("ncpp",e.ncpp),e&&"order"in e&&this.setMetadata("order",e.order),this._data=e&&"deepCopy"in e&&e.deepCopy?new a.constructor(a):a,a=this.getMetadata("xspace"),e=this.getMetadata("yspace"),f=this.getMetadata("zspace"),a.space_length=b,e.space_length=c,f.space_length=d,e.offset=a.space_length,f.offset=a.space_length*e.space_length,this._scanDataRange(),this._finishHeader())};K.prototype._finishHeader=function(){var a=this.getMetadata("xspace"),b=this.getMetadata("yspace"),
c=this.getMetadata("zspace");a.name="xspace";b.name="yspace";c.name="zspace";a.width_space=JSON.parse(JSON.stringify(b));a.width=b.space_length;a.height_space=JSON.parse(JSON.stringify(c));a.height=c.space_length;b.width_space=JSON.parse(JSON.stringify(a));b.width=a.space_length;b.height_space=JSON.parse(JSON.stringify(c));b.height=c.space_length;c.width_space=JSON.parse(JSON.stringify(a));c.width=a.space_length;c.height_space=JSON.parse(JSON.stringify(b));c.height=b.space_length};K.prototype._scanDataRange=
function(){for(var a=Infinity,b=-Infinity,c=0;c<this._data.length;c++)a=Math.min(a,this._data[c]),b=Math.max(b,this._data[c]);this.setMetadata("voxel_min",a);this.setMetadata("voxel_max",b)};K.prototype.setPixel=function(a,b){};K.prototype.getPixel=function(a){};K.prototype.getSize=function(a){if(this.hasMetadata(a))return this.getMetadata(a).space_length;console.warn('The space must be "xspace", "yspace" or "zspace".');return null};K.prototype.getData=function(){return this._data};K.prototype.getDataCopy=
function(){return new this._data.constructor(this._data)};K.prototype.get1dIndexFrom3dPosition=function(a){};K.prototype.getSlice=function(a,b,c){b=void 0===b?0:b;c=void 0===c?0:c;if(!this.hasMetadata(a))return console.warn("The axis "+a+" does not exist."),null;var d=this.hasMetadata("time")?c*this.getMetadata("time").offset:0,e=this.getMetadata(a),f=e.width_space,g=e.height_space;a=e.width;c=e.height;var h=e.offset,m=f.offset,k=g.offset,n=new this._data.constructor(a*c),l,f=0<f.step,F=0<g.step;
l=0<e.step;var p=g=0,t=Infinity,L=-Infinity;this.getMetadata("voxel_max");b=l?b:e.space_length-b-1;if(0<=b&&b<e.space_length)for(d+=b*h,b=c-1;0<=b;b--)for(e=F?b:c-b-1,h=d+e*k,e=0;e<a;e++)l=f?e:a-e-1,l=h+l*m,l=this._data[l],t=Math.min(t,l),L=Math.max(L,l),p+=l,n[g++]=l;m=new B;m.setData(n,a,c,1);m.setMetadata("min",t);m.setMetadata("max",L);m.setMetadata("avg",p/(g-1));return m};K.prototype.getIntensity_ijk=function(a,b,c,d){d=void 0===d?0:d;var e=this.getMetadata("order");if(0>a||a>=this.getMetadata(e[0]).space_length||
0>b||b>=this.getMetadata(e[1]).space_length||0>c||c>=this.getMetadata(e[2]).space_length)return console.warn("getIntensity_ijk position is out of range."),0;d=this.hasMetadata("time")?d*this.getMetadata("time").offset:0;a=a*this.getMetadata(e[0]).offset+b*this.getMetadata(e[1]).offset+c*this.getMetadata(e[2]).offset+d;return this._data[a]};K.prototype.getIntensity_xyz=function(a,b,c,d){d=void 0===d?0:d;this.getMetadata("order");if(0>a||a>=this.getMetadata("xspace").space_length||0>b||b>=this.getMetadata("yspace").space_length||
0>c||c>=this.getMetadata("zspace").space_length)return console.warn("getIntensity_xyz position is out of range."),0;d=this.hasMetadata("time")?d*this.getMetadata("time").offset:0;a=a*this.getMetadata("xspace").offset+b*this.getMetadata("yspace").offset+c*this.getMetadata("zspace").offset+d;return this._data[a]};var R=function(){var a;a=x.call(this)||this;a.addInputValidator(0,B);return a};$jscomp.inherits(R,x);R.prototype.hasSameSizeInput=function(){var a=this,b=!0,c=[],d=[];Object.keys(this._input).forEach(function(b){c.push(a._getInput(b).getWidth());
d.push(a._getInput(b).getHeight())});c.length&&(c.sort(),d.sort(),(b=c[0]==c[c.length-1]&&d[0]==d[d.length-1])||console.warn("Input image do not all have the same size. Filter not valid"));return b};R.prototype.hasSameNcppInput=function(){var a=Object.keys(this._input);if(!a.length)return!1;for(var b=this._getInput(a[0]).getComponentsPerPixel(),c=0;c<a.length;c++)if(b!=this._getInput(a[c]).getComponentsPerPixel())return console.warn("Input image do not all have the same number of components per pixel. Filter not valid"),
!1;return!0};var pa=function(a){return K.call(this)||this};$jscomp.inherits(pa,K);pa.transformToMinc=function(a,b){function c(a){a=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0>=a&&(a=1);return Math.sqrt(a)}function d(a,b,c){return a[0]*(b[1]*c[2]-b[2]*c[1])-a[1]*(b[0]*c[2]-b[2]*c[0])+a[2]*(b[0]*c[1]-b[1]*c[0])}for(var e=[],f=[],g=[],h=c(a[0]),m=c(a[1]),k=c(a[2]),h=0>a[0][0]?-h:h,m=0>a[1][1]?-m:m,k=0>a[2][2]?-k:k,n=0;3>n;n++)e[n]=a[n][0]/h,f[n]=a[n][1]/m,g[n]=a[n][2]/k;b.xspace.step=h;b.yspace.step=m;b.zspace.step=
k;m=[a[0][3],a[1][3],a[2][3]];a=d(e,f,g);h=d(m,f,g);k=d(e,m,g);m=d(e,f,m);b.xspace.start=h/a;b.yspace.start=k/a;b.zspace.start=m/a;b.xspace.direction_cosines=e;b.yspace.direction_cosines=f;b.zspace.direction_cosines=g};pa.swapn=function(a,b){for(var c=0;c<a.length;c+=b)for(var d=b-1,e=0;d>e;){var f=a[c+d];a[c+d]=a[c+e];a[c+e]=f;d--;e++}};pa.prototype.setData=function(a,b){var c=this;this._data=a;this.setMetadata("position",{});this.setMetadata("current_time",0);Object.keys(b).forEach(function(a){c.setMetadata(a,
b[a])});this._scanDataRange();this._saveOriginAndTransform();this._finishHeader();console.log(this._metadata)};pa.prototype._saveOriginAndTransform=function(){var a=this.getMetadata("xspace"),b=this.getMetadata("yspace"),c=this.getMetadata("zspace"),d=a.start,e=b.start,f=c.start,g=a.direction_cosines,h=b.direction_cosines,m=c.direction_cosines,a=a.step,b=b.step,c=c.step,d={x:d*g[0]+e*h[0]+f*m[0],y:d*g[1]+e*h[1]+f*m[1],z:d*g[2]+e*h[2]+f*m[2]};this.setMetadata("voxel_origin",d);this.setMetadata("w2v",
[[g[0]/a,g[1]/a,g[2]/a,(-d.x*g[0]-d.y*g[1]-d.z*g[2])/a],[h[0]/b,h[1]/b,h[2]/b,(-d.x*h[0]-d.y*h[1]-d.z*h[2])/b],[m[0]/c,m[1]/c,m[2]/c,(-d.x*m[0]-d.y*m[1]-d.z*m[2])/c]])};var rb=function(){var a;a=x.call(this)||this;a.addInputValidator(0,B);a.setMetadata("alpha",!1);a.setMetadata("min",0);a.setMetadata("max",255);a.setMetadata("reset",!0);a._canvas=null;a._ctx=null;return a};$jscomp.inherits(rb,x);rb.prototype._init=function(){var a=document.getElementById(this.getMetadata("parentDivID"));if(!a)return!1;
if(this.getMetadata("reset"))for(;a.firstChild;)a.removeChild(a.firstChild);this._canvas=document.createElement("canvas");this._canvas.style="image-rendering: pixelated;";this._ctx=this._canvas.getContext("2d");this._ctx.imageSmoothingEnabled=!0;this._ctx.mozImageSmoothingEnabled=!1;this._ctx.webkitImageSmoothingEnabled=!1;this._ctx.ctxmsImageSmoothingEnabled=!1;document.getElementById(this.getMetadata("parentDivID")).appendChild(this._canvas);return!0};rb.prototype._run=function(){if(this.hasValidInput()){var a=
this._input[0],b=a.getComponentsPerPixel();if(1!=b&&3!=b&&4!=b)console.warn("Cannot write Image in canvas if contains other than 1, 3 or 4 bands.");else if(this.getMetadata("parentDivID"))if(this._init()){var c=this.getMetadata("alpha");this._canvas.width=a.getWidth();this._canvas.height=a.getHeight();var d=this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height),e=d.data,a=a.getData();if(4==b)for(b=0;b<a.length;b++)e[b]=c||3!=b%4?this._stretchMinMax(a[b]):255;else if(1==b)for(b=0;b<a.length;b++){var c=
4*b,f=this._stretchMinMax(a[b]);e[c]=f;e[c+1]=f;e[c+2]=f;e[c+3]=255}else if(3==b)for(b=c=0;b<e.length;b++)3==b%4?e[b]=255:(e[b]=this._stretchMinMax(a[c]),c++);this._ctx.putImageData(d,0,0)}else console.warn("The parent div was not specified or does not exist.");else console.error("The parent DIV ID to place the canvas element was not specified. Unable to display anything.")}};rb.prototype._stretchMinMax=function(a){var b=this._metadata.min,c=this._metadata.max;return 0==b&&255==c?a:(a-b)/(c-b)*255};
var Lb=function(a){a=x.call(this)||this;a._loadedCounter=0;a._addOutput(B,0);return a};$jscomp.inherits(Lb,x);Lb.prototype._run=function(){var a=this;this.getInputCategories().forEach(function(b){a._addOutput(B,b);a._loadImage(b)})};Lb.prototype._loadImage=function(a){var b=this,c=new Image;c.src=this._getInput(a);c.onload=function(){var d=document.createElement("canvas");d.width=c.width;d.height=c.height;var e=d.getContext("2d");e.drawImage(c,0,0);try{var f=e.getImageData(0,0,d.width,d.height),g=
new Float32Array(f.data);b.getOutput(a).setData(g,c.width,c.height);b._loadedCounter++;b._loadedCounter==b.getNumberOfInputs()&&b.triggerEvent("ready")}catch(h){console.error(h)}}};var Mb=function(){var a;a=x.call(this)||this;a._allowedTypes=/image.*/;return a};$jscomp.inherits(Mb,x);Mb.prototype.hasValidInput=function(){var a=!1,b=this._getInput();b&&b.type.match(this._allowedTypes)?a=!0:console.error("The file must be an image (jpg/png). The type "+b.type+" is not compatible with FileImageReader.");
return a};Mb.prototype._run=function(){if(this.hasValidInput()){var a=this,b=this._getInput(),c=new FileReader;c.onload=function(b){var d=new Image;d.onload=function(){var b=document.createElement("canvas");b.width=d.width;b.height=d.height;b=b.getContext("2d");b.drawImage(d,0,0);b=b.getImageData(0,0,d.width,d.height).data;a._addOutput(B,0).setData(b,d.width,d.height);a.triggerEvent("ready")};d.src=c.result};c.readAsDataURL(b)}};var sb="undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{},xa=u,ya=v;"function"===typeof sb.setTimeout&&(xa=setTimeout);"function"===typeof sb.clearTimeout&&(ya=clearTimeout);var ra=[],Pa=!1,Ea,yb=-1;ha.prototype.run=function(){this.fun.apply(null,this.array)};var Za=sb.performance||{},Ne=Za.now||Za.mozNow||Za.msNow||Za.oNow||Za.webkitNow||function(){return(new Date).getTime()},Oe=new Date,nc={nextTick:function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];
ra.push(new ha(a,b));1!==ra.length||Pa||y(V)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Fa,addListener:Fa,once:Fa,off:Fa,removeListener:Fa,removeAllListeners:Fa,emit:Fa,binding:function(a){throw Error("process.binding is not supported");},cwd:function(){return"/"},chdir:function(a){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(a){var b=.001*Ne.call(Za),c=Math.floor(b),b=Math.floor(b%1*1E9);a&&(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));
return[c,b]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Oe)/1E3}},oc="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vd={},Wd=Object.freeze({default:Vd}),ia=[],ga=[],te="undefined"!==typeof Uint8Array?Uint8Array:Array,Rb=!1,Pe={}.toString,Ic=Array.isArray||function(a){return"[object Array]"==Pe.call(a)};q.TYPED_ARRAY_SUPPORT=void 0!==sb.TYPED_ARRAY_SUPPORT?sb.TYPED_ARRAY_SUPPORT:!0;var Qe=q.TYPED_ARRAY_SUPPORT?
2147483647:1073741823;q.poolSize=8192;q._augment=function(a){a.__proto__=q.prototype;return a};q.from=function(a,b,c){return Fc(null,a,b,c)};q.TYPED_ARRAY_SUPPORT&&(q.prototype.__proto__=Uint8Array.prototype,q.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol());q.alloc=function(a,b,c){Hc(a);a=0>=a?sa(null,a):void 0!==b?"string"===typeof c?sa(null,a).fill(b,c):sa(null,a).fill(b):sa(null,a);return a};q.allocUnsafe=function(a){return Sb(null,a)};q.allocUnsafeSlow=function(a){return Sb(null,
a)};q.isBuffer=Sc;q.compare=function(a,b){if(!ja(a)||!ja(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};q.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};q.concat=function(a,b){if(!Ic(a))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===a.length)return q.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=q.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!ja(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};q.byteLength=Gc;q.prototype._isBuffer=!0;q.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)Ga(this,b,b+1);return this};q.prototype.swap32=
function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)Ga(this,b,b+3),Ga(this,b+1,b+2);return this};q.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)Ga(this,b,b+7),Ga(this,b+1,b+6),Ga(this,b+2,b+5),Ga(this,b+3,b+4);return this};q.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?Kc(this,0,a):re.apply(this,
arguments)};q.prototype.equals=function(a){if(!ja(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===q.compare(this,a)};q.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};q.prototype.compare=function(a,b,c,d,e){if(!ja(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>
b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};q.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};q.prototype.indexOf=function(a,b,c){return Lc(this,a,b,c,!0)};q.prototype.lastIndexOf=function(a,b,c){return Lc(this,
a,b,c,!1)};q.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=
Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return ab(Ab(a,this.length-b),this,b,c);case "ascii":return ab(Rc(a),this,b,c);case "latin1":case "binary":return ab(Rc(a),this,b,c);case "base64":return ab(Jc(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var f;d=a;
for(var e=this.length-b,g=[],h=0;h<d.length&&!(0>(e-=2));++h)f=d.charCodeAt(h),a=f>>8,f%=256,g.push(f),g.push(a);return ab(g,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Nc=4096;q.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(q.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=q.prototype;else{c=b-a;b=new q(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};q.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||Q(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};q.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||Q(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};q.prototype.readUInt8=function(a,b){b||Q(a,1,this.length);return this[a]};q.prototype.readUInt16LE=function(a,
b){b||Q(a,2,this.length);return this[a]|this[a+1]<<8};q.prototype.readUInt16BE=function(a,b){b||Q(a,2,this.length);return this[a]<<8|this[a+1]};q.prototype.readUInt32LE=function(a,b){b||Q(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};q.prototype.readUInt32BE=function(a,b){b||Q(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};q.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||Q(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=
this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};q.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||Q(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};q.prototype.readInt8=function(a,b){b||Q(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};q.prototype.readInt16LE=function(a,b){b||Q(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};q.prototype.readInt16BE=function(a,b){b||Q(a,2,this.length);
a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};q.prototype.readInt32LE=function(a,b){b||Q(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};q.prototype.readInt32BE=function(a,b){b||Q(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};q.prototype.readFloatLE=function(a,b){b||Q(a,4,this.length);return zb(this,a,!0,23,4)};q.prototype.readFloatBE=function(a,b){b||Q(a,4,this.length);return zb(this,a,!1,23,4)};q.prototype.readDoubleLE=function(a,b){b||
Q(a,8,this.length);return zb(this,a,!0,52,8)};q.prototype.readDoubleBE=function(a,b){b||Q(a,8,this.length);return zb(this,a,!1,52,8)};q.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||Y(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};q.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||Y(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};q.prototype.writeUInt8=
function(a,b,c){a=+a;b|=0;c||Y(this,a,b,1,255,0);q.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};q.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,2,65535,0);q.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Bb(this,a,b,!0);return b+2};q.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,2,65535,0);q.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Bb(this,a,b,!1);return b+2};q.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,4,
4294967295,0);q.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):Cb(this,a,b,!0);return b+4};q.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,4,4294967295,0);q.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):Cb(this,a,b,!1);return b+4};q.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),Y(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===f&&0!==this[b+d-
1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};q.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),Y(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};q.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,1,127,-128);q.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};q.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,2,32767,
-32768);q.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Bb(this,a,b,!0);return b+2};q.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,2,32767,-32768);q.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Bb(this,a,b,!1);return b+2};q.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||Y(this,a,b,4,2147483647,-2147483648);q.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):Cb(this,a,b,!0);return b+4};q.prototype.writeInt32BE=function(a,b,c){a=
+a;b|=0;c||Y(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);q.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):Cb(this,a,b,!1);return b+4};q.prototype.writeFloatLE=function(a,b,c){return Pc(this,a,b,!0,c)};q.prototype.writeFloatBE=function(a,b,c){return Pc(this,a,b,!1,c)};q.prototype.writeDoubleLE=function(a,b,c){return Qc(this,a,b,!0,c)};q.prototype.writeDoubleBE=function(a,b,c){return Qc(this,a,b,!1,c)};q.prototype.copy=function(a,b,c,d){c||(c=0);
d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!q.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+
b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};q.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!q.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<
b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=ja(a)?a:Ab((new q(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var se=/[^+\/0-9A-Za-z-_]/g,Re=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:Qe,Buffer:q,SlowBuffer:function(a){+a!=a&&(a=0);return q.alloc(+a)},isBuffer:Sc}),Xd=Wd&&Vd||Wd,Yd=Qa(function(a){(function(){function b(a){a?(n[0]=
n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0,this.blocks=n,this.buffer8=l):f?(a=new ArrayBuffer(68),this.buffer8=new Uint8Array(a),this.blocks=new Uint32Array(a)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var c="object"===typeof window?window:{},d=!c.JS_MD5_NO_NODE_JS&&"object"===typeof nc&&nc.versions&&nc.versions.node;d&&(c=oc);var e=!c.JS_MD5_NO_COMMON_JS&&
!0&&a.exports,f=!c.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,g="0123456789abcdef".split(""),h=[128,32768,8388608,-2147483648],m=[0,8,16,24],k=["hex","array","digest","buffer","arrayBuffer"],n=[],l;if(f){var F=new ArrayBuffer(68);l=new Uint8Array(F);n=new Uint32Array(F)}var p=function(a){return function(c){return(new b(!0)).update(c)[a]()}},t=function(a){var b=Re.Buffer;return function(c){if("string"===typeof c)return Xd.createHash("md5").update(c,"utf8").digest("hex");if(c.constructor===
ArrayBuffer)c=new Uint8Array(c);else if(void 0===c.length)return a(c);return Xd.createHash("md5").update(new b(c)).digest("hex")}};b.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;b&&a.constructor==c.ArrayBuffer&&(a=new Uint8Array(a));for(var d,e=0,g,h=a.length||0,k=this.blocks,L=this.buffer8;e<h;){this.hashed&&(this.hashed=!1,k[0]=k[16],k[16]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=0);if(b)if(f)for(g=this.start;e<h&&64>g;++e)L[g++]=
a[e];else for(g=this.start;e<h&&64>g;++e)k[g>>2]|=a[e]<<m[g++&3];else if(f)for(g=this.start;e<h&&64>g;++e)d=a.charCodeAt(e),128>d?L[g++]=d:(2048>d?L[g++]=192|d>>6:(55296>d||57344<=d?L[g++]=224|d>>12:(d=65536+((d&1023)<<10|a.charCodeAt(++e)&1023),L[g++]=240|d>>18,L[g++]=128|d>>12&63),L[g++]=128|d>>6&63),L[g++]=128|d&63);else for(g=this.start;e<h&&64>g;++e)d=a.charCodeAt(e),128>d?k[g>>2]|=d<<m[g++&3]:(2048>d?k[g>>2]|=(192|d>>6)<<m[g++&3]:(55296>d||57344<=d?k[g>>2]|=(224|d>>12)<<m[g++&3]:(d=65536+((d&
1023)<<10|a.charCodeAt(++e)&1023),k[g>>2]|=(240|d>>18)<<m[g++&3],k[g>>2]|=(128|d>>12&63)<<m[g++&3]),k[g>>2]|=(128|d>>6&63)<<m[g++&3]),k[g>>2]|=(128|d&63)<<m[g++&3]);this.lastByteIndex=g;this.bytes+=g-this.start;64<=g?(this.start=g-64,this.hash(),this.hashed=!0):this.start=g}return this}};b.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=h[b&3];56<=b&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=
a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[14]=this.bytes<<3;this.hash()}};b.prototype.hash=function(){var a,b,c,d,e,f=this.blocks;this.first?(a=f[0]-680876937,a=(a<<7|a>>>25)-271733879<<0,d=(-1732584194^a&2004318071)+f[1]-117830708,d=(d<<12|d>>>20)+a<<0,c=(-271733879^d&(a^-271733879))+f[2]-1126478375,c=(c<<17|c>>>15)+d<<0,b=(a^c&(d^a))+f[3]-1316259209):(a=this.h0,b=this.h1,c=this.h2,d=this.h3,a+=(d^b&(c^d))+f[0]-680876936,a=(a<<7|a>>>25)+b<<0,d+=(c^a&(b^c))+f[1]-389564586,d=(d<<12|d>>>20)+a<<
0,c+=(b^d&(a^b))+f[2]+606105819,c=(c<<17|c>>>15)+d<<0,b+=(a^c&(d^a))+f[3]-1044525330);b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[4]-176418897;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[5]+1200080426;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[6]-1473231341;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[7]-45705983;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[8]+1770035416;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[9]-1958414417;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[10]-42063;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[11]-1990404162;
b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+f[12]+1804603682;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+f[13]-40341101;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+f[14]-1502002290;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+f[15]+1236535329;b=(b<<22|b>>>10)+c<<0;a+=(c^d&(b^c))+f[1]-165796510;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[6]-1069501632;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[11]+643717713;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[0]-373897302;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[5]-701558691;a=(a<<5|a>>>27)+b<<0;d+=(b^c&
(a^b))+f[10]+38016083;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[15]-660478335;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[4]-405537848;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[9]+568446438;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[14]-1019803690;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[3]-187363961;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+f[8]+1163531501;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+f[13]-1444681467;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+f[2]-51403784;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+f[7]+1735328473;c=(c<<14|c>>>
18)+d<<0;b+=(d^a&(c^d))+f[12]-1926607734;b=(b<<20|b>>>12)+c<<0;e=b^c;a+=(e^d)+f[5]-378558;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[8]-2022574463;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[11]+1839030562;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[14]-35309556;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[1]-1530992060;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[4]+1272893353;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[7]-155497632;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[10]-1094730640;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[13]+681279174;a=(a<<4|a>>>28)+
b<<0;d+=(e^a)+f[0]-358537222;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[3]-722521979;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[6]+76029189;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+f[9]-640364487;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+f[12]-421815835;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+f[15]+530742520;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+f[2]-995338651;b=(b<<23|b>>>9)+c<<0;a+=(c^(b|~d))+f[0]-198630844;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[7]+1126891415;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[14]-1416354905;c=(c<<15|c>>>17)+d<<0;b+=
(d^(c|~a))+f[5]-57434055;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[12]+1700485571;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[3]-1894986606;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[10]-1051523;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[1]-2054922799;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[8]+1873313359;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+f[15]-30611744;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[6]-1560198380;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[13]+1309151649;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+f[4]-145523070;a=(a<<6|a>>>
26)+b<<0;d+=(b^(a|~c))+f[11]-1120210379;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+f[2]+718787259;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+f[9]-343485551;b=(b<<21|b>>>11)+c<<0;this.first?(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)};b.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return g[a>>4&15]+g[a&15]+g[a>>12&15]+g[a>>
8&15]+g[a>>20&15]+g[a>>16&15]+g[a>>28&15]+g[a>>24&15]+g[b>>4&15]+g[b&15]+g[b>>12&15]+g[b>>8&15]+g[b>>20&15]+g[b>>16&15]+g[b>>28&15]+g[b>>24&15]+g[c>>4&15]+g[c&15]+g[c>>12&15]+g[c>>8&15]+g[c>>20&15]+g[c>>16&15]+g[c>>28&15]+g[c>>24&15]+g[d>>4&15]+g[d&15]+g[d>>12&15]+g[d>>8&15]+g[d>>20&15]+g[d>>16&15]+g[d>>28&15]+g[d>>24&15]};b.prototype.toString=b.prototype.hex;b.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>
8&255,b>>16&255,b>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,d&255,d>>8&255,d>>16&255,d>>24&255]};b.prototype.array=b.prototype.digest;b.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(16),b=new Uint32Array(a);b[0]=this.h0;b[1]=this.h1;b[2]=this.h2;b[3]=this.h3;return a};b.prototype.buffer=b.prototype.arrayBuffer;F=function(){var a=p("hex");d&&(a=t(a));a.create=function(){return new b};a.update=function(b){return a.create().update(b)};for(var c=0;c<k.length;++c){var e=k[c];
a[e]=p(e)}return a}();e?a.exports=F:c.md5=F})()}),A=Qa(function(a,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};b.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};
var c={arraySet:function(a,b,c,d,m){if(b.subarray&&a.subarray)a.set(b.subarray(c,c+d),m);else for(var e=0;e<d;e++)a[m+e]=b[c+e]},flattenChunks:function(a){var b,c,d,e,k;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;k=new Uint8Array(d);b=d=0;for(c=a.length;b<c;b++)e=a[b],k.set(e,d),d+=e.length;return k}},d={arraySet:function(a,b,c,d,m){for(var e=0;e<d;e++)a[m+e]=b[c+e]},flattenChunks:function(a){return[].concat.apply([],a)}};b.setTyped=function(a){a?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,
b.assign(b,c)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,d))};b.setTyped(a)}),Yb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Db=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Zd=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ua=Array(576);Ra(ua);var tb=Array(60);Ra(tb);var Ha=Array(512);Ra(Ha);var cb=Array(256);Ra(cb);var Zb=Array(29);Ra(Zb);var Eb=Array(30);Ra(Eb);var $d,ae,be,ce=!1,fa={_tr_init:function(a){if(!ce){var b,
c,d,e=Array(16);for(d=c=0;28>d;d++)for(Zb[d]=c,b=0;b<1<<Yb[d];b++)cb[c++]=d;cb[c-1]=d;for(d=c=0;16>d;d++)for(Eb[d]=c,b=0;b<1<<Db[d];b++)Ha[c++]=d;for(c>>=7;30>d;d++)for(Eb[d]=c<<7,b=0;b<1<<Db[d]-7;b++)Ha[256+c++]=d;for(b=0;15>=b;b++)e[b]=0;for(b=0;143>=b;)ua[2*b+1]=8,b++,e[8]++;for(;255>=b;)ua[2*b+1]=9,b++,e[9]++;for(;279>=b;)ua[2*b+1]=7,b++,e[7]++;for(;287>=b;)ua[2*b+1]=8,b++,e[8]++;Vc(ua,287,e);for(b=0;30>b;b++)tb[2*b+1]=5,tb[2*b]=Uc(b,5);$d=new Vb(ua,Yb,257,286,15);ae=new Vb(tb,Db,0,30,15);be=
new Vb([],Se,0,19,7);ce=!0}a.l_desc=new Wb(a.dyn_ltree,$d);a.d_desc=new Wb(a.dyn_dtree,ae);a.bl_desc=new Wb(a.bl_tree,be);a.bi_buf=0;a.bi_valid=0;Wc(a)},_tr_stored_block:bd,_tr_flush_block:function(a,b,c,d){var e,f,g=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=ue(a));$b(a,a.l_desc);$b(a,a.d_desc);$c(a,a.dyn_ltree,a.l_desc.max_code);$c(a,a.dyn_dtree,a.d_desc.max_code);$b(a,a.bl_desc);for(g=18;3<=g&&0===a.bl_tree[2*Zd[g]+1];g--);a.opt_len+=3*(g+1)+14;e=a.opt_len+3+7>>>3;f=a.static_len+3+
7>>>3;f<=e&&(e=f)}else e=f=c+5;if(c+4<=e&&-1!==b)bd(a,b,c,d);else if(4===a.strategy||f===e)ca(a,2+(d?1:0),3),Zc(a,ua,tb);else{ca(a,4+(d?1:0),3);b=a.l_desc.max_code+1;c=a.d_desc.max_code+1;g+=1;ca(a,b-257,5);ca(a,c-1,5);ca(a,g-4,4);for(e=0;e<g;e++)ca(a,a.bl_tree[2*Zd[e]+1],3);ad(a,a.dyn_ltree,b-1);ad(a,a.dyn_dtree,c-1);Zc(a,a.dyn_ltree,a.dyn_dtree)}Wc(a);d&&Xc(a)},_tr_tally:function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+
a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(cb[c]+256+1)]++,a.dyn_dtree[2*(256>b?Ha[b]:Ha[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1},_tr_align:function(a){ca(a,2,3);ka(a,256,ua);16===a.bi_valid?(bb(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},eb=function(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;for(var f;0!==c;){f=2E3<c?2E3:c;c-=f;do e=e+b[d++]|0,a=a+e|0;while(--f);
e%=65521;a%=65521}return e|a<<16|0},Te=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}(),O=function(a,b,c,d){c=d+c;for(a^=-1;d<c;d++)a=a>>>8^Te[(a^b[d])&255];return a^-1},Sa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ua;Ua=[new na(0,0,0,0,function(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-
5);;){if(1>=a.lookahead){Ia(a);if(0===a.lookahead&&0===b)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(0===a.strstart||a.strstart>=d)if(a.lookahead=a.strstart-d,a.strstart=d,W(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(W(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===b)return W(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&W(a,!1);return 1}),new na(4,4,8,4,ac),new na(4,5,16,8,ac),new na(4,6,
32,32,ac),new na(4,4,16,16,Ta),new na(8,16,32,32,Ta),new na(8,16,128,128,Ta),new na(8,32,128,256,Ta),new na(32,128,258,1024,Ta),new na(32,258,258,4096,Ta)];var fb={deflateInit:function(a,b){return fd(a,b,8,15,8,0)},deflateInit2:fd,deflateReset:ed,deflateResetKeep:dd,deflateSetHeader:function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0},deflate:function(a,b){var c,d,e,f;if(!a||!a.state||5<b||0>b)return a?za(a,-2):-2;d=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===
d.status&&4!==b)return za(a,0===a.avail_out?-5:-2);d.strm=a;c=d.last_flush;d.last_flush=b;42===d.status&&(2===d.wrap?(a.adler=0,D(d,31),D(d,139),D(d,8),d.gzhead?(D(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),D(d,d.gzhead.time&255),D(d,d.gzhead.time>>8&255),D(d,d.gzhead.time>>16&255),D(d,d.gzhead.time>>24&255),D(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),D(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(D(d,d.gzhead.extra.length&
255),D(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=O(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(D(d,0),D(d,0),D(d,0),D(d,0),D(d,0),D(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),D(d,3),d.status=113)):(e=8+(d.w_bits-8<<4)<<8,e|=(2<=d.strategy||2>d.level?0:6>d.level?1:6===d.level?2:3)<<6,0!==d.strstart&&(e|=32),d.status=113,db(d,e+(31-e%31)),0!==d.strstart&&(db(d,a.adler>>>16),db(d,a.adler&65535)),a.adler=1));if(69===d.status)if(d.gzhead.extra){for(e=d.pending;d.gzindex<
(d.gzhead.extra.length&65535)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e)),Ba(a),e=d.pending,d.pending!==d.pending_buf_size));)D(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e));d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(73===d.status)if(d.gzhead.name){e=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>
e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e)),Ba(a),e=d.pending,d.pending===d.pending_buf_size)){f=1;break}f=d.gzindex<d.gzhead.name.length?d.gzhead.name.charCodeAt(d.gzindex++)&255:0;D(d,f)}while(0!==f);d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e));0===f&&(d.gzindex=0,d.status=91)}else d.status=91;if(91===d.status)if(d.gzhead.comment){e=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e)),
Ba(a),e=d.pending,d.pending===d.pending_buf_size)){f=1;break}f=d.gzindex<d.gzhead.comment.length?d.gzhead.comment.charCodeAt(d.gzindex++)&255:0;D(d,f)}while(0!==f);d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e));0===f&&(d.status=103)}else d.status=103;103===d.status&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&Ba(a),d.pending+2<=d.pending_buf_size&&(D(d,a.adler&255),D(d,a.adler>>8&255),a.adler=0,d.status=113)):d.status=113);if(0!==d.pending){if(Ba(a),0===a.avail_out)return d.last_flush=
-1,0}else if(0===a.avail_in&&(b<<1)-(4<b?9:0)<=(c<<1)-(4<c?9:0)&&4!==b)return za(a,-5);if(666===d.status&&0!==a.avail_in)return za(a,-5);if(0!==a.avail_in||0!==d.lookahead||0!==b&&666!==d.status){c=2===d.strategy?we(d,b):3===d.strategy?ve(d,b):Ua[d.level].func(d,b);if(3===c||4===c)d.status=666;if(1===c||3===c)return 0===a.avail_out&&(d.last_flush=-1),0;if(2===c&&(1===b?fa._tr_align(d):5!==b&&(fa._tr_stored_block(d,0,0,!1),3===b&&(Aa(d.head),0===d.lookahead&&(d.strstart=0,d.block_start=0,d.insert=
0))),Ba(a),0===a.avail_out))return d.last_flush=-1,0}if(4!==b)return 0;if(0>=d.wrap)return 1;2===d.wrap?(D(d,a.adler&255),D(d,a.adler>>8&255),D(d,a.adler>>16&255),D(d,a.adler>>24&255),D(d,a.total_in&255),D(d,a.total_in>>8&255),D(d,a.total_in>>16&255),D(d,a.total_in>>24&255)):(db(d,a.adler>>>16),db(d,a.adler&65535));Ba(a);0<d.wrap&&(d.wrap=-d.wrap);return 0!==d.pending?0:1},deflateEnd:function(a){var b;if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==
b)return za(a,-2);a.state=null;return 113===b?za(a,-3):0},deflateSetDictionary:function(a,b){var c=b.length,d,e,f,g,h;if(!a||!a.state)return-2;d=a.state;e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return-2;1===e&&(a.adler=eb(a.adler,b,c,0));d.wrap=0;c>=d.w_size&&(0===e&&(Aa(d.head),d.strstart=0,d.block_start=0,d.insert=0),f=new A.Buf8(d.w_size),A.arraySet(f,b,c-d.w_size,d.w_size,0),b=f,c=d.w_size);f=a.avail_in;g=a.next_in;h=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(Ia(d);3<=d.lookahead;){b=
d.strstart;c=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=b,b++;while(--c);d.strstart=b;d.lookahead=2;Ia(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=g;a.input=h;a.avail_in=f;d.wrap=e;return 0},deflateInfo:"pako deflate (from Nodeca project)"},id=!0,hd=!0;try{String.fromCharCode.apply(null,[0])}catch(a){id=!1}try{String.fromCharCode.apply(null,
new Uint8Array(1))}catch(a){hd=!1}for(var ub=new A.Buf8(256),Da=0;256>Da;Da++)ub[Da]=252<=Da?6:248<=Da?5:240<=Da?4:224<=Da?3:192<=Da?2:1;ub[254]=ub[254]=1;var Ka={string2buf:function(a){var b,c,d,e,f,g=a.length,h=0;for(e=0;e<g;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<g&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),e++)),h+=128>c?1:2048>c?2:65536>c?3:4;b=new A.Buf8(h);for(e=f=0;f<h;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<g&&(d=a.charCodeAt(e+1),56320===(d&64512)&&
(c=65536+(c-55296<<10)+(d-56320),e++)),128>c?b[f++]=c:(2048>c?b[f++]=192|c>>>6:(65536>c?b[f++]=224|c>>>12:(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63),b[f++]=128|c>>>6&63),b[f++]=128|c&63);return b},buf2binstring:function(a){return gd(a,a.length)},binstring2buf:function(a){for(var b=new A.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},buf2string:function(a,b){var c,d,e,f=b||a.length,g=Array(2*f);for(b=c=0;b<f;)if(d=a[b++],128>d)g[c++]=d;else if(e=ub[d],4<e)g[c++]=65533,b+=e-1;else{for(d&=
2===e?31:3===e?15:7;1<e&&b<f;)d=d<<6|a[b++]&63,e--;1<e?g[c++]=65533:65536>d?g[c++]=d:(d-=65536,g[c++]=55296|d>>10&1023,g[c++]=56320|d&1023)}return gd(g,c)},utf8border:function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||0===c?b:c+ub[a[c]]>b?c:b}},jd=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},kd=
Object.prototype.toString;Ja.prototype.push=function(a,b){var c=this.strm,d=this.options.chunkSize;if(this.ended)return!1;b=b===~~b?b:!0===b?4:0;"string"===typeof a?c.input=Ka.string2buf(a):"[object ArrayBuffer]"===kd.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;c.avail_in=c.input.length;do{0===c.avail_out&&(c.output=new A.Buf8(d),c.next_out=0,c.avail_out=d);a=fb.deflate(c,b);if(1!==a&&0!==a)return this.onEnd(a),this.ended=!0,!1;if(0===c.avail_out||0===c.avail_in&&(4===b||2===b))if("string"===
this.options.to)this.onData(Ka.buf2binstring(A.shrinkBuf(c.output,c.next_out)));else this.onData(A.shrinkBuf(c.output,c.next_out))}while((0<c.avail_in||0===c.avail_out)&&1!==a);if(4===b)return a=fb.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a;2===b&&(this.onEnd(0),c.avail_out=0);return!0};Ja.prototype.onData=function(a){this.chunks.push(a)};Ja.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):A.flattenChunks(this.chunks));this.chunks=[];this.err=
a;this.msg=this.strm.msg};var Ue={Deflate:Ja,deflate:bc,deflateRaw:function(a,b){b=b||{};b.raw=!0;return bc(a,b)},gzip:function(a,b){b=b||{};b.gzip=!0;return bc(a,b)}},Ve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],We=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Ye=[16,16,16,16,17,
17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],vb=function(a,b,c,d,e,f,g,h){var m=h.bits,k,n,l,F,p,t,L,q,H,r,z,u,x,v=0,B,y=new A.Buf16(16);p=new A.Buf16(16);var C,D=0,hb,E,la;for(k=0;15>=k;k++)y[k]=0;for(n=0;n<d;n++)y[b[c+n]]++;F=m;for(l=15;1<=l&&0===y[l];l--);F>l&&(F=l);if(0===l)return e[f++]=20971520,e[f++]=20971520,h.bits=1,0;for(m=1;m<l&&0===y[m];m++);F<m&&(F=m);for(k=t=1;15>=k;k++)if(t<<=1,t-=y[k],0>t)return-1;if(0<t&&(0===a||1!==l))return-1;p[1]=0;for(k=1;15>
k;k++)p[k+1]=p[k]+y[k];for(n=0;n<d;n++)0!==b[c+n]&&(g[p[b[c+n]]++]=n);0===a?(x=C=g,B=19):1===a?(x=Ve,v-=257,C=We,D-=257,B=256):(x=Xe,C=Ye,B=-1);n=q=0;k=m;u=f;d=F;p=0;r=-1;L=1<<F;z=L-1;if(1===a&&852<L||2===a&&592<L)return 1;for(;;){hb=k-p;g[n]<B?(E=0,la=g[n]):g[n]>B?(E=C[D+g[n]],la=x[v+g[n]]):(E=96,la=0);t=1<<k-p;m=H=1<<d;do H-=t,e[u+(q>>p)+H]=hb<<24|E<<16|la|0;while(0!==H);for(t=1<<k-1;q&t;)t>>=1;0!==t?(q&=t-1,q+=t):q=0;n++;if(0===--y[k]){if(k===l)break;k=b[c+g[n]]}if(k>F&&(q&z)!==r){0===p&&(p=F);
u+=m;d=k-p;for(t=1<<d;d+p<l;){t-=y[d+p];if(0>=t)break;d++;t<<=1}L+=1<<d;if(1===a&&852<L||2===a&&592<L)return 1;r=q&z;e[r]=F<<24|d<<16|u-f|0}}0!==q&&(e[u+q]=k-p<<24|4194304);h.bits=F;return 0},de=!0,pc,qc,gb={inflateReset:nd,inflateReset2:od,inflateResetKeep:md,inflateInit:function(a){return pd(a,15)},inflateInit2:pd,inflate:function(a,b){var c,d,e,f,g,h,m,k,n,l,F,p,t,q,r,H,u,z,x=new A.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;
c=a.state;12===c.mode&&(c.mode=13);g=a.next_out;e=a.output;m=a.avail_out;f=a.next_in;d=a.input;h=a.avail_in;k=c.hold;n=c.bits;l=h;F=m;z=0;a:for(;;)switch(c.mode){case 1:if(0===c.wrap){c.mode=13;break}for(;16>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if(c.wrap&2&&35615===k){c.check=0;x[0]=k&255;x[1]=k>>>8&255;c.check=O(c.check,x,2,0);n=k=0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((k&255)<<8)+(k>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(k&15)){a.msg=
"unknown compression method";c.mode=30;break}k>>>=4;n-=4;t=(k&15)+8;if(0===c.wbits)c.wbits=t;else if(t>c.wbits){a.msg="invalid window size";c.mode=30;break}c.dmax=1<<t;a.adler=c.check=1;c.mode=k&512?10:12;n=k=0;break;case 2:for(;16>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.flags=k;if(8!==(c.flags&255)){a.msg="unknown compression method";c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=k>>8&1);c.flags&512&&(x[0]=k&255,x[1]=k>>>8&255,c.check=
O(c.check,x,2,0));n=k=0;c.mode=3;case 3:for(;32>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.head&&(c.head.time=k);c.flags&512&&(x[0]=k&255,x[1]=k>>>8&255,x[2]=k>>>16&255,x[3]=k>>>24&255,c.check=O(c.check,x,4,0));n=k=0;c.mode=4;case 4:for(;16>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.head&&(c.head.xflags=k&255,c.head.os=k>>8);c.flags&512&&(x[0]=k&255,x[1]=k>>>8&255,c.check=O(c.check,x,2,0));n=k=0;c.mode=5;case 5:if(c.flags&1024){for(;16>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.length=k;c.head&&
(c.head.extra_len=k);c.flags&512&&(x[0]=k&255,x[1]=k>>>8&255,c.check=O(c.check,x,2,0));n=k=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(c.flags&1024&&(p=c.length,p>h&&(p=h),p&&(c.head&&(t=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),A.arraySet(c.head.extra,d,f,p,t)),c.flags&512&&(c.check=O(c.check,d,p,f)),h-=p,f+=p,c.length-=p),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===h)break a;p=0;do t=d[f+p++],c.head&&t&&65536>c.length&&(c.head.name+=
String.fromCharCode(t));while(t&&p<h);c.flags&512&&(c.check=O(c.check,d,p,f));h-=p;f+=p;if(t)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.flags&4096){if(0===h)break a;p=0;do t=d[f+p++],c.head&&t&&65536>c.length&&(c.head.comment+=String.fromCharCode(t));while(t&&p<h);c.flags&512&&(c.check=O(c.check,d,p,f));h-=p;f+=p;if(t)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if(k!==(c.check&65535)){a.msg=
"header crc mismatch";c.mode=30;break}n=k=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=0;c.mode=12;break;case 10:for(;32>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}a.adler=c.check=ld(k);n=k=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=g,a.avail_out=m,a.next_in=f,a.avail_in=h,c.hold=k,c.bits=n,2;a.adler=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){k>>>=n&7;n-=n&7;c.mode=27;break}for(;3>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.last=k&1;
k>>>=1;--n;switch(k&3){case 0:c.mode=14;break;case 1:t=c;if(de){pc=new A.Buf32(512);qc=new A.Buf32(32);for(p=0;144>p;)t.lens[p++]=8;for(;256>p;)t.lens[p++]=9;for(;280>p;)t.lens[p++]=7;for(;288>p;)t.lens[p++]=8;vb(1,t.lens,0,288,pc,0,t.work,{bits:9});for(p=0;32>p;)t.lens[p++]=5;vb(2,t.lens,0,32,qc,0,t.work,{bits:5});de=!1}t.lencode=pc;t.lenbits=9;t.distcode=qc;t.distbits=5;c.mode=20;if(6===b){k>>>=2;n-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}k>>>=2;n-=2;break;
case 14:k>>>=n&7;for(n-=n&7;32>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if((k&65535)!==(k>>>16^65535)){a.msg="invalid stored block lengths";c.mode=30;break}c.length=k&65535;n=k=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(p=c.length){p>h&&(p=h);p>m&&(p=m);if(0===p)break a;A.arraySet(e,d,f,p,g);h-=p;f+=p;m-=p;g+=p;c.length-=p;break}c.mode=12;break;case 17:for(;14>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.nlen=(k&31)+257;k>>>=5;n-=5;c.ndist=(k&31)+1;k>>>=5;n-=5;c.ncode=(k&15)+4;k>>>=
4;n-=4;if(286<c.nlen||30<c.ndist){a.msg="too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=18;case 18:for(;c.have<c.ncode;){for(;3>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.lens[B[c.have++]]=k&7;k>>>=3;n-=3}for(;19>c.have;)c.lens[B[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;p={bits:c.lenbits};z=vb(0,c.lens,0,19,c.lencode,0,c.work,p);c.lenbits=p.bits;if(z){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){r=c.lencode[k&
(1<<c.lenbits)-1];p=r>>>24;r&=65535;if(p<=n)break;if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if(16>r)k>>>=p,n-=p,c.lens[c.have++]=r;else{if(16===r){for(t=p+2;n<t;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}k>>>=p;n-=p;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}t=c.lens[c.have-1];p=3+(k&3);k>>>=2;n-=2}else if(17===r){for(t=p+3;n<t;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}k>>>=p;n-=p;t=0;p=3+(k&7);k>>>=3;n-=3}else{for(t=p+7;n<t;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}k>>>=p;n-=p;t=0;
p=11+(k&127);k>>>=7;n-=7}if(c.have+p>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;p--;)c.lens[c.have++]=t}}if(30===c.mode)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;p={bits:c.lenbits};z=vb(1,c.lens,0,c.nlen,c.lencode,0,c.work,p);c.lenbits=p.bits;if(z){a.msg="invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;p={bits:c.distbits};z=vb(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,p);c.distbits=
p.bits;if(z){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=h&&258<=m){a.next_out=g;a.avail_out=m;a.next_in=f;a.avail_in=h;c.hold=k;c.bits=n;var v,y,C,D,G,hb,E,la,N,I,P=a;I=P.state;N=P.next_in;e=P.input;la=N+(P.avail_in-5);E=P.next_out;d=P.output;hb=E-(F-P.avail_out);G=E+(P.avail_out-257);D=I.dmax;r=I.wsize;u=I.whave;H=I.wnext;q=I.window;t=I.hold;p=I.bits;n=I.lencode;k=I.distcode;m=(1<<I.lenbits)-1;h=(1<<I.distbits)-1;b:do c:for(15>p&&(t+=
e[N++]<<p,p+=8,t+=e[N++]<<p,p+=8),v=n[t&m];;){g=v>>>24;t>>>=g;p-=g;g=v>>>16&255;if(0===g)d[E++]=v&65535;else if(g&16){f=v&65535;if(g&=15)p<g&&(t+=e[N++]<<p,p+=8),f+=t&(1<<g)-1,t>>>=g,p-=g;15>p&&(t+=e[N++]<<p,p+=8,t+=e[N++]<<p,p+=8);v=k[t&h];d:for(;;){g=v>>>24;t>>>=g;p-=g;g=v>>>16&255;if(g&16){C=v&65535;g&=15;p<g&&(t+=e[N++]<<p,p+=8,p<g&&(t+=e[N++]<<p,p+=8));C+=t&(1<<g)-1;if(C>D){P.msg="invalid distance too far back";I.mode=30;break b}t>>>=g;p-=g;g=E-hb;if(C>g){g=C-g;if(g>u&&I.sane){P.msg="invalid distance too far back";
I.mode=30;break b}y=0;v=q;if(0===H){if(y+=r-g,g<f){f-=g;do d[E++]=q[y++];while(--g);y=E-C;v=d}}else if(H<g){if(y+=r+H-g,g-=H,g<f){f-=g;do d[E++]=q[y++];while(--g);y=0;if(H<f){g=H;f-=g;do d[E++]=q[y++];while(--g);y=E-C;v=d}}}else if(y+=H-g,g<f){f-=g;do d[E++]=q[y++];while(--g);y=E-C;v=d}for(;2<f;)d[E++]=v[y++],d[E++]=v[y++],d[E++]=v[y++],f-=3;f&&(d[E++]=v[y++],1<f&&(d[E++]=v[y++]))}else{y=E-C;do d[E++]=d[y++],d[E++]=d[y++],d[E++]=d[y++],f-=3;while(2<f);f&&(d[E++]=d[y++],1<f&&(d[E++]=d[y++]))}}else if(0===
(g&64)){v=k[(v&65535)+(t&(1<<g)-1)];continue d}else{P.msg="invalid distance code";I.mode=30;break b}break}}else if(0===(g&64)){v=n[(v&65535)+(t&(1<<g)-1)];continue c}else{g&32?I.mode=12:(P.msg="invalid literal/length code",I.mode=30);break b}break}while(N<la&&E<G);f=p>>3;N-=f;p-=f<<3;P.next_in=N;P.next_out=E;P.avail_in=N<la?5+(la-N):5-(N-la);P.avail_out=E<G?257+(G-E):257-(E-G);I.hold=t&(1<<p)-1;I.bits=p;g=a.next_out;e=a.output;m=a.avail_out;f=a.next_in;d=a.input;h=a.avail_in;k=c.hold;n=c.bits;12===
c.mode&&(c.back=-1);break}for(c.back=0;;){r=c.lencode[k&(1<<c.lenbits)-1];p=r>>>24;t=r>>>16&255;r&=65535;if(p<=n)break;if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if(t&&0===(t&240)){q=p;H=t;for(u=r;;){r=c.lencode[u+((k&(1<<q+H)-1)>>q)];p=r>>>24;t=r>>>16&255;r&=65535;if(q+p<=n)break;if(0===h)break a;h--;k+=d[f++]<<n;n+=8}k>>>=q;n-=q;c.back+=q}k>>>=p;n-=p;c.back+=p;c.length=r;if(0===t){c.mode=26;break}if(t&32){c.back=-1;c.mode=12;break}if(t&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=
t&15;c.mode=22;case 22:if(c.extra){for(t=c.extra;n<t;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.length+=k&(1<<c.extra)-1;k>>>=c.extra;n-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){r=c.distcode[k&(1<<c.distbits)-1];p=r>>>24;t=r>>>16&255;r&=65535;if(p<=n)break;if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if(0===(t&240)){q=p;H=t;for(u=r;;){r=c.distcode[u+((k&(1<<q+H)-1)>>q)];p=r>>>24;t=r>>>16&255;r&=65535;if(q+p<=n)break;if(0===h)break a;h--;k+=d[f++]<<n;n+=8}k>>>=q;n-=q;c.back+=q}k>>>=
p;n-=p;c.back+=p;if(t&64){a.msg="invalid distance code";c.mode=30;break}c.offset=r;c.extra=t&15;c.mode=24;case 24:if(c.extra){for(t=c.extra;n<t;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}c.offset+=k&(1<<c.extra)-1;k>>>=c.extra;n-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===m)break a;p=F-m;if(c.offset>p){p=c.offset-p;if(p>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}p>c.wnext?(p-=c.wnext,t=c.wsize-
p):t=c.wnext-p;p>c.length&&(p=c.length);q=c.window}else q=e,t=g-c.offset,p=c.length;p>m&&(p=m);m-=p;c.length-=p;do e[g++]=q[t++];while(--p);0===c.length&&(c.mode=21);break;case 26:if(0===m)break a;e[g++]=c.length;m--;c.mode=21;break;case 27:if(c.wrap){for(;32>n;){if(0===h)break a;h--;k|=d[f++]<<n;n+=8}F-=m;a.total_out+=F;c.total+=F;F&&(a.adler=c.check=c.flags?O(c.check,e,F,g-F):eb(c.check,e,F,g-F));F=m;if((c.flags?k:ld(k))!==c.check){a.msg="incorrect data check";c.mode=30;break}n=k=0}c.mode=28;case 28:if(c.wrap&&
c.flags){for(;32>n;){if(0===h)break a;h--;k+=d[f++]<<n;n+=8}if(k!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}n=k=0}c.mode=29;case 29:z=1;break a;case 30:z=-3;break a;case 31:return-4;default:return-2}a.next_out=g;a.avail_out=m;a.next_in=f;a.avail_in=h;c.hold=k;c.bits=n;if((c.wsize||F!==a.avail_out&&30>c.mode&&(27>c.mode||4!==b))&&qd(a,a.output,a.next_out,F-a.avail_out))return c.mode=31,-4;l-=a.avail_in;F-=a.avail_out;a.total_in+=l;a.total_out+=F;c.total+=F;c.wrap&&F&&(a.adler=
c.check=c.flags?O(c.check,e,F,a.next_out-F):eb(c.check,e,F,a.next_out-F));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===l&&0===F||4===b)&&0===z&&(z=-5);return z},inflateEnd:function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0},inflateGetHeader:function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0},inflateSetDictionary:function(a,b){var c=b.length,d,e;if(!a||
!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=eb(1,b,c,0),e!==d.check))return-3;if(qd(a,b,c,c))return d.mode=31,-4;d.havedict=1;return 0},inflateInfo:"pako inflate (from Nodeca project)"},M={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,
Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},ze=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},ee=Object.prototype.toString;La.prototype.push=function(a,b){var c=this.strm,d=this.options.chunkSize,e=this.options.dictionary,f,g,h,m=!1;if(this.ended)return!1;b=b===~~b?b:!0===b?M.Z_FINISH:M.Z_NO_FLUSH;"string"===typeof a?c.input=Ka.binstring2buf(a):"[object ArrayBuffer]"===
ee.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;c.avail_in=c.input.length;do{0===c.avail_out&&(c.output=new A.Buf8(d),c.next_out=0,c.avail_out=d);a=gb.inflate(c,M.Z_NO_FLUSH);a===M.Z_NEED_DICT&&e&&(a="string"===typeof e?Ka.string2buf(e):"[object ArrayBuffer]"===ee.call(e)?new Uint8Array(e):e,a=gb.inflateSetDictionary(this.strm,a));a===M.Z_BUF_ERROR&&!0===m&&(a=M.Z_OK,m=!1);if(a!==M.Z_STREAM_END&&a!==M.Z_OK)return this.onEnd(a),this.ended=!0,!1;if(c.next_out&&(0===c.avail_out||a===M.Z_STREAM_END||
0===c.avail_in&&(b===M.Z_FINISH||b===M.Z_SYNC_FLUSH)))if("string"===this.options.to)f=Ka.utf8border(c.output,c.next_out),g=c.next_out-f,h=Ka.buf2string(c.output,f),c.next_out=g,c.avail_out=d-g,g&&A.arraySet(c.output,c.output,f,g,0),this.onData(h);else this.onData(A.shrinkBuf(c.output,c.next_out));0===c.avail_in&&0===c.avail_out&&(m=!0)}while((0<c.avail_in||0===c.avail_out)&&a!==M.Z_STREAM_END);a===M.Z_STREAM_END&&(b=M.Z_FINISH);if(b===M.Z_FINISH)return a=gb.inflateEnd(this.strm),this.onEnd(a),this.ended=
!0,a===M.Z_OK;b===M.Z_SYNC_FLUSH&&(this.onEnd(M.Z_OK),c.avail_out=0);return!0};La.prototype.onData=function(a){this.chunks.push(a)};La.prototype.onEnd=function(a){a===M.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):A.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var fe={Inflate:La,inflate:cc,inflateRaw:function(a,b){b=b||{};b.raw=!0;return cc(a,b)},ungzip:cc},Ze=A.assign,Na={};Ze(Na,Ue,fe,M);var wb=function(){var a;a=x.call(this)||this;a._outputCounter=
0;a.setMetadata("filenames",{});a.setMetadata("checksums",{});return a};$jscomp.inherits(wb,x);wb.prototype._run=function(){var a=this;this._outputCounter=0;this.getInputCategories().forEach(function(b){a._loadFile(b)})};wb.prototype._loadFile=function(a){var b=this,c=new FileReader;c.onloadend=function(c){c=c.target.result;var d=b._getInput(a).name.split(/[\\/]/).pop(),f=d.split(".").pop(),g=Yd(c);b._metadata.filenames[a]=d;b._metadata.checksums[a]=g;if(f.localeCompare("pixp"))try{c=Na.inflate(c).buffer,
console.log("File was un-gziped successfully")}catch(h){console.log("Pako: "+h+" (this content is not gziped)")}b._output[a]=c;b._fileLoadCount()};c.onerror=function(){this._output[a]=null;b._fileLoadCount();console.warn("error reading file from category "+a)};c.readAsArrayBuffer(this._getInput(a))};wb.prototype._fileLoadCount=function(){this._outputCounter++;this._outputCounter==this.getNumberOfInputs()&&this.triggerEvent("ready")};var Nb=function(){var a;a=x.call(this)||this;a._outputCounter=0;
a.setMetadata("filenames",{});a.setMetadata("checksums",{});return a};$jscomp.inherits(Nb,x);Nb.prototype._run=function(){var a=this;this.getNumberOfInputs()?this._forEachInput(function(b,c){a._loadUrl(b,c)}):console.warn("No input was specified, cannot run this filer.")};Nb.prototype._loadUrl=function(a,b){var c=this,d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onload=function(e){e=d.response;var f=b.split(/[\\/]/).pop(),g=f.split(".").pop(),h=Yd(e);c._metadata.filenames[a]=
f;c._metadata.checksums[a]=h;if(g.localeCompare("pixp"))try{e=Na.inflate(e).buffer,console.log("File was un-gziped successfully")}catch(m){console.log("Pako: "+m+" (this content is not gziped)")}c._output[a]=e;c._outputCounter++;c._outputCounter==c.getNumberOfInputs()&&c.triggerEvent("ready")};d.error=function(){console.log("here go the error")};d.send()};var r=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);a._type_enum={INT8:1,UINT8:2,INT16:3,UINT16:4,
INT32:5,UINT32:6,FLT:7,DBL:8,STR:9};a._type_matching="int8 uint8 int16 uint16 int32 uint32 float32 float64 undef".split(" ");a.type_sizes=[0,1,1,2,2,4,4,4,8,0];a._dv_offset=0;a._align=8;a._little_endian=!0;a._continuation_queue=[];a._dv=null;a._superblk={};a._start_offset=0;a._huge_id=0;return a};$jscomp.inherits(r,x);r.prototype.createLink=function(){return{hdr_offset:0,data_offset:0,data_length:0,n_filled:0,chunk_size:0,sym_btree:0,sym_lheap:0,name:"",attributes:{},children:[],array:void 0,type:-1,
inflate:!1,dims:[]}};r.prototype.startAlignment=function(){this._start_offset=this._dv_offset};r.prototype.checkAlignment=function(){var a=this._dv_offset-this._start_offset;if(0!==a%this._align){var b=this._align-a%this._align;this._dv_offset+=b;this.getMetadata("debug")&&console.log("skipping "+b+" bytes at "+a+" for alignmnent")}};r.prototype.skip=function(a){this._dv_offset+=a};r.prototype.seek=function(a){this._dv_offset=a};r.prototype.tell=function(){return this._dv_offset};r.prototype.getU8=
function(){var a=this._dv.getUint8(this._dv_offset);this._dv_offset+=1;return a};r.prototype.getU16=function(){var a=this._dv.getUint16(this._dv_offset,this._little_endian);this._dv_offset+=2;return a};r.prototype.getU32=function(){var a=this._dv.getUint32(this._dv_offset,this._little_endian);this._dv_offset+=4;return a};r.prototype.getU64=function(){var a=this._dv.getUint64(this._dv_offset,this._little_endian);this._dv_offset+=8;return a};r.prototype.getF32=function(){var a=this._dv.getFloat32(this._dv_offset,
this._little_endian);this._dv_offset+=4;return a};r.prototype.getF64=function(){var a=this._dv.getFloat64(this._dv_offset,this._little_endian);this._dv_offset+=8;return a};r.prototype.getOffset=function(a){var b;a=a||this._superblk.offsz;if(4===a)b=this._dv.getUint32(this._dv_offset,this._little_endian);else if(8===a)b=this._dv.getUint64(this._dv_offset,this._little_endian);else throw Error("Unsupported value for offset size "+a);this._dv_offset+=a;return b};r.prototype.getLength=function(){var a=
this._dv.getUint64(this._dv_offset,this._little_endian);this._dv_offset+=this._superblk.lensz;return a};r.prototype.getString=function(a){var b="",c,d;for(c=0;c<a;c+=1){d=this.getU8();if(0===d){this._dv_offset+=a-c-1;break}b+=String.fromCharCode(d)}return b};r.prototype.getArray=function(a,b,c){var d=this._getInput(),e=this._dv_offset;c&&(this._dv_offset=c);switch(a){case this._type_enum.INT8:a=new Int8Array(d,this._dv_offset,b);break;case this._type_enum.UINT8:a=new Uint8Array(d,this._dv_offset,
b);break;case this._type_enum.INT16:if(0!==this._dv_offset%2)for(a=new ArrayBuffer(b),b/=2,a=new Int16Array(a),d=0;d<b;d+=1)a[d]=this.getU16();else a=new Int16Array(d,this._dv_offset,b/2),this._dv_offset+=b;break;case this._type_enum.UINT16:if(0!==this._dv_offset%2)for(a=new ArrayBuffer(b),b/=2,a=new Uint16Array(a),d=0;d<b;d+=1)a[d]=this.getU16();else a=new Uint16Array(d,this._dv_offset,b/2),this._dv_offset+=b;break;case this._type_enum.INT32:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,
a=new Int32Array(a),d=0;d<b;d+=1)a[d]=this.getU32();else a=new Int32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.UINT32:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,a=new Uint32Array(a),d=0;d<b;d+=1)a[d]=this.getU32();else a=new Uint32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.FLT:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,a=new Float32Array(a),d=0;d<b;d+=1)a[d]=this.getF32();else a=new Float32Array(d,this._dv_offset,
b/4),this._dv_offset+=b;break;case this._type_enum.DBL:if(0!==this._dv_offset%8)for(a=new ArrayBuffer(b),b/=8,a=new Float64Array(a),d=0;d<b;d+=1)a[d]=this.getF64();else a=new Float64Array(d,this._dv_offset,b/8),this._dv_offset+=b;break;default:throw Error("Bad type in this.getArray "+a);}c&&(this._dv_offset=e);return a};r.prototype.getUXX=function(a){var b,c;switch(a){case 1:b=this._dv.getUint8(this._dv_offset);break;case 2:b=this._dv.getUint16(this._dv_offset,this._little_endian);break;case 4:b=
this._dv.getUint32(this._dv_offset,this._little_endian);break;case 8:b=this._dv.getUint64(this._dv_offset,this._little_endian);break;default:if(b=0,this._little_endian)for(c=a-1;0<=c;c--)b=(b<<8)+this._dv.getUint8(this._dv_offset+c);else for(c=0;c<a;c++)b=(b<<8)+this._dv.getUint8(this._dv_offset+c)}this._dv_offset+=a;return b};r.prototype.checkSignature=function(a){var b;for(b=0;b<a.length;b+=1)if(this._dv.getUint8(this._dv_offset+b)!==a.charCodeAt(b))return!1;this.skip(a.length);return!0};r.prototype.hdf5Superblock=
function(){var a={};if(!this.checkSignature("\u0089HDF\r\n\u001a\n"))throw Error("Bad magic string in HDF5");a.sbver=this.getU8();if(2<a.sbver)throw Error("Unsupported HDF5 superblock version "+a.sbver);1>=a.sbver?(a.fsver=this.getU8(),a.rgver=this.getU8(),this.skip(1),a.shver=this.getU8(),a.offsz=this.getU8(),a.lensz=this.getU8(),this.skip(1),a.gln_k=this.getU16(),a.gin_k=this.getU16(),a.cflags=this.getU32(),1===a.sbver&&(a.isin_k=this.getU16(),this.skip(2)),a.base_addr=this.getOffset(a.offsz),a.gfsi_addr=
this.getOffset(a.offsz),a.eof_addr=this.getOffset(a.offsz),a.dib_addr=this.getOffset(a.offsz),a.root_ln_offs=this.getOffset(a.offsz),a.root_addr=this.getOffset(a.offsz),a.root_cache_type=this.getU32(),this.skip(4),this.skip(16)):(a.offsz=this.getU8(),a.lensz=this.getU8(),a.cflags=this.getU8(),a.base_addr=this.getOffset(a.offsz),a.ext_addr=this.getOffset(a.offsz),a.eof_addr=this.getOffset(a.offsz),a.root_addr=this.getOffset(a.offsz),a.checksum=this.getU32());this.getMetadata("debug")&&console.log("HDF5 SB "+
a.sbver+" "+a.offsz+" "+a.lensz+" "+a.cflags);return a};r.prototype.hdf5FractalHeapHeader=function(){var a={};if(!this.checkSignature("FRHP"))throw Error("Bad or missing FRHP signature");a.ver=this.getU8();a.idlen=this.getU16();a.iof_el=this.getU16();a.flags=this.getU8();a.objmax=this.getU32();a.objnid=this.getLength();a.objbta=this.getOffset();a.nf_blk=this.getLength();a.af_blk=this.getOffset();a.heap_total=this.getLength();a.heap_alloc=this.getLength();a.bai_offset=this.getLength();a.heap_nobj=
this.getLength();a.heap_chuge=this.getLength();a.heap_nhuge=this.getLength();a.heap_ctiny=this.getLength();a.heap_ntiny=this.getLength();a.table_width=this.getU16();a.start_blksz=this.getLength();a.max_blksz=this.getLength();a.max_heapsz=this.getU16();a.rib_srows=this.getU16();a.root_addr=this.getOffset();a.rib_crows=this.getU16();var b=Math.log2(a.max_blksz)-Math.log2(a.start_blksz)+2;a.K=Math.min(a.rib_crows,b)*a.table_width;a.N=a.rib_crows<b?0:a.K-b*a.table_width;this.getMetadata("debug")&&(console.log("FRHP V"+
a.ver+" F"+a.flags+" "+a.objbta+" Total:"+a.heap_total+" Alloc:"+a.heap_alloc+" #obj:"+a.heap_nobj+" width:"+a.table_width+" start_blksz:"+a.start_blksz+" max_blksz:"+a.max_blksz+" "+a.max_heapsz+" srows:"+a.rib_srows+" crows:"+a.rib_crows+" "+a.heap_nhuge),console.log("   K: "+a.K+" N: "+a.N));if(0<a.iof_el)throw Error("Filters present in fractal heap.");return a};r.prototype.hdf5V2BtreeHeader=function(){var a={};if(!this.checkSignature("BTHD"))throw Error("Bad or missing BTHD signature");a.ver=
this.getU8();a.type=this.getU8();a.nodesz=this.getU32();a.recsz=this.getU16();a.depth=this.getU16();a.splitp=this.getU8();a.mergep=this.getU8();a.root_addr=this.getOffset();a.root_nrec=this.getU16();a.total_nrec=this.getLength();a.checksum=this.getU32();this.getMetadata("debug")&&console.log("BTHD V"+a.ver+" T"+a.type+" "+a.nodesz+" "+a.recsz+" "+a.depth+" "+a.root_addr+" "+a.root_nrec+" "+a.total_nrec);return a};r.prototype.hdf5V2BtreeRecords=function(a,b,c,d){var e,f,g;if(1===b)for(b=0;b<c;b++)f=
this.getOffset(),g=this.getLength(),a=this.getLength(),this.getMetadata("debug")&&console.log("  -> "+f+" "+g+" "+a+" "+this._this._huge_id),e=this.tell(),a===this._this._huge_id&&(this.seek(f),this.hdf5MsgAttribute(g,d)),this.seek(e);else if(8===b){var h,m;h=a.max_heapsz/8;b=Math.min(a.objmax,a.max_blksz);m=256>=b?1:65536>=b?2:4;for(b=0;b<c;b++){e=this.getU8();if(0!==(e&192))throw Error("Bad Fractal Heap ID version "+e);var k=e&48,n;if(16===k)this._this._huge_id=this.getUXX(7);else if(0===k)f=this.getUXX(h),
g=this.getUXX(m);else throw Error("Can't handle this Heap ID: "+e);n=this.getU8();this.getU32();this.getU32();this.getMetadata("debug")&&console.log("  -> "+e+" "+f+" "+g+" "+n);e=this.tell();if(16===k)if(this.seek(a.objbta),k=this.hdf5V2BtreeHeader(),1===k.type)this.seek(k.root_addr),this.hdf5V2BtreeLeafNode(a,k.root_nrec,d);else throw Error("Can only handle type-1 btrees");else k=this.hdf5FractalHeapOffset(a,f),this.seek(k),this.hdf5MsgAttribute(g,d);this.seek(e)}}else throw Error("Unhandled V2 btree type.");
};r.prototype.hdf5V2BtreeLeafNode=function(a,b,c){if(!this.checkSignature("BTLF"))throw Error("Bad or missing BTLF signature");var d=this.getU8(),e=this.getU8();this.getMetadata("debug")&&console.log("BTLF V"+d+" T"+e+" "+this.tell());this.hdf5V2BtreeRecords(a,e,b,c)};r.prototype.hdf5V2BtreeInternalNode=function(a,b,c,d){if(!this.checkSignature("BTIN"))throw Error("Bad or missing BTIN signature");var e=this.getU8(),f=this.getU8();this.getMetadata("debug")&&console.log("BTIN V"+e+" T"+f);this.hdf5V2BtreeRecords(a,
f,b,d);for(a=0;a<=b;a++){d=this.getOffset();var e=this.getUXX(1),g;1<c&&(g=this.getUXX(1));this.getMetadata("debug")&&console.log(" child->"+d+" "+e+" "+g)}};r.prototype.hdf5GetMsgName=function(a){var b="NIL;Dataspace;LinkInfo;Datatype;FillValue 1;FillValue 2;Link;ExternalFiles;Layout;BOGUS;GroupInfo;FilterPipeline;Attribute;ObjectComment;ObjectModTime 1;SharedMsgTable;ObjHdrContinue;SymbolTable;ObjectModTime 2;BtreeKValue;DriverInfo;AttrInfo;ObjectRefCnt;MESSAGE23;FileSpaceInfo".split(";");if(a<
b.length)return b[a];throw Error("Unknown message type "+a+" "+this.tell());};r.prototype.hdf5V1BtreeNode=function(a){var b=this._getInput(),c,d={};if(!this.checkSignature("TREE"))throw Error("Bad TREE signature at "+this.tell());d.keys=[];d.node_type=this.getU8();d.node_level=this.getU8();d.entries_used=this.getU16();d.left_sibling=this.getOffset();d.right_sibling=this.getOffset();this.getMetadata("debug")&&console.log("BTREE type "+d.node_type+" lvl "+d.node_level+" n_used "+d.entries_used+" "+
d.left_sibling+" "+d.right_sibling);if(a){var e,f=[];for(c=0;c<d.entries_used;c+=1){d.keys[c]={};f[c]={};f[c].chunk_size=this.getU32();f[c].filter_mask=this.getU32();f[c].chunk_offsets=[];for(e=0;e<a.dims.length+1;e+=1)f[c].chunk_offsets.push(this.getU64());d.keys[c].child_address=this.getOffset();c<d.entries_used&&this.getMetadata("debug")&&console.log("  BTREE "+c+" chunk_size "+f[c].chunk_size+" filter_mask "+f[c].filter_mask+" addr "+d.keys[c].child_address)}f[c]={};f[c].chunk_size=this.getU32();
f[c].filter_mask=this.getU32();f[c].chunk_offsets=[];for(e=0;e<a.dims.length+1;e+=1)f[c].chunk_offsets.push(this.getU64());if(0===d.node_level){var g;for(c=0;c<d.entries_used;c+=1)if(e=f[c].chunk_size,g=d.keys[c].child_address,a.inflate){e=new Uint8Array(b,g,e);g=Na.inflate(e);switch(a.type){case this._type_enum.INT8:g=new Int8Array(g.buffer);break;case this._type_enum.UINT8:g=new Uint8Array(g.buffer);break;case this._type_enum.INT16:g=new Int16Array(g.buffer);break;case this._type_enum.UINT16:g=
new Uint16Array(g.buffer);break;case this._type_enum.INT32:g=new Int32Array(g.buffer);break;case this._type_enum.UINT32:g=new Uint32Array(g.buffer);break;case this._type_enum.FLT:g=new Float32Array(g.buffer);break;case this._type_enum.DBL:g=new Float64Array(g.buffer);break;default:throw Error("Unknown type code "+a.type);}a.array.length-a.n_filled<g.length&&(g=g.subarray(0,a.array.length-a.n_filled));a.array.set(g,a.n_filled);a.n_filled+=g.length;this.getMetadata("debug")&&console.log(a.name+" "+
e.length+" "+g.length+" "+a.n_filled+"/"+a.array.length)}else g=this.getArray(a.type,e,g),a.array.set(g,a.n_filled),a.n_filled+=g.length}else for(c=0;c<d.entries_used;c+=1)this.seek(d.keys[c].child_address),this.hdf5V1BtreeNode(a)}else for(c=0;c<d.entries_used;c+=1)d.keys[c]={},d.keys[c].key_value=this.getLength(),d.keys[c].child_address=this.getOffset(),this.getMetadata("debug")&&console.log("  BTREE "+c+" key "+d.keys[c].key_value+" adr "+d.keys[c].child_address);return d};r.prototype.hdf5GroupSymbolTable=
function(a,b){if(!this.checkSignature("SNOD"))throw Error("Bad or missing SNOD signature");var c=this.getU8();this.skip(1);var d=this.getU16();this.getMetadata("debug")&&console.log("this.hdf5GroupSymbolTable V"+c+" #"+d+" '"+b.name+"'");for(var e,f,g,h,m,c=0;c<2*this._superblk.gln_k;c+=1)e=this.getOffset(),f=this.getOffset(),g=this.getU32(),this.skip(20),c<d&&(h=this.createLink(),h.hdr_offset=f,a&&(m=this.tell(),this.seek(a.lh_dseg_off+e),h.name=this.getString(a.lh_dseg_len),this.seek(m)),this.getMetadata("debug")&&
console.log("    "+c+" O "+e+" A "+f+" T "+g+" '"+h.name+"'"),b.children.push(h))};r.prototype.hdf5LocalHeap=function(){var a={};if(!this.checkSignature("HEAP"))throw Error("Bad or missing HEAP signature");a.lh_ver=this.getU8();this.skip(3);a.lh_dseg_len=this.getLength();a.lh_flst_len=this.getLength();a.lh_dseg_off=this.getOffset();this.getMetadata("debug")&&console.log("LHEAP V"+a.lh_ver+" "+a.lh_dseg_len+" "+a.lh_flst_len+" "+a.lh_dseg_off);return a};r.prototype.hdf5MsgDataspace=function(a,b){var c,
d=this.getU8(),e=this.getU8(),f=this.getU8();1>=d?this.skip(5):this.skip(1);var g=1,h=[],m;for(m=0;m<e;m+=1)h[m]=this.getLength(),g*=h[m];c=e*this._superblk.lensz+(1>=d?8:4);if(0!==(f&1))for(c+=e*this._superblk.lensz,m=0;m<e;m+=1)this.getLength();if(0!==(f&2))for(c+=e*this._superblk.lensz,m=0;m<e;m+=1)this.getLength();d="this.hdf5MsgDataspace V"+d+" N"+e+" F"+f;this.getMetadata("debug")&&(0!==e&&(d+="["+h.join(", ")+"]"),console.log(d));c<a&&this.skip(a-c);b&&(b.dims=h);return g};r.prototype.hdf5MsgLinkInfo=
function(a){var b=this,c=this.getU8(),d=this.getU8();0!==(d&1)&&this.getU64();var e=this.getOffset(),f=this.getOffset();0!==(d&2)&&this.getOffset();this.getMetadata("debug")&&console.log("this.hdf5MsgLinkInfo V"+c+" F"+d+" FH "+e+" BT "+f);c=this.tell();if(e<this._superblk.eof_addr){this.seek(e);var g=this.hdf5FractalHeapHeader(),h=0;this.hdf5FractalHeapEnumerate(g,function(c,d,e,f){for(c=d+f;h<g.heap_nobj&&b.tell()<c;)b.hdf5MsgLink(a),h+=1;return!0})}this.seek(c)};r.prototype.dt_class_name=function(a){var b=
"Fixed-Point Floating-Point Time String BitField Opaque Compound Reference Enumerated Variable-Length Array".split(" ");if(a<b.length)return b[a];throw Error("Unknown datatype class: "+a);};r.prototype.hdf5MsgDatatype=function(a){var b={},c=8,d,e,f,g,h,m,k,n,l=this.getU8();d=l>>4;e=l&15;g=[];for(l=0;3>l;l+=1)g[l]=this.getU8();l=this.getU32();this.getMetadata("debug")&&console.log("this.hdf5MsgDatatype V"+d+" C"+e+" "+this.dt_class_name(e)+" "+g[0]+"."+g[1]+"."+g[2]+" "+l);switch(e){case 0:e=this.getU16();
f=this.getU16();switch(l){case 4:b.typ_type=g[0]&8?this._type_enum.INT32:this._type_enum.UINT32;break;case 2:b.typ_type=g[0]&8?this._type_enum.INT16:this._type_enum.UINT16;break;case 1:b.typ_type=g[0]&8?this._type_enum.INT8:this._type_enum.UINT8;break;default:throw Error("Unknown type size "+l);}b.typ_length=l;c+=4;this.getMetadata("debug")&&console.log("  ("+e+" "+f+")");break;case 1:d="";if(this.getMetadata("debug"))switch(g[0]&65){case 0:d+="LE ";break;case 1:d+="BE ";break;case 65:d+="VX ";break;
default:throw Error("Reserved fp byte order: "+g[0]);}e=this.getU16();f=this.getU16();g=this.getU8();h=this.getU8();m=this.getU8();k=this.getU8();n=this.getU32();this.getMetadata("debug")&&(d+=e+" "+f+" "+g+" "+h+" "+m+" "+k+" "+n);if(64===f&&0===e&&52===g&&11===h&&0===m&&52===k&&1023===n&&8===l)b.typ_type=this._type_enum.DBL;else if(32===f&&0===e&&23===g&&8===h&&0===m&&23===k&&127===n&&4===l)b.typ_type=this._type_enum.FLT;else throw Error("Unsupported floating-point type");this.getMetadata("debug")&&
console.log(d);b.typ_length=l;c+=12;break;case 3:b.typ_type=this._type_enum.STR;b.typ_length=l;break;default:throw Error("Unimplemented HDF5 data class "+e);}a>c&&this.skip(a-c);return b};r.prototype.hdf5MsgLayout=function(a){var b="",c=this.getU8(),d,e,f,g=[];f=1;if(1===c||2===c){e=this.getU8();d=this.getU8();this.skip(5);this.getMetadata("debug")&&(b+="this.hdf5MsgLayout V"+c+" N"+e+" C"+d);if(1===d||2===d)c=this.getOffset(),this.getMetadata("debug")&&(b+=" A"+c),a.data_offset=c;for(c=0;c<e;c+=
1)g[c]=this.getU32(),f*=g[c];this.getMetadata("debug")&&(b+="["+g.join(", ")+"]");2===d&&(e=this.getU32(),a.chunk_size=f*e,this.getMetadata("debug")&&(b+=" E"+e));0===d?(f=this.getU32(),this.getMetadata("debug")&&(b+="("+f+")"),a.data_offset=this.tell(),a.data_length=f):1===d&&(a.data_length=f)}else if(3===c)if(d=this.getU8(),b="this.hdf5MsgLayout V"+c+" C"+d,0===d)f=this.getU16(),this.getMetadata("debug")&&(b+="("+f+")"),a.data_offset=this.tell(),a.data_length=f;else if(1===d)d=this.getOffset(),
f=this.getLength(),this.getMetadata("debug")&&(b+="("+d+", "+f+")"),a.data_offset=d,a.data_length=f;else{if(2===d){e=this.getU8();d=this.getOffset();a.data_offset=d;a.chunk_size=1;for(c=0;c<e-1;c+=1)g[c]=this.getU32(),f*=g[c];this.getMetadata("debug")&&(b+="(N"+e+", A"+d+" ["+g.join(",")+"]");e=this.getU32();a.chunk_size=f*e;this.getMetadata("debug")&&(b+=" E"+e)}}else throw Error("Illegal layout version "+c);this.getMetadata("debug")&&console.log(b)};r.prototype.hdf5MsgPipeline=function(a){var b=
this.getU8(),c=this.getU8(),d="this.hdf5MsgPipeline V"+b+" N"+c;1===b&&this.skip(6);this.getMetadata("debug")&&console.log(d);for(var e,f,g,h,d=0;d<c;d+=1){e=this.getU16();if(1!==e)throw Error("Unimplemented HDF5 filter "+e);if("object"!==typeof Na)throw Error("Need pako to inflate data.");a.inflate=!0;f=1===b||256<e?this.getU16():0;g=this.getU16();h=this.getU16();0!==(h&1)&&(h+=1);0!==f&&this.skip(f);this.skip(4*h);this.getMetadata("debug")&&console.log("  "+d+" ID"+e+" F"+g+" "+h)}};r.prototype.hdf5MsgAttribute=
function(a,b){var c=this.getU8(),d=this.getU8(),e=this.getU16(),f=this.getU16(),g=this.getU16(),h="this.hdf5MsgAttribute V"+c+" F"+d+" "+a+": ";if(0!==(d&3))throw Error("Shared dataspaces and datatypes are not supported.");3===c&&(d=this.getU8(),this.getMetadata("debug")&&(h+=0===d?"ASCII":"UTF-8"));this.getMetadata("debug")&&(h+="("+e+" "+f+" "+g+")");3>c&&(e=8*Math.floor((e+7)/8),f=8*Math.floor((f+7)/8),g=8*Math.floor((g+7)/8),this.getMetadata("debug")&&(h+="/("+e+" "+f+" "+g+")"));d=this.getString(e);
this.getMetadata("debug")&&console.log(h+(" Name: "+d));var h=this.hdf5MsgDatatype(f),m=this.hdf5MsgDataspace(g);a=0<a?3>c?a-(8+e+f+g):a-(9+e+f+g):h.typ_length*m;this.getMetadata("debug")&&console.log("  attribute data size "+a+" "+this.tell());a=h.typ_type===this._type_enum.STR?this.getString(a):this.getArray(h.typ_type,a);b.attributes[d]=a};r.prototype.hdf5MsgGroupInfo=function(){var a=4,b=8,c=this.getU8(),d=this.getU8();0!==(d&1)&&(this.getU16(),this.getU16());0!==(d&2)&&(a=this.getU16(),b=this.getU16());
this.getMetadata("debug")&&console.log("this.hdf5MsgGroupInfo V"+c+" F"+d+" ENT "+a+" LNL "+b)};r.prototype.hdf5MsgLink=function(a){var b=this.getU8(),c=0;if(1!==b)throw Error("Bad link message version "+b);var d=this.getU8();0!==(d&8)&&(c=this.getU8());0!==(d&4)&&this.getU64();0!==(d&16)&&this.getU8();var e=this.getUXX(1<<(d&3)),f=this.createLink();f.name=this.getString(e);0===(d&8)&&(f.hdr_offset=this.getOffset());this.getMetadata("debug")&&console.log("this.hdf5MsgLink V"+b+" F"+d+" T"+c+" NM "+
f.name+" OF "+f.hdr_offset);a.children.push(f)};r.prototype.hdf5FractalHeapDirectBlock=function(a,b,c,d){if(!this.checkSignature("FHDB"))throw Error("Bad or missing FHDB signature");var e=this.getU8();if(0!==e)throw Error("Bad FHDB version: "+e);this.getOffset();var f=this.getUXX(Math.ceil(a.max_heapsz/8));0!==(a.flags&2)&&this.getU32();this.getMetadata("debug")&&console.log("FHDB V:"+e+" R:"+b+" O:"+f+" A:"+c);a=1>=b?a.start_blksz:Math.pow(2,b-1)*a.start_blksz;return d?d(b,c,f,a):!0};r.prototype.hdf5FractalHeapIndirectBlock=
function(a,b){if(!this.checkSignature("FHIB"))throw Error("Bad or missing FHIB signature");var c=this.getU8();if(0!==c)throw Error("Bad FHIB version: "+c);this.getOffset();var d=this.getUXX(Math.ceil(a.max_heapsz/8));this.getMetadata("debug")&&console.log("FHIB V:"+c+" O:"+d);for(var e=[],c=0;c<a.K;c+=1)d=this.getOffset(),d<this._superblk.eof_addr&&(this.getMetadata("debug")&&console.log("direct block at "+d),e.push(d));for(var f=[],c=0;c<a.N;c+=1)d=this.getOffset(),d<this._superblk.eof_addr&&(this.getMetadata("debug")&&
console.log("indirect block at "+d),f.push(d));this.getU32();for(c=0;c<e.length;c++)if(this.seek(e[c]),!this.hdf5FractalHeapDirectBlock(a,c/a.table_width,e[c],b))return!1;for(c=0;c<f.length;c++)if(this.seek(f[c]),!this.hdf5FractalHeapIndirectBlock(a,b))return!1;return!0};r.prototype.hdf5FractalHeapEnumerate=function(a,b){this.seek(a.root_addr);0===a.K?this.hdf5FractalHeapDirectBlock(a,0,a.root_addr,b):this.hdf5FractalHeapIndirectBlock(a,b)};r.prototype.hdf5FractalHeapOffset=function(a,b){var c;this.hdf5FractalHeapEnumerate(a,
function(a,e,f,g){return b>=f&&b<f+g?(c=e+(b-f),!1):!0});return c};r.prototype.hdf5MsgAttrInfo=function(a){var b=this.getU8();if(0!==b)throw Error("Bad attribute information message version: "+b);var c=this.getU8();0!==(c&1)&&this.getU16();var d=this.getOffset(),e=this.getOffset();0!==(c&2)&&this.getOffset();this.getMetadata("debug")&&console.log("this.hdf5MsgAttrInfo V"+b+" F"+c+" HP "+d+" AN "+e);var b=this.tell(),f;d<this._superblk.eof_addr&&(this.seek(d),f=this.hdf5FractalHeapHeader());if(e<this._superblk.eof_addr){this.seek(e);
d=this.hdf5V2BtreeHeader();if(8!==d.type)throw Error("Can only handle indexed attributes.");this.seek(d.root_addr);0<d.depth?this.hdf5V2BtreeInternalNode(f,d.root_nrec,d.depth,a):this.hdf5V2BtreeLeafNode(f,d.root_nrec,a)}this.seek(b)};r.prototype.hdf5ProcessMessage=function(a,b){var c={};switch(a.hm_type){case 1:this.hdf5MsgDataspace(a.hm_size,b);break;case 2:this.hdf5MsgLinkInfo(b);break;case 3:a=this.hdf5MsgDatatype(a.hm_size);b&&(b.type=a.typ_type);break;case 6:this.hdf5MsgLink(b);break;case 8:this.hdf5MsgLayout(b);
break;case 10:this.hdf5MsgGroupInfo();break;case 11:this.hdf5MsgPipeline(b);break;case 12:this.hdf5MsgAttribute(a.hm_size,b);break;case 16:c.cq_off=this.getOffset();c.cq_len=this.getLength();this._continuation_queue.push(c);this.getMetadata("debug")&&console.log("hdf5MsgObjHdrContinue "+c.cq_off+" "+c.cq_len);break;case 17:b.sym_btree=this.getOffset();b.sym_lheap=this.getOffset();this.getMetadata("debug")&&console.log("hdf5MsgSymbolTable "+b.sym_btree+" "+b.sym_lheap);break;case 21:this.hdf5MsgAttrInfo(b);
break;case 0:case 4:case 5:case 7:case 18:case 19:case 20:case 22:case 24:this.skip(a.hm_size);break;default:throw Error("Unknown message type: "+a.hm_type);}};r.prototype.hdf5V2ObjectHeader=function(a){if(!this.checkSignature("OHDR"))throw Error("Bad or missing OHDR signature");var b=this.getU8(),c=this.getU8();0!==(c&32)&&(this.getU32(),this.getU32(),this.getU32(),this.getU32());0!==(c&16)&&(this.getU16(),this.getU16());var d=this.getUXX(1<<(c&3)),e=0,f=0,g=d;for(this.getMetadata("debug")&&console.log("this.hdf5V2ObjectHeader V"+
b+" F"+c+" HS"+d);;){for(;8<=g-f;)b={},b.hm_type=this.getU8(),b.hm_size=this.getU16(),b.hm_flags=this.getU8(),this.getMetadata("debug")&&console.log("  msg"+e+" F"+b.hm_flags+" T "+b.hm_type+" S "+b.hm_size+" ("+f+"/"+g+") "+this.hdf5GetMsgName(b.hm_type)),0!==(c&4)&&(b.hm_corder=this.getU16()),d=this.tell(),this.hdf5ProcessMessage(b,a),this.seek(d+b.hm_size),f+=b.hm_size+4,e+=1;4<g-f&&this.skip(g-(f+4));this.getU32();if(0!==this._continuation_queue.length){if(b=this._continuation_queue.shift(),this.seek(b.cq_off),
g=b.cq_len-4,f=0,this.getMetadata("debug")&&console.log("continuing with "+b.cq_len+" bytes at "+this.tell()),!this.checkSignature("OCHK"))throw Error("Bad v2 object continuation");}else break}a.children.forEach(function(a,b){that.seek(a.hdr_offset);that.getMetadata("debug")&&console.log(b+" "+a.hdr_offset+" "+a.name);this.checkSignature("OHDR")?(that.seek(a.hdr_offset),that.hdf5V2ObjectHeader(a)):(that.seek(a.hdr_offset),that.hdf5V1ObjectHeader(a))})};r.prototype.loadData=function(a){var b=this;
if(0!==a.chunk_size){this.seek(a.data_offset);var c=1,d;for(d=0;d<a.dims.length;d+=1)c*=a.dims[d];c*=this.typeSize(a.type);this.getMetadata("debug")&&console.log("allocating "+c+" bytes");c=new ArrayBuffer(c);a.n_filled=0;switch(a.type){case this._type_enum.INT8:a.array=new Int8Array(c);break;case this._type_enum.UINT8:a.array=new Uint8Array(c);break;case this._type_enum.INT16:a.array=new Int16Array(c);break;case this._type_enum.UINT16:a.array=new Uint16Array(c);break;case this._type_enum.INT32:a.array=
new Int32Array(c);break;case this._type_enum.UINT32:a.array=new Uint32Array(c);break;case this._type_enum.FLT:a.array=new Float32Array(c);break;case this._type_enum.DBL:a.array=new Float64Array(c);break;default:throw Error("Illegal type: "+a.type);}this.hdf5V1BtreeNode(a)}else 0<a.data_offset&&a.data_offset<this._superblk.eof_addr?(this.getMetadata("debug")&&console.log("loading "+a.data_length+" bytes from "+a.data_offset+" to "+a.name),a.array=this.getArray(a.type,a.data_length,a.data_offset)):
this.getMetadata("debug")&&console.log("data not present for /"+a.name+"/");a.children.forEach(function(a){b.loadData(a)})};r.prototype.hdf5V1ObjectHeader=function(a){var b=this,c,d,e,f;this.startAlignment();c=this.getU8();this.skip(1);d=this.getU16();e=this.getU32();f=this.getU32();if(1!==c)throw Error("Bad v1 object header version: "+c);this.getMetadata("debug")&&console.log("this.hdf5V1ObjectHeader V"+c+" #M "+d+" RC "+e+" HS "+f);e=f;var g;for(c=0;c<d;c+=1){if(8>=e)if(0!==this._continuation_queue.length)e=
this._continuation_queue.shift(),this.seek(e.cq_off),e=e.cq_len,this.getMetadata("debug")&&console.log("continuing with "+e+" bytes at "+this.tell()),this.startAlignment();else break;this.checkAlignment();f={};f.hm_type=this.getU16();f.hm_size=this.getU16();f.hm_flags=this.getU8();if(0!==f.hm_size%8)throw Error("Size is not 8-byte aligned: "+f.hm_size);this.skip(3);e-=8+f.hm_size;this.getMetadata("debug")&&console.log("  msg"+c+" F "+f.hm_flags+" T "+f.hm_type+" S "+f.hm_size+"("+e+") "+this.hdf5GetMsgName(f.hm_type));
g=this.tell();this.hdf5ProcessMessage(f,a);this.seek(g+f.hm_size)}if(0!==a.sym_btree&&0!==a.sym_lheap){this.seek(a.sym_btree);d=this.hdf5V1BtreeNode();this.seek(a.sym_lheap);c=this.hdf5LocalHeap();for(e=0;e<d.entries_used;e+=1)this.seek(d.keys[e].child_address),this.checkSignature("SNOD")?(this.seek(d.keys[e].child_address),this.hdf5GroupSymbolTable(c,a)):(this.seek(d.keys[e].child_address),this.hdf5V1ObjectHeader(a));a.children.forEach(function(a){b.seek(a.hdr_offset);b.hdf5V1ObjectHeader(a)})}};
r.prototype.getTypeMatchMinc=function(a){return this._type_matching[a-1]};r.prototype.defined=function(a){return"undefined"!==typeof a};r.prototype.typeName=function(a){return this.defined(a)?a.constructor.name:"undefined"};r.prototype.typeSize=function(a){if(a>=this._type_enum.INT8&&a<this.type_sizes.length)return this.type_sizes[a];throw Error("Unknown type "+a);};r.prototype.typeIsFloat=function(a){return a>=this._type_enum.FLT&&a<=this._type_enum.DBL};r.prototype.join=function(a,b){var c="";if(a&&
a.length){var d;for(d=0;d<a.length-1;d+=1)c+=a[d],c+=b;c+=a[d]}return c};r.prototype.printStructure=function(a,b){var c=this,d,e="";for(d=0;d<2*b;d+=1)e+=" ";e+=a.name+(a.children.length?"/":"");0<a.type&&(e+=" "+this.typeName(a.array),a.dims.length&&(e+="["+a.dims.join(", ")+"]"),e=a.array?e+(":"+a.array.length):e+" NULL");console.log(e);Object.keys(a.attributes).forEach(function(f){var g=a.attributes[f];e="";for(d=0;d<2*b+1;d+=1)e+=" ";e+=a.name+":"+f+" "+c.typeName(g)+"["+g.length+"] ";"string"===
typeof g?e+=JSON.stringify(g):(e+="{"+c.join(g.slice(0,16),", "),16<g.length&&(e+=", ..."),e+="}");console.log(e)});a.children.forEach(function(a){c.printStructure(a,b+1)})};r.prototype.findDataset=function(a,b,c){var d=this,e;a&&a.name===b&&0<a.type?e=a:a.children.find(function(a){e=d.findDataset(a,b,c+1);return d.defined(e)});return e};r.prototype.findAttribute=function(a,b,c){var d=this,e=a.attributes[b];if(e)return e;a.children.find(function(a){e=d.findAttribute(a,b,c+1);return d.defined(e)});
return e};r.prototype.scaleVoxels=function(a,b,c,d,e){var f,g;switch(this.getTypeMatchMinc(a.type)){case "int8":f=new ArrayBuffer(a.array.length*Int8Array.BYTES_PER_ELEMENT);g=new Int8Array(f);break;case "int16":f=new ArrayBuffer(a.array.length*Int16Array.BYTES_PER_ELEMENT);g=new Int16Array(f);break;case "int32":f=new ArrayBuffer(a.array.length*Int32Array.BYTES_PER_ELEMENT);g=new Int32Array(f);break;case "float32":f=new ArrayBuffer(a.array.length*Float32Array.BYTES_PER_ELEMENT);g=new Float32Array(f);
break;case "float64":f=new ArrayBuffer(a.array.length*Float64Array.BYTES_PER_ELEMENT);g=new Float64Array(f);break;case "uint8":f=new ArrayBuffer(a.array.length*Uint8Array.BYTES_PER_ELEMENT);g=new Uint8Array(f);break;case "uint16":f=new ArrayBuffer(a.array.length*Uint16Array.BYTES_PER_ELEMENT);g=new Uint16Array(f);break;case "uint32":f=new ArrayBuffer(a.array.length*Uint32Array.BYTES_PER_ELEMENT);g=new Uint32Array(f);break;default:throw b="Unsupported data type: "+header.datatype,console.log({message:b}),
Error(b);}if(1>a.dims.length-b.dims.length)throw Error("Too few slice dimensions: "+a.dims.length+" "+b.dims.length);var h=1,m;for(m=b.dims.length;m<a.dims.length;m+=1)h*=a.dims[m];e&&console.log(h+" voxels in slice.");var k=0,l=0,w=-Number.MAX_VALUE,q=Number.MAX_VALUE,p=a.array;c=c.array;var t=b.array;e&&console.log("valid range is "+d[0]+" to "+d[1]);var r,u=d[0],x,v,z,y=this.typeIsFloat(a.type);for(m=0;m<b.array.length;m+=1)if(e&&console.log(m+" "+t[m]+" "+c[m]+" "+p[m*h]),y)for(v=0;v<h;v+=1)z=
p[l],z<d[0]||z>d[1]?g[l]=0:(g[l]=z,k+=z,z>w&&(w=z),z<q&&(q=z)),l+=1;else for(a=d[1]-d[0],r=c[m]-t[m],x=t[m],v=0;v<h;v+=1)z=(p[l]-u)/a*r+x,z=z/c[m]*d[1],g[l]=z,k+=z,l+=1,z>w&&(w=z),z<q&&(q=z);e&&(console.log("Min: "+q),console.log("Max: "+w),console.log("Sum: "+k),console.log("Mean: "+k/l));return f};r.prototype.isRgbVolume=function(a,b){var c=a.order;return"Uint8Array"===b.array.constructor.name&&0<c.length&&"vector_dimension"===c[c.length-1]&&3===a.vector_dimension.space_length};r.prototype.rgbVoxels=
function(a){a=a.array;var b=a.length,c=new ArrayBuffer(b/3*4),d=new Uint8Array(c),e,f=0;for(e=0;e<b;e+=3)d[f+0]=a[e+0],d[f+1]=a[e+1],d[f+2]=a[e+2],d[f+3]=255,f+=4;return c};r.prototype.parseHeader=function(a){var b;try{b=JSON.parse(a)}catch(c){throw a="server did not respond with valid JSON\nResponse was: \n"+a,console.log({message:a}),Error(a);}4===b.order.length&&(b.order=b.order.slice(1));b.datatype=b.datatype||"uint8";b.xspace.space_length=parseFloat(b.xspace.space_length);b.yspace.space_length=
parseFloat(b.yspace.space_length);b.zspace.space_length=parseFloat(b.zspace.space_length);b.xspace.start=parseFloat(b.xspace.start);b.yspace.start=parseFloat(b.yspace.start);b.zspace.start=parseFloat(b.zspace.start);b.xspace.step=parseFloat(b.xspace.step);b.yspace.step=parseFloat(b.yspace.step);b.zspace.step=parseFloat(b.zspace.step);b.xspace.direction_cosines=b.xspace.direction_cosines||[1,0,0];b.yspace.direction_cosines=b.yspace.direction_cosines||[0,1,0];b.zspace.direction_cosines=b.zspace.direction_cosines||
[0,0,1];b.xspace.direction_cosines=b.xspace.direction_cosines.map(parseFloat);b.yspace.direction_cosines=b.yspace.direction_cosines.map(parseFloat);b.zspace.direction_cosines=b.zspace.direction_cosines.map(parseFloat);b[b.order[0]].offset=b[b.order[1]].space_length*b[b.order[2]].space_length;b[b.order[1]].offset=b[b.order[2]].space_length;b[b.order[2]].offset=1;b.time&&(b.time.space_length=parseFloat(b.time.space_length),b.time.start=parseFloat(b.time.start),b.time.step=parseFloat(b.time.step),b.time.offset=
b.xspace.space_length*b.yspace.space_length*b.zspace.space_length);return b};r.prototype.createMincData=function(a,b){switch(a.datatype){case "int8":a=new Int8Array(b);break;case "int16":a=new Int16Array(b);break;case "int32":a=new Int32Array(b);break;case "float32":a=new Float32Array(b);break;case "float64":a=new Float64Array(b);break;case "uint8":a=new Uint8Array(b);break;case "uint16":a=new Uint16Array(b);break;case "uint32":case "rgb8":a=new Uint32Array(b);break;default:throw a="Unsupported data type: "+
a.datatype,console.log({message:a}),Error(a);}return a};r.prototype._run=function(){var a=this,b=this._getInput(0);if(b){this._dv=new DataView(b);this._dv.getUint64=function(b,c){var d=a._dv.getUint32(b+0,c);b=a._dv.getUint32(b+4,c);return c?(b<<32)+d:(d<<32)+b};var c=this.createLink();try{this._superblk=this.hdf5Superblock()}catch(m){console.warn("The input file is not a Minc2 file.");return}this.seek(this._superblk.root_addr);1>=this._superblk.sbver?this.hdf5V1ObjectHeader(c):this.hdf5V2ObjectHeader(c);
this.loadData(c);this.getMetadata("debug")&&this.printStructure(c,0);b=this.findDataset(c,"image");if(!this.defined(b))throw Error("Can't find image dataset.");var d=this.findAttribute(b,"valid_range",0);if(!this.defined(d)){var e,f;switch(b.type){case this._type_enum.INT8:e=-128;f=127;break;case this._type_enum.UINT8:e=0;f=255;break;case this._type_enum.INT16:e=-32768;f=32767;break;case this._type_enum.UINT16:e=0;f=65535;break;case this._type_enum.INT32:e=2147483648;f=-2147483649;break;case this._type_enum.UINT32:e=
0,f=(1<<32)-1}d=Float32Array.of(e,f)}e=this.findDataset(c,"image-min");this.defined(e)||(e={array:Float32Array.of(0),dims:[]});f=this.findDataset(c,"image-max");this.defined(f)||(f={array:Float32Array.of(1),dims:[]});var g={},h=this.findAttribute(b,"dimorder",0);if("string"!==typeof h)throw Error("Can't find dimension order.");g.order=h.split(",");g.order.forEach(function(b){var d=a.findDataset(c,b);if(!a.defined(d))throw Error("Can't find dimension variable "+b);g[b]={};h=a.findAttribute(d,"step",
0);a.defined(h)||(h=Float32Array.of(1));g[b].step=h[0];h=a.findAttribute(d,"start",0);a.defined(h)||(h=Float32Array.of(0));g[b].start=h[0];h=a.findAttribute(d,"length",0);if(!a.defined(h))throw Error("Can't find length for "+b);g[b].space_length=h[0];h=a.findAttribute(d,"direction_cosines",0);a.defined(h)?g[b].direction_cosines=Array.prototype.slice.call(h):"xspace"===b?g[b].direction_cosines=[1,0,0]:"yspace"===b?g[b].direction_cosines=[0,1,0]:"zspace"===b&&(g[b].direction_cosines=[0,0,1])});this.isRgbVolume(g,
b)?(g.order.pop(),g.datatype="rgb8",d=this.rgbVoxels(b)):(g.datatype=this.getTypeMatchMinc(b.type),d=this.scaleVoxels(b,e,f,d,this.getMetadata("debug")));b=this.parseHeader(JSON.stringify(g));d=this.createMincData(b,d);this._addOutput(pa);e=this.getOutput();e.setData(d,b);e.setMetadata("format","minc2")}else console.warn('Minc2Decoder requires an ArrayBuffer as input "0". Unable to continue.')};var Oa=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);
return a};$jscomp.inherits(Oa,x);Oa.prototype.parseNifti1Header=function(a){var b={order:["zspace","yspace","xspace"],xspace:{},yspace:{},zspace:{}},c=null,d=new DataView(a,0,348),e=new Uint8Array(a,0,348);a=!0;var f=d.getUint32(0,!0);348===f?a=!0:1543569408===f?a=!1:c="This does not look like a NIfTI-1 file.";f=d.getUint16(40,a);if(3>f||4<f)c="Cannot handle "+f+"-dimensional images yet.";e=String.fromCharCode.apply(null,e.subarray(344,348));"n+1\x00"!==e&&(c="Bad magic number: '"+e+"'");if(c)return console.warn("The input file is not a NIfTI file."),
null;b.xspace.space_length=d.getUint16(42,a);b.yspace.space_length=d.getUint16(44,a);b.zspace.space_length=d.getUint16(46,a);var g=d.getUint16(48,a),c=d.getUint16(70,a),h=d.getUint16(72,a),e=d.getFloat32(80,a),f=d.getFloat32(84,a),m=d.getFloat32(88,a),k=d.getFloat32(92,a),l=d.getFloat32(108,a);352>l&&(l=352);var w=d.getFloat32(112,a),q=d.getFloat32(116,a),p=d.getUint16(252,a),t=d.getUint16(254,a),r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];1<=g&&(b.time={},b.time.space_length=g,b.time.step=k,b.time.start=
0,b.time.name="time",b.order=["time","zspace","yspace","xspace"]);b.bytes_per_voxel=h/8;b.must_swap_data=!a&&1<b.bytes_per_voxel;0<t?(r[0][0]=d.getFloat32(280,a),r[0][1]=d.getFloat32(284,a),r[0][2]=d.getFloat32(288,a),r[0][3]=d.getFloat32(292,a),r[1][0]=d.getFloat32(296,a),r[1][1]=d.getFloat32(300,a),r[1][2]=d.getFloat32(304,a),r[1][3]=d.getFloat32(308,a),r[2][0]=d.getFloat32(312,a),r[2][1]=d.getFloat32(316,a),r[2][2]=d.getFloat32(320,a),r[2][3]=d.getFloat32(324,a)):0<p?(g=d.getFloat32(256,a),h=d.getFloat32(260,
a),k=d.getFloat32(264,a),p=d.getFloat32(268,a),t=d.getFloat32(272,a),r=d.getFloat32(276,a),d=0>d.getFloat32(76,a)?-1:1,r=this.niftiQuaternToMat44(g,h,k,p,t,r,e,f,m,d)):(r[0][0]=e,r[1][1]=f,r[2][2]=m);pa.transformToMinc(r,b);b.datatype=c;b.vox_offset=l;b.scl_slope=w;b.scl_inter=q;return b};Oa.prototype.niftiQuaternToMat44=function(a,b,c,d,e,f,g,h,m,k){var l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,1]],w;w=1-(a*a+b*b+c*c);1E-7>w?(w=1/Math.sqrt(a*a+b*b+c*c),a*=w,b*=w,c*=w,w=0):w=Math.sqrt(w);g=0<g?g:1;
h=0<h?h:1;m=0<m?m:1;0>k&&(m=-m);l[0][0]=(w*w+a*a-b*b-c*c)*g;l[0][1]=2*(a*b-w*c)*h;l[0][2]=2*(a*c+w*b)*m;l[1][0]=2*(a*b+w*c)*g;l[1][1]=(w*w+b*b-a*a-c*c)*h;l[1][2]=2*(b*c-w*a)*m;l[2][0]=2*(a*c-w*b)*g;l[2][1]=2*(b*c+w*a)*h;l[2][2]=(w*w+c*c-b*b-a*a)*m;l[0][3]=d;l[1][3]=e;l[2][3]=f;return l};Oa.prototype.createNifti1Data=function(a,b){a.must_swap_data&&pa.swapn(new Uint8Array(b,a.vox_offset),a.bytes_per_voxel);switch(a.datatype){case 2:b=new Uint8Array(b,a.vox_offset);break;case 4:b=new Int16Array(b,a.vox_offset);
break;case 8:b=new Int32Array(b,a.vox_offset);break;case 16:b=new Float32Array(b,a.vox_offset);break;case 64:b=new Float64Array(b,a.vox_offset);break;case 256:b=new Int8Array(b,a.vox_offset);break;case 512:b=new Uint16Array(b,a.vox_offset);break;case 768:b=new Uint32Array(b,a.vox_offset);break;default:throw Error("Unsupported data type: "+a.datatype);}var c,d=a.scl_slope,e=a.scl_inter;if(0!==d){var f=new Float32Array(b.length);for(c=0;c<b.length;c++)f[c]=b[c]*d+e;b=f}4===a.order.length&&(a.order=
a.order.slice(1));a[a.order[0]].offset=a[a.order[1]].space_length*a[a.order[2]].space_length;a[a.order[1]].offset=a[a.order[2]].space_length;a[a.order[2]].offset=1;a.time&&(a.time.offset=a.xspace.space_length*a.yspace.space_length*a.zspace.space_length);return b};Oa.prototype._run=function(){var a=this._getInput(0);if(a){var b=this.parseNifti1Header(a);if(b){a=this.createNifti1Data(b,a);this._addOutput(pa);var c=this.getOutput();c.setData(a,b);c.setMetadata("format","nifti")}}else console.warn('NiftiDecoder requires an ArrayBuffer as input "0". Unable to continue.')};
var $e=Qa(function(a){var b=b||function(a){if(!("undefined"===typeof a||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in b,f=/constructor/i.test(a.HTMLElement)||a.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent),h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},l=function(b){setTimeout(function(){"string"===typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()},
4E4)},k=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},n=function(d,e,m){m||(d=k(d));var n=this,p="application/octet-stream"===d.type,t,w=function(){for(var a=["writestart","progress","write","writeend"],a=[].concat(a),b=a.length;b--;){var c=n["on"+a[b]];if("function"===typeof c)try{c.call(n,n)}catch(Be){h(Be)}}};n.readyState=n.INIT;c?(t=(a.URL||a.webkitURL||a).createObjectURL(d),
setTimeout(function(){b.href=t;b.download=e;var a=new MouseEvent("click");b.dispatchEvent(a);w();l(t);n.readyState=n.DONE})):function(){if((g||p&&f)&&a.FileReader){var b=new FileReader;b.onloadend=function(){var c=g?b.result:b.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(c,"_blank")||(a.location.href=c);n.readyState=n.DONE;w()};b.readAsDataURL(d);n.readyState=n.INIT}else t||(t=(a.URL||a.webkitURL||a).createObjectURL(d)),p?a.location.href=t:a.open(t,"_blank")||(a.location.href=t),
n.readyState=n.DONE,w(),l(t)}()},w=n.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,b,c){b=b||a.name||"download";c||(a=k(a));return navigator.msSaveOrOpenBlob(a,b)};w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return function(a,b,c){return new n(a,b||a.name||"download",c)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||oc.content);
a.exports&&(a.exports.saveAs=b)}),xb=function(){var a;a=x.call(this)||this;a.setMetadata("filename","untitled.pixp");return a};$jscomp.inherits(xb,x);xb.prototype.hasValidInput=function(){var a=this._getInput();return a&&(a.isOfType(B.TYPE())||a.isOfType(K.TYPE()))};xb.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),a={dataType:a.getData().constructor.name,data:Array.prototype.slice.call(a.getData()),metadata:a.getMetadataCopy(),pixpipeType:a.constructor.name},a=JSON.stringify(a),
b=new Na.Deflate({level:6,gzip:!0,header:{text:!0,time:+new Date,comment:"This file was created by Pixpipe.js"}});b.push(a,!0);this._output[0]=new Blob([b.result],{type:"application/gzip"})}else console.warn("PixpEncoder can only encode Image2D and Image3D.")};xb.prototype.download=function(){this.getOutput()?$e.saveAs(this.getOutput(),this.getMetadata("filename")):console.warn("No output computed yet.")};var Ob=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(Ob,
x);Ob.prototype._run=function(){console.log(this._input);if(this.hasValidInput()){var a=this._getInput(),b=new Na.Inflate({level:6,to:"string"});b.push(a,!0);if(b.err)console.warn("This file is not a Pixp file.");else{a=null;try{a=JSON.parse(b.result)}catch(d){console.warn("Could not parse pixp file.");console.error(d);return}if(a.pixpipeType in pixpipe)if(b=window||this,b[a.dataType]){var b=new b[a.dataType](a.data),c=new pixpipe[a.pixpipeType];c.setRawData(b);c.setRawMetadata(a.metadata);this._output[0]=
c}else console.warn("Data array from pixp file is unknown: "+a.dataType);else console.warn("Unknown type pixpipe."+a.pixpipeType+", cannot create any output.")}}else console.warn("PixpDecoder can only decode ArrayBuffer.")};var rc=function(){var a;a=x.call(this)||this;a._decoders=[r,Oa,Ob];return a};$jscomp.inherits(rc,x);rc.prototype._run=function(){var a=this._getInput(0);if(a)for(var b=0;b<this._decoders.length;b++){var c=new this._decoders[b];c.addInput(a);c.update();if(c.getNumberOfOutputs()){this._output[0]=
c.getOutput();this.setMetadata("decoderConstructor",this._decoders[b]);this.setMetadata("decoderName",this._decoders[b].name);break}}else console.warn("The input buffer must not be null.")};var sc=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ge=new RegExp("[\\-\\.0-9"+sc.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),he=new RegExp("^"+sc.source+ge.source+"*(?::"+sc.source+ge.source+
"*)?$");rd.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument();xd(b,b={});Ae(a,b,c,d,this.errorHandler);d.endDocument()}};ud.prototype={setTagName:function(a){if(!he.test(a))throw Error("invalid tagName:"+a);this.tagName=a},add:function(a,b,c){if(!he.test(a))throw Error("invalid attribute:"+a);this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},
getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};Fb({},Fb.prototype)instanceof Fb||(Fb=function(a,b){function c(){}c.prototype=b;c=new c;for(b in a)c[b]=a[b];return c});var da={},oa=da.ELEMENT_NODE=1,Ya=da.ATTRIBUTE_NODE=2,Kb=da.TEXT_NODE=3,Nd=da.CDATA_SECTION_NODE=4,Rd=da.ENTITY_REFERENCE_NODE=5,af=da.ENTITY_NODE=6,Qd=da.PROCESSING_INSTRUCTION_NODE=7,Od=da.COMMENT_NODE=8,Md=da.DOCUMENT_NODE=9,Pd=da.DOCUMENT_TYPE_NODE=10,ta=da.DOCUMENT_FRAGMENT_NODE=11,bf=da.NOTATION_NODE=
12,aa={},J={};aa.INDEX_SIZE_ERR=(J[1]="Index size error",1);aa.DOMSTRING_SIZE_ERR=(J[2]="DOMString size error",2);var cf=aa.HIERARCHY_REQUEST_ERR=(J[3]="Hierarchy request error",3);aa.WRONG_DOCUMENT_ERR=(J[4]="Wrong document",4);aa.INVALID_CHARACTER_ERR=(J[5]="Invalid character",5);aa.NO_DATA_ALLOWED_ERR=(J[6]="No data allowed",6);aa.NO_MODIFICATION_ALLOWED_ERR=(J[7]="No modification allowed",7);var He=aa.NOT_FOUND_ERR=(J[8]="Not found",8);aa.NOT_SUPPORTED_ERR=(J[9]="Not supported",9);var ie=aa.INUSE_ATTRIBUTE_ERR=
(J[10]="Attribute in use",10);aa.INVALID_STATE_ERR=(J[11]="Invalid state",11);aa.SYNTAX_ERR=(J[12]="Syntax error",12);aa.INVALID_MODIFICATION_ERR=(J[13]="Invalid modification",13);aa.NAMESPACE_ERR=(J[14]="Invalid namespace",14);aa.INVALID_ACCESS_ERR=(J[15]="Invalid access",15);Va.prototype=Error.prototype;ib(aa,Va);Ca.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)Xa(this[d],c,a,b);return c.join("")}};jb.prototype.item=function(a){dc(this);
return this[a]};X(jb,Ca);Gb.prototype={length:0,item:Ca.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Va(ie);b=this.getNamedItem(a.nodeName);Ad(this._ownerElement,this,a,b);return b},setNamedItemNS:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new Va(ie);b=this.getNamedItemNS(a.namespaceURI,a.localName);Ad(this._ownerElement,this,
a,b);return b},removeNamedItem:function(a){a=this.getNamedItem(a);Cd(this._ownerElement,this,a);return a},removeNamedItemNS:function(a,b){a=this.getNamedItemNS(a,b);Cd(this._ownerElement,this,a);return a},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}};Dd.prototype={hasFeature:function(a,b){return(a=this._features[a.toLowerCase()])&&(!b||b in a)?!0:!1},createDocument:function(a,b,c){var d=new kb;d.implementation=this;
d.childNodes=new Ca;(d.doctype=c)&&d.appendChild(c);b&&(a=d.createElementNS(a,b),d.appendChild(a));return d},createDocumentType:function(a,b,c){var d=new ic;d.name=a;d.nodeName=a;d.publicId=b;d.systemId=c;return d}};Z.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return Gd(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,
b);b&&this.removeChild(b)},removeChild:function(a){return Fd(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return lc(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==Kb&&a.nodeType==Kb?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},
hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==Ya?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==Ya?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}};ib(da,Z);ib(da,Z.prototype);kb.prototype={nodeName:"#document",nodeType:Md,
doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==ta){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b);c=d}return a}null==this.documentElement&&a.nodeType==oa&&(this.documentElement=a);return Gd(this,a,b),a.ownerDocument=this,a},removeChild:function(a){this.documentElement==a&&(this.documentElement=null);return Fd(this,a)},importNode:function(a,b){return Sd(this,a,b)},getElementById:function(a){var b=null;Hb(this.documentElement,function(c){if(c.nodeType==
oa&&c.getAttribute("id")==a)return b=c,!0});return b},createElement:function(a){var b=new Wa;b.ownerDocument=this;b.nodeName=a;b.tagName=a;b.childNodes=new Ca;return(b.attributes=new Gb)._ownerElement=b},createDocumentFragment:function(){var a=new Jb;a.ownerDocument=this;a.childNodes=new Ca;return a},createTextNode:function(a){var b=new fc;b.ownerDocument=this;b.appendData(a);return b},createComment:function(a){var b=new gc;b.ownerDocument=this;b.appendData(a);return b},createCDATASection:function(a){var b=
new hc;b.ownerDocument=this;b.appendData(a);return b},createProcessingInstruction:function(a,b){var c=new kc;c.ownerDocument=this;c.tagName=c.target=a;c.nodeValue=c.data=b;return c},createAttribute:function(a){var b=new Ib;b.ownerDocument=this;b.name=a;b.nodeName=a;b.localName=a;b.specified=!0;return b},createEntityReference:function(a){var b=new jc;b.ownerDocument=this;b.nodeName=a;return b},createElementNS:function(a,b){var c=new Wa,d=b.split(":"),e=c.attributes=new Gb;c.childNodes=new Ca;c.ownerDocument=
this;c.nodeName=b;c.tagName=b;c.namespaceURI=a;2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b;return e._ownerElement=c},createAttributeNS:function(a,b){var c=new Ib,d=b.split(":");c.ownerDocument=this;c.nodeName=b;c.name=b;c.namespaceURI=a;c.specified=!0;2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b;return c}};X(kb,Z);Wa.prototype={nodeType:oa,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){return(a=this.getAttributeNode(a))&&a.value||
""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){a=this.ownerDocument.createAttribute(a);a.value=a.nodeValue=""+b;this.setAttributeNode(a)},removeAttribute:function(a){(a=this.getAttributeNode(a))&&this.removeAttributeNode(a)},appendChild:function(a){if(a.nodeType===ta)return this.insertBefore(a,null);var b=a.parentNode;b&&b.removeChild(a);b=this.lastChild;a.parentNode=this;a.previousSibling=b;a.nextSibling=null;b?b.nextSibling=a:this.firstChild=
a;this.lastChild=a;ec(this.ownerDocument,this,a);return a},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){(a=this.getAttributeNodeNS(a,b))&&this.removeAttributeNode(a)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){return(a=this.getAttributeNodeNS(a,
b))&&a.value||""},setAttributeNS:function(a,b,c){a=this.ownerDocument.createAttributeNS(a,b);a.value=a.nodeValue=""+c;this.setAttributeNode(a)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new jb(this,function(b){var c=[];Hb(b,function(d){d===b||d.nodeType!=oa||"*"!==a&&d.tagName!=a||c.push(d)});return c})},getElementsByTagNameNS:function(a,b){return new jb(this,function(c){var d=[];Hb(c,function(e){e===c||e.nodeType!==oa||"*"!==
a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)});return d})}};kb.prototype.getElementsByTagName=Wa.prototype.getElementsByTagName;kb.prototype.getElementsByTagNameNS=Wa.prototype.getElementsByTagNameNS;X(Wa,Z);Ib.prototype.nodeType=Ya;X(Ib,Z);lb.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){this.nodeValue=this.data=a=this.data+a;this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw Error(J[cf]);
},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){var d=this.data.substring(0,a);a=this.data.substring(a+b);this.nodeValue=this.data=c=d+c+a;this.length=c.length}};X(lb,Z);fc.prototype={nodeName:"#text",nodeType:Kb,splitText:function(a){var b=this.data,c=b.substring(a);this.data=this.nodeValue=b=b.substring(0,a);this.length=b.length;a=this.ownerDocument.createTextNode(c);this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling);return a}};X(fc,lb);gc.prototype=
{nodeName:"#comment",nodeType:Od};X(gc,lb);hc.prototype={nodeName:"#cdata-section",nodeType:Nd};X(hc,lb);ic.prototype.nodeType=Pd;X(ic,Z);Hd.prototype.nodeType=bf;X(Hd,Z);Id.prototype.nodeType=af;X(Id,Z);jc.prototype.nodeType=Rd;X(jc,Z);Jb.prototype.nodeName="#document-fragment";Jb.prototype.nodeType=ta;X(Jb,Z);kc.prototype.nodeType=Qd;X(kc,Z);Jd.prototype.serializeToString=function(a,b,c){return Kd.call(a,b,c)};Z.prototype.toString=Kd;try{if(Object.defineProperty){var je=function(a){switch(a.nodeType){case oa:case ta:var b=
[];for(a=a.firstChild;a;)7!==a.nodeType&&8!==a.nodeType&&b.push(je(a)),a=a.nextSibling;return b.join("");default:return a.nodeValue}};Object.defineProperty(jb.prototype,"length",{get:function(){dc(this);return this.$$length}});Object.defineProperty(Z.prototype,"textContent",{get:function(){return je(this)},set:function(a){switch(this.nodeType){case oa:case ta:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.nodeValue=
this.value=this.data=a}}});yd=function(a,b,c){a["$$"+b]=c}}}catch(a){}var df=Qa(function(a,b){function c(a){this.options=a||{locator:{}}}function d(a,b,c){function d(b){var d=a[b];!d&&h&&(d=2==a.length?function(c){a(b,c)}:a);f[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+g(c))}||function(){}}if(!a){if(b instanceof e)return b;a=b}var f={},h=a instanceof Function;c=c||{};d("warning");d("error");d("fatalError");return f}function e(){this.cdata=!1}function f(a,b){b.lineNumber=a.lineNumber;b.columnNumber=
a.columnNumber}function g(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function h(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function l(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}c.prototype.parseFromString=function(a,b){var c=this.options,f=new k,g=c.domBuilder||new e,h=c.errorHandler,l=c.locator,m=c.xmlns||{},n={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};l&&g.setDocumentLocator(l);
f.errorHandler=d(h,g,l);f.domBuilder=c.domBuilder||g;/\/x?html?$/.test(b)&&(n.nbsp="\u00a0",n.copy="\u00a9",m[""]="http://www.w3.org/1999/xhtml");m.xml=m.xml||"http://www.w3.org/XML/1998/namespace";a?f.parse(a,m,n):f.errorHandler.error("invalid doc source");return g.doc};e.prototype={startDocument:function(){this.doc=(new n).createDocument(null,null,null);this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.doc;b=e.createElementNS(a,c||b);var g=d.length;
l(this,b);this.currentElement=b;this.locator&&f(this.locator,b);for(var h=0;h<g;h++){a=d.getURI(h);var k=d.getValue(h);c=d.getQName(h);a=e.createAttributeNS(a,c);this.locator&&f(d.getLocator(h),a);a.value=a.nodeValue=k;b.setAttributeNode(a)}},endElement:function(a,b,c){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){a=this.doc.createProcessingInstruction(a,b);this.locator&&f(this.locator,a);l(this,
a)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=h.apply(this,arguments)){var d=this.cdata?this.doc.createCDATASection(a):this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d);this.locator&&f(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){if(this.locator=a)a.lineNumber=0},comment:function(a,b,c){a=h.apply(this,arguments);var d=this.doc.createComment(a);
this.locator&&f(this.locator,d);l(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;d&&d.createDocumentType&&(a=d.createDocumentType(a,b,c),this.locator&&f(this.locator,a),l(this,a))},warning:function(a){console.warn("[xmldom warning]\t"+a,g(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,g(this.locator))},fatalError:function(a){console.error("[xmldom fatalError]\t"+a,g(this.locator));throw a;
}};"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){e.prototype[a]=function(){return null}});var k=rd,n=b.DOMImplementation=Dd;b.XMLSerializer=Jd;b.DOMParser=c}),tc={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",
291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",
343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",
344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",
700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"},va,qa={};for(va in tc)qa[tc[va]]=parseInt(va);var ef=[qa.BitsPerSample,qa.ExtraSamples,qa.SampleFormat,qa.StripByteCounts,qa.StripOffsets,qa.StripRowCounts,qa.TileByteCounts,qa.TileOffsets],uc={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",
10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",16:"LONG8",17:"SLONG8",18:"IFD8"},ke={};for(va in uc)ke[uc[va]]=parseInt(va);var vc={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",
2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",
3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},
le={};for(va in vc)le[vc[va]]=parseInt(va);var Pb;"undefined"===typeof window?Pb=function(a){return(new df.DOMParser).parseFromString(a,"text/xml")}:"undefined"!==typeof window.DOMParser?Pb=function(a){return(new window.DOMParser).parseFromString(a,"text/xml")}:"undefined"!==typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(Pb=function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b});var U={fieldTags:qa,fieldTagNames:tc,arrayFields:ef,
fieldTypes:ke,fieldTypeNames:uc,photometricInterpretations:{WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},geoKeys:le,geoKeyNames:vc,parseXml:Pb},$a={fromWhiteIsZero:function(a,b,c,d){c=new Uint8Array(c*d*3);for(var e=0,f=0;e<a.length;++e,f+=3)d=256-a[e]/b*256,c[f]=d,c[f+1]=d,c[f+2]=d;return c},fromBlackIsZero:function(a,b,c,d){c=new Uint8Array(c*d*3);for(var e=0,f=0;e<a.length;++e,f+=3)d=a[e]/b*256,c[f]=d,c[f+1]=d,c[f+2]=d;return c},fromPalette:function(a,
b,c,d){c=new Uint8Array(c*d*3);d=b.length/3;for(var e=b.length/3*2,f=0,g=0;f<a.length;++f,g+=3){var h=a[f];c[g]=b[h]/65536*256;c[g+1]=b[h+d]/65536*256;c[g+2]=b[h+e]/65536*256}return c},fromCMYK:function(a,b,c){b=new Uint8Array(b*c*3);for(var d,e,f,g=0,h=0;g<a.length;g+=4,h+=3)c=a[g],d=a[g+1],e=a[g+2],f=a[g+3],b[h]=(255-c)/256*255*((255-f)/256),b[h+1]=(255-d)/256*255*((255-f)/256),b[h+2]=(255-e)/256*255*((255-f)/256);return b},fromYCbCr:function(a,b,c){b=new Uint8Array(b*c*3);for(var d,e,f=0,g=0;f<
a.length;f+=3,g+=3)c=a[f],d=a[f+1],e=a[f+2],b[g]=c+1.402*(e-128),b[g+1]=c-.34414*(d-128)-.71414*(e-128),b[g+2]=c+1.772*(d-128);return b},fromCIELab:function(a,b,c){var d=[3.240479,-1.53715,-.498535,-.969256,1.875992,.041556,.055648,-.204043,1.057311];b=new Uint8Array(b*c*3);for(var e,f,g,h,l,k=c=0;c<a.length;c+=3,k+=3)e=a[c],f=a[c+1],g=a[c+2],h=Math.pow((e+16)/116,3),l=.008856<h,e=h=e/903.3*(0!==l)+l*h,h=l*Math.pow(h,1/3)+(0!==l)*(7.787*h+16/116),f=f/500+h,l=.206893<f,f=l*Math.pow(f,3)+(f-16/116)/
7.787*(0!==l),g=h-g/200,h=.206893<g,g=h*Math.pow(g,3)+(g-16/116)/7.787*(0!==h),f*=.950456,g*=1.088754,b[k]=f*d[0]+e*d[1]+g*d[2],b[k+1]=f*d[3]+e*d[4]+g*d[5],b[k+2]=f*d[6]+e*d[7]+g*d[8];return b}};mb.prototype={isAsync:function(){return"undefined"===typeof this.decodeBlock}};nb.prototype=Object.create(mb.prototype);nb.prototype.constructor=nb;nb.prototype.decodeBlock=function(a){return a};var Ie=nb;mc.prototype={constructor:mc,initDictionary:function(){this.dictionary=Array(258);this.entryLookup={};
this.byteLength=9;for(var a=0;257>=a;a++)this.dictionary[a]=[a],this._makeEntryLookup&&(this.entryLookup[a]=a)},decompress:function(a){this._makeEntryLookup=!1;this.initDictionary();this.position=0;this.result=[];a.buffer||(a=new Uint8Array(a));a=new DataView(a.buffer);for(var b=this.getNext(a),c;257!==b;){if(256===b){this.initDictionary();for(b=this.getNext(a);256===b;)b=this.getNext(a);if(256<b)throw"corrupted code at scanline "+b;if(257===b)break;else this.appendArray(this.result,this.dictionary[b]),
c=b}else{if(void 0!==this.dictionary[b])this.appendArray(this.result,this.dictionary[b]),c=this.dictionary[c].concat(this.dictionary[b][0]);else{var d=this.dictionary[c];if(!d)throw"Bogus entry. Not in dictionary, "+c+" / "+this.dictionary.length+", position: "+this.position;c=d.concat(this.dictionary[c][0]);this.appendArray(this.result,c)}this.addToDictionary(c);c=b}this.dictionary.length>=Math.pow(2,this.byteLength)-1&&this.byteLength++;b=this.getNext(a)}return new Uint8Array(this.result)},appendArray:function(a,
b){for(var c=0;c<b.length;c++)a.push(b[c]);return a},haveBytesChanged:function(){return this.dictionary.length>=Math.pow(2,this.byteLength)?(this.byteLength++,!0):!1},addToDictionary:function(a){this.dictionary.push(a);this._makeEntryLookup&&(this.entryLookup[a]=this.dictionary.length-1);this.haveBytesChanged();return this.dictionary.length-1},getNext:function(a){a=this.getByte(a,this.position,this.byteLength);this.position+=this.byteLength;return a},getByte:function(a,b,c){var d=b%8,e=Math.floor(b/
8),f=8-d,g=b+c-8*(e+1),h,l=8*(e+2)-b;h=Math.max(0,8*(e+2)-(b+c));if(e>=a.byteLength)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;d=(a.getUint8(e,this.littleEndian)&Math.pow(2,8-d)-1)<<c-f;e+1<a.byteLength&&(h=a.getUint8(e+1,this.littleEndian)>>>h,h<<=Math.max(0,c-l),d+=h);8<g&&e+2<a.byteLength&&(b=8*(e+3)-(b+c),a=a.getUint8(e+2,this.littleEndian)>>>b,d+=a);return d},compress:function(a){this._makeEntryLookup=!0;this.initDictionary();this.position=
0;for(var b=[],c=[],b=this.appendArray(b,this.binaryFromByte(256,this.byteLength)),d=0;d<a.length;d++){var e=[a[d]],f=c.concat(e);void 0!==this.entryLookup[f]?c=f:(c=this.binaryFromByte(this.entryLookup[c],this.byteLength),b=this.appendArray(b,c),this.addToDictionary(f),c=e,this.dictionary.length>=Math.pow(2,12)&&(b=this.appendArray(b,this.binaryFromByte(256,this.byteLength)),this.initDictionary()))}a=this.binaryFromByte(this.entryLookup[c],this.byteLength);b=this.appendArray(b,a);this.binary=b=b=
this.appendArray(b,this.binaryFromByte(257,this.byteLength));return this.result=this.binaryToUint8(b)},byteFromCode:function(a){return this.dictionary[a]},binaryFromByte:function(a){for(var b=new Uint8Array(1<arguments.length&&void 0!==arguments[1]?arguments[1]:8),c=0;c<b.length;c++)b[b.length-1-c]=0<(a&Math.pow(2,c));return b},binaryToNumber:function(a){for(var b=0,c=0;c<a.length;c++)b+=Math.pow(2,a.length-c-1)*a[c];return b},inputToBinary:function(a){for(var b=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:8,c=new Uint8Array(a.length*b),d=0;d<a.length;d++){var e=this.binaryFromByte(a[d],b);c.set(e,d*b)}return c},binaryToUint8:function(a){for(var b=new Uint8Array(Math.ceil(a.length/8)),c=0,d=0;d<a.length;d+=8){for(var e=0,f=0;8>f&&d+f<a.length;f++)e+=a[d+f]*Math.pow(2,8-f-1);b[c]=e;c++}return b}};ob.prototype=Object.create(mb.prototype);ob.prototype.constructor=ob;ob.prototype.decodeBlock=function(a){return this.decompressor.decompress(a).buffer};var Je=ob,ff=fe.inflate;pb.prototype=Object.create(mb.prototype);
pb.prototype.constructor=pb;pb.prototype.decodeBlock=function(a){return ff(new Uint8Array(a)).buffer};var Ke=pb;qb.prototype=Object.create(mb.prototype);qb.prototype.constructor=qb;qb.prototype.decodeBlock=function(a){var b=new DataView(a),c=[],d,e;for(d=0;d<a.byteLength;++d){var f=b.getInt8(d);if(0>f){var g=b.getUint8(d+1),f=-f;for(e=0;e<=f;++e)c.push(g);d+=1}else{for(e=0;e<=f;++e)c.push(b.getUint8(d+e+1));d+=f+1}}return(new Uint8Array(c)).buffer};var Le=qb,me=function(a,b,c){for(var d=0;b<c;++b)d+=
a[b];return d},ne=function(a,b,c){switch(a){case 1:switch(b){case 8:return new Uint8Array(c);case 16:return new Uint16Array(c);case 32:return new Uint32Array(c)}break;case 2:switch(b){case 8:return new Int8Array(c);case 16:return new Int16Array(c);case 32:return new Int32Array(c)}break;case 3:switch(b){case 32:return new Float32Array(c);case 64:return new Float64Array(c)}}throw Error("Unsupported data format/bitsPerSample");};Td.prototype={getFileDirectory:function(){return this.fileDirectory},getGeoKeys:function(){return this.geoKeys},
getWidth:function(){return this.fileDirectory.ImageWidth},getHeight:function(){return this.fileDirectory.ImageLength},getSamplesPerPixel:function(){return this.fileDirectory.SamplesPerPixel},getTileWidth:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()},getTileHeight:function(){return this.isTiled?this.fileDirectory.TileLength:this.fileDirectory.RowsPerStrip},getBytesPerPixel:function(){for(var a=0,b=0;b<this.fileDirectory.BitsPerSample.length;++b){var c=this.fileDirectory.BitsPerSample[b];
if(0!==c%8)throw Error("Sample bit-width of "+c+" is not supported.");if(c!==this.fileDirectory.BitsPerSample[0])throw Error("Differing size of samples in a pixel are not supported.");a+=c}return a/8},getSampleByteSize:function(a){if(a>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index "+a+" is out of range.");a=this.fileDirectory.BitsPerSample[a];if(0!==a%8)throw Error("Sample bit-width of "+a+" is not supported.");return a/8},getReaderForSample:function(a){var b=this.fileDirectory.BitsPerSample[a];
switch(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[a]:1){case 1:switch(b){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(b){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(b){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}},getArrayForSample:function(a,
b){return ne(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[a]:1,this.fileDirectory.BitsPerSample[a],b)},getDecoder:function(){return this.decoder},getTileOrStrip:function(a,b,c,d){var e=Math.ceil(this.getWidth()/this.getTileWidth()),f=Math.ceil(this.getHeight()/this.getTileHeight()),g,h=this.tiles;1===this.planarConfiguration?g=b*e+a:2===this.planarConfiguration&&(g=c*e*f+b*e+a);if(null!==h&&g in h)return d?d(null,{x:a,y:b,sample:c,data:h[g]}):h[g];this.isTiled?(e=this.fileDirectory.TileOffsets[g],
f=this.fileDirectory.TileByteCounts[g]):(e=this.fileDirectory.StripOffsets[g],f=this.fileDirectory.StripByteCounts[g]);e=this.dataView.buffer.slice(e,e+f);if(d)return this.getDecoder().decodeBlockAsync(e,function(e,f){e||null===h||(h[g]=f);d(e,{x:a,y:b,sample:c,data:f})});e=this.getDecoder().decodeBlock(e);null!==h&&(h[g]=e);return e},_readRasterAsync:function(a,b,c,d,e,f){function g(){B&&0===C&&(D?f(D):e(c))}function h(e,f){if(e)D=e;else{e=new DataView(f.data);var h=f.y*k,m=f.x*l,n=(f.y+1)*k,p=(f.x+
1)*l;f=f.sample;for(var q=Math.max(0,a[1]-h);q<Math.min(k,k-(n-a[3]));++q)for(var r=Math.max(0,a[0]-m);r<Math.min(l,l-(p-a[2]));++r){var w=y[f].call(e,(q*l+r)*u+v[f],A),z;d?(1!==x&&0<r&&(z=(q+h-a[1])*t*b.length+(r+m-a[0]-1)*b.length+f,w+=c[z]),z=(q+h-a[1])*t*b.length+(r+m-a[0])*b.length+f,c[z]=w):(1!==x&&0<r&&(z=(q+h-a[1])*t+r-1+m-a[0],w+=c[f][z]),z=(q+h-a[1])*t+r+m-a[0],c[f][z]=w)}}--C;g()}var l=this.getTileWidth(),k=this.getTileHeight(),n=Math.floor(a[0]/l),q=Math.ceil(a[2]/l),r=Math.floor(a[1]/
k),p=Math.ceil(a[3]/k);this.getWidth();var t=a[2]-a[0],u=this.getBytesPerPixel();this.getWidth();for(var x=this.fileDirectory.Predictor||1,v=[],y=[],z=0;z<b.length;++z)1===this.planarConfiguration?v.push(me(this.fileDirectory.BitsPerSample,0,b[z])/8):v.push(0),y.push(this.getReaderForSample(b[z]));for(var B=!1,C=0,A=this.littleEndian,D=null;r<=p;++r)for(z=n;z<=q;++z)for(var G=0;G<b.length;++G){var K=b[G];2===this.planarConfiguration&&(u=this.getSampleByteSize(K));C+=1;this.getTileOrStrip(z,r,K,h)}B=
!0;g()},_readRaster:function(a,b,c,d,e,f){try{var g=this.getTileWidth(),h=this.getTileHeight(),l=Math.floor(a[0]/g),k=Math.ceil(a[2]/g),n=Math.floor(a[1]/h),q=Math.ceil(a[3]/h);this.getWidth();var r=a[2]-a[0],p=this.getBytesPerPixel();this.getWidth();for(var t=this.fileDirectory.Predictor||1,u=[],x=[],v=0;v<b.length;++v)1===this.planarConfiguration?u.push(me(this.fileDirectory.BitsPerSample,0,b[v])/8):u.push(0),x.push(this.getReaderForSample(b[v]));for(;n<q;++n)for(v=l;v<k;++v)for(var y=n*h,z=v*g,
B=(n+1)*h,C=(v+1)*g,A=0;A<b.length;++A){var D=b[A];2===this.planarConfiguration&&(p=this.getSampleByteSize(D));var G=new DataView(this.getTileOrStrip(v,n,D)),K=x[A],M=Math.min(h,h-(B-a[3])),Q=Math.min(g,g-(C-a[2])),E=(M*g+Q)*p,O=(new Uint8Array(G.buffer)).length;2*O!==E&&this._debugMessages&&console.warn("dimension mismatch",O,E);for(var N=Math.max(0,a[1]-y);N<M;++N)for(var I=Math.max(0,a[0]-z);I<Q;++I){var E=(N*g+I)*p,P=0;E<O-1&&(P=K.call(G,E+u[A],this.littleEndian));var J;d?(1!==t&&0<I&&(J=(N+y-
a[1])*r*b.length+(I+z-a[0]-1)*b.length+A,P+=c[J]),J=(N+y-a[1])*r*b.length+(I+z-a[0])*b.length+A,c[J]=P):(1!==t&&0<I&&(J=(N+y-a[1])*r+I-1+z-a[0],P+=c[A][J]),J=(N+y-a[1])*r+I+z-a[0],c[A][J]=P)}}e(c);return c}catch(gf){return f(gf)}},readRasters:function(){var a,b,c;switch(arguments.length){case 0:break;case 1:"function"===typeof arguments[0]?b=arguments[0]:a=arguments[0];break;case 2:"function"===typeof arguments[0]?(b=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1]);break;case 3:a=arguments[0];
b=arguments[1];c=arguments[2];break;default:throw Error("Invalid number of arguments passed.");}a=a||{};c=c||function(a){console.error(a)};var d=a.window||[0,0,this.getWidth(),this.getHeight()],e=a.samples;a=a.interleave;if(0>d[0]||0>d[1]||d[2]>this.getWidth()||d[3]>this.getHeight())throw Error("Select window is out of image bounds.");if(d[0]>d[2]||d[1]>d[3])throw Error("Invalid subsets");var f=(d[2]-d[0])*(d[3]-d[1]),g;if(e)for(g=0;g<e.length;++g){if(e[g]>=this.fileDirectory.SamplesPerPixel)throw new RangeError("Invalid sample index '"+
e[g]+"'.");}else for(e=[],g=0;g<this.fileDirectory.SamplesPerPixel;++g)e.push(g);var h;if(a)g=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,h=Math.max.apply(null,this.fileDirectory.BitsPerSample),h=ne(g,h,f*e.length);else for(h=[],g=0;g<e.length;++g)h.push(this.getArrayForSample(e[g],f));if(this.getDecoder().isAsync()){if(!b)throw Error("No callback specified for asynchronous raster reading.");return this._readRasterAsync(d,e,h,a,b,c)}return this._readRaster(d,
e,h,a,b||function(){},c)},readRGB:function(){var a=null,b=null,c=null;switch(arguments.length){case 0:break;case 1:"function"===typeof arguments[0]?b=arguments[0]:a=arguments[0];break;case 2:"function"===typeof arguments[0]?(b=arguments[0],c=arguments[1]):(a=arguments[0],b=arguments[1]);break;case 3:a=arguments[0];b=arguments[1];c=arguments[2];break;default:throw Error("Invalid number of arguments passed.");}var a=a||{},c=c||function(a){console.error(a)},d=a.window||[0,0,this.getWidth(),this.getHeight()];
if(0>d[0]||0>d[1]||d[2]>this.getWidth()||d[3]>this.getHeight())throw Error("Select window is out of image bounds.");if(d[0]>d[2]||d[1]>d[3])throw Error("Invalid subsets");var e=d[2]-d[0],f=d[3]-d[1],g=this.fileDirectory.PhotometricInterpretation,h=Math.pow(2,this.fileDirectory.BitsPerSample[0]);if(g===U.photometricInterpretations.RGB)return this.readRasters({window:a.window,interleave:!0},b,c);switch(g){case U.photometricInterpretations.WhiteIsZero:case U.photometricInterpretations.BlackIsZero:case U.photometricInterpretations.Palette:d=
[0];break;case U.photometricInterpretations.CMYK:d=[0,1,2,3];break;case U.photometricInterpretations.YCbCr:case U.photometricInterpretations.CIELab:d=[0,1,2];break;default:throw Error("Invalid or unsupported photometric interpretation.");}var l=this.fileDirectory;return this.readRasters({window:a.window,interleave:!0,samples:d},function(a){switch(g){case U.photometricInterpretations.WhiteIsZero:return b($a.fromWhiteIsZero(a,h,e,f));case U.photometricInterpretations.BlackIsZero:return b($a.fromBlackIsZero(a,
h,e,f));case U.photometricInterpretations.Palette:return b($a.fromPalette(a,l.ColorMap,e,f));case U.photometricInterpretations.CMYK:return b($a.fromCMYK(a,e,f));case U.photometricInterpretations.YCbCr:return b($a.fromYCbCr(a,e,f));case U.photometricInterpretations.CIELab:return b($a.fromCIELab(a,e,f))}},c)},getTiePoints:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var a=[],b=0;b<this.fileDirectory.ModelTiepoint.length;b+=6)a.push({i:this.fileDirectory.ModelTiepoint[b],j:this.fileDirectory.ModelTiepoint[b+
1],k:this.fileDirectory.ModelTiepoint[b+2],x:this.fileDirectory.ModelTiepoint[b+3],y:this.fileDirectory.ModelTiepoint[b+4],z:this.fileDirectory.ModelTiepoint[b+5]});return a},getGDALMetadata:function(){var a={};if(!this.fileDirectory.GDAL_METADATA)return null;for(var b=this.fileDirectory.GDAL_METADATA,b=U.parseXml(b.substring(0,b.length-1)),b=b.evaluate("GDALMetadata/Item",b,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),c=0;c<b.snapshotLength;++c){var d=b.snapshotItem(c);a[d.getAttribute("name")]=
d.textContent}return a},getOrigin:function(){var a=this.fileDirectory.ModelTiepoint;if(!a||6!==a.length)throw Error("The image does not have an affine transformation.");return[a[3],a[4],a[5]]},getResolution:function(){if(!this.fileDirectory.ModelPixelScale)throw Error("The image does not have an affine transformation.");return[this.fileDirectory.ModelPixelScale[0],this.fileDirectory.ModelPixelScale[1],this.fileDirectory.ModelPixelScale[2]]},pixelIsArea:function(){return 1===this.geoKeys.GTRasterTypeGeoKey},
getBoundingBox:function(){var a=this.getOrigin(),b=this.getResolution(),c=a[0],a=a[1],d=c+b[0]*this.getWidth(),b=a+b[1]*this.getHeight();return[Math.min(c,d),Math.min(a,b),Math.max(c,d),Math.max(a,b)]}};var hf=function(){function a(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),Me=function(){function a(b){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this._dataView=new DataView(b)}hf(a,[{key:"getUint64",value:function(a,c){var b=this.getUint32(a,c);a=this.getUint32(a+4,c);return c?b<<32|a:a<<32|b}},{key:"getInt64",value:function(a,c){var b;if(c)return b=this.getInt32(a,c),a=this.getUint32(a+4,c),b<<32|a;b=this.getUint32(a,c);a=this.getInt32(a+4,c);return a<<32|b}},{key:"getUint8",value:function(a,c){return this._dataView.getUint8(a,c)}},{key:"getInt8",value:function(a,c){return this._dataView.getInt8(a,
c)}},{key:"getUint16",value:function(a,c){return this._dataView.getUint16(a,c)}},{key:"getInt16",value:function(a,c){return this._dataView.getInt16(a,c)}},{key:"getUint32",value:function(a,c){return this._dataView.getUint32(a,c)}},{key:"getInt32",value:function(a,c){return this._dataView.getInt32(a,c)}},{key:"getFloat32",value:function(a,c){return this._dataView.getFloat32(a,c)}},{key:"getFloat64",value:function(a,c){return this._dataView.getFloat64(a,c)}},{key:"buffer",get:function(){return this._dataView.buffer}}]);
return a}(),C=U.fieldTypes,oe=U.fieldTagNames,jf=U.arrayFields,kf=U.geoKeyNames;Ud.prototype={getOffset:function(a){return this.bigTiff?this.dataView.getUint64(a,this.littleEndian):this.dataView.getUint32(a,this.littleEndian)},getFieldTypeLength:function(a){switch(a){case C.BYTE:case C.ASCII:case C.SBYTE:case C.UNDEFINED:return 1;case C.SHORT:case C.SSHORT:return 2;case C.LONG:case C.SLONG:case C.FLOAT:return 4;case C.RATIONAL:case C.SRATIONAL:case C.DOUBLE:case C.LONG8:case C.SLONG8:case C.IFD8:return 8;
default:throw new RangeError("Invalid field type: "+a);}},getValues:function(a,b,c){var d,e,f=this.getFieldTypeLength(a),g;switch(a){case C.BYTE:case C.ASCII:case C.UNDEFINED:d=new Uint8Array(b);e=this.dataView.getUint8;break;case C.SBYTE:d=new Int8Array(b);e=this.dataView.getInt8;break;case C.SHORT:d=new Uint16Array(b);e=this.dataView.getUint16;break;case C.SSHORT:d=new Int16Array(b);e=this.dataView.getInt16;break;case C.LONG:d=new Uint32Array(b);e=this.dataView.getUint32;break;case C.SLONG:d=new Int32Array(b);
e=this.dataView.getInt32;break;case C.LONG8:case C.IFD8:d=Array(b);e=this.dataView.getUint64;break;case C.SLONG8:d=Array(b);e=this.dataView.getInt64;break;case C.RATIONAL:d=new Uint32Array(2*b);e=this.dataView.getUint32;break;case C.SRATIONAL:d=new Int32Array(2*b);e=this.dataView.getInt32;break;case C.FLOAT:d=new Float32Array(b);e=this.dataView.getFloat32;break;case C.DOUBLE:d=new Float64Array(b);e=this.dataView.getFloat64;break;default:throw new RangeError("Invalid field type: "+a);}if(a!==C.RATIONAL&&
a!==C.SRATIONAL)for(g=0;g<b;++g)d[g]=e.call(this.dataView,c+g*f,this.littleEndian);else for(g=0;g<b;g+=2)d[g]=e.call(this.dataView,c+g*f,this.littleEndian),d[g+1]=e.call(this.dataView,c+(g*f+4),this.littleEndian);return a===C.ASCII?String.fromCharCode.apply(null,d):d},getFieldValues:function(a,b,c,d){this.getFieldTypeLength(b)*c<=(this.bigTiff?8:4)||(d=this.getOffset(d));d=this.getValues(b,c,d);return 1===c&&-1===jf.indexOf(a)&&b!==C.RATIONAL&&b!==C.SRATIONAL?d[0]:d},parseGeoKeyDirectory:function(a){var b=
a.GeoKeyDirectory;if(!b)return null;for(var c={},d=4;d<4*b[3];d+=4){var e=kf[b[d]],f=b[d+1]?oe[b[d+1]]:null,g=b[d+2],h=b[d+3];if(f){f=a[f];if("undefined"===typeof f||null===f)throw Error("Could not get value of geoKey '"+e+"'.");"string"===typeof f?f=f.substring(h,h+g-1):f.subarray&&(f=f.subarray(h,h+g-1))}else f=h;c[e]=f}return c},parseFileDirectories:function(a){var b=a;for(a=[];0!==b;){for(var c=this.bigTiff?this.dataView.getUint64(b,this.littleEndian):this.dataView.getUint16(b,this.littleEndian),
d={},b=b+(this.bigTiff?8:2),e=0;e<c;b+=this.bigTiff?20:12,++e){var f=this.dataView.getUint16(b,this.littleEndian),g=this.dataView.getUint16(b+2,this.littleEndian),h=this.bigTiff?this.dataView.getUint64(b+4,this.littleEndian):this.dataView.getUint32(b+4,this.littleEndian);d[oe[f]]=this.getFieldValues(f,g,h,b+(this.bigTiff?12:8))}a.push([d,this.parseGeoKeyDirectory(d)]);b=this.getOffset(b)}return a},getImage:function(a){a=this.fileDirectories[a||0];if(!a)throw new RangeError("Invalid image index");
return new Td(a[0],a[1],this.dataView,this.littleEndian,this.cache)},getImageCount:function(){return this.fileDirectories.length}};var lf=Qa(function(a){var b=function(a,b){var c,d,g,h;if("string"===typeof a||a instanceof String)for(c=new ArrayBuffer(2*a.length),h=new Uint16Array(c),d=0,g=a.length;d<g;++d)h[d]=a.charCodeAt(d);else if(a instanceof ArrayBuffer)c=a;else throw Error("Invalid input data given.");return new Ud(c,b)};a.exports.parse=b;"undefined"!==typeof window&&(window.GeoTIFF={parse:b})}),
wc=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(wc,x);wc.prototype._run=function(){var a=this._getInput(0);if(a){var b=!1,c=lf.parse(a).getImage(),a=c.readRasters({interleave:!0}),d=c.getWidth(),e=c.getHeight(),c=c.getSamplesPerPixel();c==a.length/(d*e)&&(b=!0);b?this._addOutput(B).setData(a,d,e,c):console.warn("Tiff support is experimental and this file is not compatible.")}else console.warn('TiffDecoder requires an ArrayBuffer as input "0". Unable to continue.')};
var Qb=function(){return R.call(this)||this};$jscomp.inherits(Qb,R);Qb.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),b=a.getWidth()*a.getHeight(),c=a.getDataCopy();this._forEachPixelOfSuch(c,0,b,1);this._addOutput(B).setData(c,a.getWidth(),a.getHeight(),a.getComponentsPerPixel())}};Qb.prototype._forEachPixelOfSuch=function(a,b,c,d){if(this.hasEvent("pixel"))for(var e=this._getInput(),f=e.getData(),g=e.getComponentsPerPixel(),h;b<c;b+=d){var l=b*g,k=e.get2dPositionFrom1dIndex(b);
h=f.slice(l,l+g);if((h=this.triggerEvent("pixel",k,h))&&h.length==g)for(k=0;k<g;k++)a[l+k]=h[k]}else console.warn("No function to apply per pixel was specified.")};var xc=function(){var a;a=R.call(this)||this;a.addInputValidator(0,B);a.addInputValidator(1,B);return a};$jscomp.inherits(xc,R);xc.prototype._run=function(){if(this.hasValidInput()&&this.hasSameSizeInput()&&this.hasValidInput()){var a=this._getInput(0),b=this._getInput(1);if(1!=b.getComponentsPerPixel())console.warn("The scaling image must have one single band.");
else{for(var c=a.getWidth()*a.getHeight(),d=a.getComponentsPerPixel(),e=a.getDataCopy(),b=b.getData(),f=0;f<c;f++)for(var g=0;g<d;g++)e[f*d+g]*=b[f];this._addOutput(B).setData(e,a.getWidth(),a.getHeight())}}};var nf=Qa(function(a,b){(function(b,d){a.exports=d()})(oc,function(){function a(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function b(a,b){this.type=a;this.value=void 0!==b&&null!==b?b:0}function e(a,b){this.tokens=a;this.parser=b;this.unaryOps=b.unaryOps;this.binaryOps=b.binaryOps;
this.ternaryOps=b.ternaryOps;this.functions=b.functions}function f(a){return"string"===typeof a?JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):a}function g(a,c,d,e,f){for(var h=[],l=[],k,wa,n,m,p=0,mf=a.length;p<mf;p++)if(m=a[p],k=m.type,"INUMBER"===k)h.push(m);else if("IVAR"===k&&f.hasOwnProperty(m.value))m=new b("INUMBER",f[m.value]),h.push(m);else if("IOP2"===k&&1<h.length)wa=h.pop(),k=h.pop(),m=d[m.value],m=new b("INUMBER",m(k.value,wa.value)),h.push(m);else if("IOP3"===
k&&2<h.length)n=h.pop(),wa=h.pop(),k=h.pop(),"?"===m.value?h.push(k.value?wa.value:n.value):(m=e[m.value],m=new b("INUMBER",m(k.value,wa.value,n.value)),h.push(m));else if("IOP1"===k&&0<h.length)k=h.pop(),m=c[m.value],m=new b("INUMBER",m(k.value)),h.push(m);else if("IEXPR"===k){for(;0<h.length;)l.push(h.shift());l.push(new b("IEXPR",g(m.value,c,d,e,f)))}else if("IMEMBER"===k&&0<h.length)k=h.pop(),h.push(new b("INUMBER",k.value[m.value]));else{for(;0<h.length;)l.push(h.shift());l.push(m)}for(;0<h.length;)l.push(h.shift());
return l}function h(a,c,d){for(var e=[],f=0,g=a.length;f<g;f++){var l=a[f],k=l.type;if("IVAR"===k&&l.value===c)for(l=0;l<d.tokens.length;l++)k=d.tokens[l],k="IOP1"===k.type?X(k.value):"IOP2"===k.type?R(k.value):"IOP3"===k.type?da(k.value):new b(k.type,k.value),e.push(k);else"IEXPR"===k?e.push(new b("IEXPR",h(l.value,c,d))):e.push(l)}return e}function l(a,b,c){for(var d=[],e,f,g,h,k=0,wa=a.length;k<wa;k++)if(h=a[k],e=h.type,"INUMBER"===e)d.push(h.value);else if("IOP2"===e)f=d.pop(),e=d.pop(),h=b.binaryOps[h.value],
d.push(h(e,f));else if("IOP3"===e)g=d.pop(),f=d.pop(),e=d.pop(),"?"===h.value?d.push(l(e?f:g,b,c)):(h=b.ternaryOps[h.value],d.push(h(e,f,g)));else if("IVAR"===e)if(h.value in b.functions)d.push(b.functions[h.value]);else if(e=c[h.value],void 0!==e)d.push(e);else throw Error("undefined variable: "+h.value);else if("IOP1"===e)e=d.pop(),h=b.unaryOps[h.value],d.push(h(e));else if("IFUNCALL"===e){h=h.value;for(e=[];0<h--;)e.unshift(d.pop());h=d.pop();if(h.apply&&h.call)d.push(h.apply(void 0,e));else throw Error(h+
" is not a function");}else if("IEXPR"===e)d.push(h.value);else if("IMEMBER"===e)e=d.pop(),d.push(e[h.value]);else throw Error("invalid Expression");if(1<d.length)throw Error("invalid Expression (parity)");return d[0]}function k(a,b){for(var c=[],d,e,g,h,l=0,wa=a.length;l<wa;l++)if(h=a[l],d=h.type,"INUMBER"===d)"number"===typeof h.value&&0>h.value?c.push("("+h.value+")"):c.push(f(h.value));else if("IOP2"===d)e=c.pop(),d=c.pop(),h=h.value,b?"^"===h?c.push("Math.pow("+d+", "+e+")"):"and"===h?c.push("(!!"+
d+" && !!"+e+")"):"or"===h?c.push("(!!"+d+" || !!"+e+")"):"||"===h?c.push("(String("+d+") + String("+e+"))"):"=="===h?c.push("("+d+" === "+e+")"):"!="===h?c.push("("+d+" !== "+e+")"):c.push("("+d+" "+h+" "+e+")"):c.push("("+d+" "+h+" "+e+")");else if("IOP3"===d)if(g=c.pop(),e=c.pop(),d=c.pop(),h=h.value,"?"===h)c.push("("+d+" ? "+e+" : "+g+")");else throw Error("invalid Expression");else if("IVAR"===d)c.push(h.value);else if("IOP1"===d)d=c.pop(),h=h.value,"-"===h||"+"===h?c.push("("+h+d+")"):b?"not"===
h?c.push("(!"+d+")"):"!"===h?c.push("fac("+d+")"):c.push(h+"("+d+")"):"!"===h?c.push("("+d+"!)"):c.push("("+h+" "+d+")");else if("IFUNCALL"===d){e=h.value;for(d=[];0<e--;)d.unshift(c.pop());h=c.pop();c.push(h+"("+d.join(", ")+")")}else if("IMEMBER"===d)d=c.pop(),c.push(d+"."+h.value);else if("IEXPR"===d)c.push("("+k(h.value,b)+")");else throw Error("invalid Expression");if(1<c.length)throw Error("invalid Expression (parity)");return c[0]}function n(b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];
"IVAR"===f.type&&-1===a(c,f.value)?c.push(f.value):"IEXPR"===f.type&&n(f.value,c)}}function q(a,b){return Number(a)+Number(b)}function r(a,b){return a-b}function p(a,b){return a*b}function t(a,b){return a/b}function u(a,b){return a%b}function v(a,b){return""+a+b}function x(a,b){return a===b}function y(a,b){return a!==b}function z(a,b){return a>b}function A(a,b){return a<b}function B(a,b){return a>=b}function C(a,b){return a<=b}function D(a,b){return!(!a||!b)}function G(a,b){return!(!a&&!b)}function J(a){return(Math.exp(a)-
Math.exp(-a))/2}function K(a){return(Math.exp(a)+Math.exp(-a))/2}function M(a){return Infinity===a?1:-Infinity===a?-1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}function E(a){return-Infinity===a?a:Math.log(a+Math.sqrt(a*a+1))}function O(a){return Math.log(a+Math.sqrt(a*a-1))}function N(a){return Math.log((1+a)/(1-a))/2}function I(a){return Math.log(a)*Math.LOG10E}function P(a){return-a}function Q(a){return!a}function U(a){return 0>a?Math.ceil(a):Math.floor(a)}function W(a){return Math.random()*
(a||1)}function T(a){return Y(a+1)}function aa(a){return String(a).length}function Z(){for(var a=0,b=0,c=0,d=arguments.length;c<d;c++){var e=Math.abs(arguments[c]),f;b<e?(f=b/e,a=a*f*f+1,b=e):0<e?(f=e/b,a+=f*f):a+=e}return Infinity===b?Infinity:b*Math.sqrt(a)}function ba(a,b,c){return a?b:c}function Y(a){var b,c;c=a;if(isFinite(c)&&c===Math.round(c)){if(0>=a)return isFinite(a)?Infinity:NaN;if(171<a)return Infinity;c=a-2;for(--a;1<c;)a*=c,c--;0===a&&(a=1);return a}if(.5>a)return Math.PI/(Math.sin(Math.PI*
a)*Y(1-a));if(171.35<=a)return Infinity;if(85<a){c=a*a;b=c*a;var d=b*a,e=d*a;return Math.sqrt(2*Math.PI/a)*Math.pow(a/Math.E,a)*(1+1/(12*a)+1/(288*c)-139/(51840*b)-571/(2488320*d)+163879/(209018880*e)+5246819/(75246796800*e*a))}--a;c=fa[0];for(b=1;b<fa.length;++b)c+=fa[b]/(a+b);b=a+ga+.5;return Math.sqrt(2*Math.PI)*Math.pow(b,a+.5)*Math.exp(-b)*c}function ca(a,b,c,d){this.type=a;this.value=b;this.line=c;this.column=d}function ea(a,b,c,d,e){this.column=this.line=this.pos=0;this.current=null;this.unaryOps=
b;this.binaryOps=c;this.ternaryOps=d;this.consts=e;this.expression=a;this.savedPosition=0;this.savedCurrent=null;this.savedColumn=this.savedLine=0}function X(a){var c=ia[a];c||(c=ia[a]=new b("IOP1",a));return c}function R(a){var c=ja[a];c||(c=ja[a]=new b("IOP2",a));return c}function da(a){var c=ka[a];c||(c=ka[a]=new b("IOP3",a));return c}function S(a,b){this.parser=a;this.tokens=b;this.nextToken=this.current=null;this.next();this.savedNextToken=this.savedCurrent=null}function V(){this.unaryOps={sin:Math.sin,
cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||J,cosh:Math.cosh||K,tanh:Math.tanh||M,asinh:Math.asinh||E,acosh:Math.acosh||O,atanh:Math.atanh||N,sqrt:Math.sqrt,log:Math.log,ln:Math.log,lg:Math.log10||I,log10:Math.log10||I,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||U,"-":P,"+":Number,exp:Math.exp,not:Q,length:aa,"!":T};this.binaryOps={"+":q,"-":r,"*":p,"/":t,"%":u,"^":Math.pow,"||":v,"==":x,"!=":y,">":z,"<":A,">=":B,"<=":C,
and:D,or:G};this.ternaryOps={"?":ba};this.functions={random:W,fac:T,min:Math.min,max:Math.max,hypot:Math.hypot||Z,pyt:Math.hypot||Z,pow:Math.pow,atan2:Math.atan2,"if":ba,gamma:Y};this.consts={E:Math.E,PI:Math.PI,"true":!0,"false":!1}}b.prototype.toString=function(){switch(this.type){case "INUMBER":case "IOP1":case "IOP2":case "IOP3":case "IVAR":return this.value;case "IFUNCALL":return"CALL "+this.value;case "IMEMBER":return"."+this.value;default:return"Invalid Instruction"}};e.prototype.simplify=
function(a){a=a||{};return new e(g(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,a),this.parser)};e.prototype.substitute=function(a,b){b instanceof e||(b=this.parser.parse(String(b)));return new e(h(this.tokens,a,b),this.parser)};e.prototype.evaluate=function(a){a=a||{};return l(this.tokens,this,a)};e.prototype.toString=function(){return k(this.tokens,!1)};e.prototype.symbols=function(){var a=[];n(this.tokens,a);return a};e.prototype.variables=function(){var a=[];n(this.tokens,a);var b=
this.functions;return a.filter(function(a){return!(a in b)})};e.prototype.toJSFunction=function(a,b){var c=this,d=new Function(a,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+k(this.simplify(b).tokens,!0)+"; }");return function(){return d.apply(c,arguments)}};var ga=4.7421875,fa=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,
-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];ca.prototype.toString=function(){return this.type+": "+this.value};ea.prototype.newToken=function(a,b,c,d){return new ca(a,b,null!=c?c:this.line,null!=d?d:this.column)};ea.prototype.save=function(){this.savedPosition=this.pos;this.savedCurrent=this.current;this.savedLine=this.line;this.savedColumn=this.column};ea.prototype.restore=function(){this.pos=this.savedPosition;
this.current=this.savedCurrent;this.line=this.savedLine;this.column=this.savedColumn};ea.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken("TEOF","EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isComma()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};ea.prototype.isString=
function(){var a=!1,b=this.line,c=this.column,d=this.pos,e=this.expression.charAt(d);if("'"===e||'"'===e){this.pos++;this.column++;for(var f=this.expression.indexOf(e,d+1);0<=f&&this.pos<this.expression.length;){this.pos=f+1;if("\\"!==this.expression.charAt(f-1)){a=this.expression.substring(d+1,f);this.current=this.newToken("TSTRING",this.unescape(a),b,c);b=a.indexOf("\n");for(c=-1;0<=b;)this.line++,this.column=0,c=b,b=a.indexOf("\n",b+1);this.column+=a.length-c;a=!0;break}f=this.expression.indexOf(e,
f+1)}}return a};ea.prototype.isParen=function(){var a=this.expression.charAt(this.pos);return"("===a||")"===a?(this.current=this.newToken("TPAREN",a),this.pos++,this.column++,!0):!1};ea.prototype.isComma=function(){return","===this.expression.charAt(this.pos)?(this.current=this.newToken("TCOMMA",","),this.pos++,this.column++,!0):!1};ea.prototype.isConst=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||
"_"!==c&&"."!==c&&("0">c||"9"<c)))break}return b>a&&(a=this.expression.substring(a,b),a in this.consts)?(this.current=this.newToken("TNUMBER",this.consts[a]),this.pos+=a.length,this.column+=a.length,!0):!1};ea.prototype.isNamedOp=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&("0">c||"9"<c)))break}return b>a&&(a=this.expression.substring(a,b),a in this.binaryOps||a in this.unaryOps||a in
this.ternaryOps)?(this.current=this.newToken("TOP",a),this.pos+=a.length,this.column+=a.length,!0):!1};ea.prototype.isName=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&("0">c||"9"<c)))break}return b>a?(a=this.expression.substring(a,b),this.current=this.newToken("TNAME",a),this.pos+=a.length,this.column+=a.length,!0):!1};ea.prototype.isWhitespace=function(){for(var a=!1,b=this.expression.charAt(this.pos);" "===
b||"\t"===b||"\n"===b||"\r"===b;){a=!0;this.pos++;this.column++;"\n"===b&&(this.line++,this.column=0);if(this.pos>=this.expression.length)break;b=this.expression.charAt(this.pos)}return a};var ha=/^[0-9a-f]{4}$/i;ea.prototype.unescape=function(a){var b=a.indexOf("\\");if(0>b)return a;for(var c=a.substring(0,b);0<=b;){var d=a.charAt(++b);switch(d){case "'":c+="'";break;case '"':c+='"';break;case "\\":c+="\\";break;case "/":c+="/";break;case "b":c+="\b";break;case "f":c+="\f";break;case "n":c+="\n";
break;case "r":c+="\r";break;case "t":c+="\t";break;case "u":d=a.substring(b+1,b+5);ha.test(d)||this.parseError("Illegal escape sequence: \\u"+d);c+=String.fromCharCode(parseInt(d,16));b+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+d+'"');}++b;d=a.indexOf("\\",b);c+=a.substring(b,0>d?a.length:d);b=d}return c};ea.prototype.isComment=function(){if("/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)){var a=this.pos;this.pos=this.expression.indexOf("*/",
this.pos)+2;1===this.pos&&(this.pos=this.expression.length);for(var a=this.expression.substring(a,this.pos),b=a.indexOf("\n");0<=b;)this.line++,this.column=a.length-b,b=a.indexOf("\n",b+1);return!0}return!1};ea.prototype.isNumber=function(){for(var a=!1,b=this.pos,c=b,d=b,e=this.column,f=e,g=!1,h=!1,k;b<this.expression.length;)if(k=this.expression.charAt(b),"0"<=k&&"9">=k||!g&&"."===k)"."===k?g=!0:h=!0,b++,e++,a=h;else break;a&&(d=b,f=e);if("e"===k||"E"===k){b++;e++;g=!0;for(h=!1;b<this.expression.length;){k=
this.expression.charAt(b);if(!g||"+"!==k&&"-"!==k)if("0"<=k&&"9">=k)h=!0,g=!1;else break;else g=!1;b++;e++}h||(b=d,e=f)}a?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(c,b))),this.pos=b,this.column=e):(this.pos=d,this.column=f);return a};ea.prototype.isOperator=function(){var a=this.expression.charAt(this.pos);if("+"===a||"-"===a||"*"===a||"/"===a||"%"===a||"^"===a||"?"===a||":"===a||"."===a)this.current=this.newToken("TOP",a);else if("\u2219"===a||"\u2022"===a)this.current=
this.newToken("TOP","*");else if(">"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP",">="),this.pos++,this.column++):this.current=this.newToken("TOP",">");else if("<"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP","<="),this.pos++,this.column++):this.current=this.newToken("TOP","<");else if("|"===a)if("|"===this.expression.charAt(this.pos+1))this.current=this.newToken("TOP","||"),this.pos++,this.column++;else return!1;else if("="===a)if("="===
this.expression.charAt(this.pos+1))this.current=this.newToken("TOP","=="),this.pos++,this.column++;else return!1;else if("!"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP","!="),this.pos++,this.column++):this.current=this.newToken("TOP",a);else return!1;this.pos++;this.column++;return!0};ea.prototype.parseError=function(a){throw Error("parse error ["+(this.line+1)+":"+(this.column+1)+"]: "+a);};var ia={},ja={},ka={};S.prototype.next=function(){this.current=this.nextToken;
return this.nextToken=this.tokens.next()};S.prototype.tokenMatches=function(b,c){return"undefined"===typeof c?!0:Array.isArray(c)?0<=a(c,b.value):"function"===typeof c?c(b):b.value===c};S.prototype.save=function(){this.savedCurrent=this.current;this.savedNextToken=this.nextToken;this.tokens.save()};S.prototype.restore=function(){this.tokens.restore();this.current=this.savedCurrent;this.nextToken=this.savedNextToken};S.prototype.accept=function(a,b){return this.nextToken.type===a&&this.tokenMatches(this.nextToken,
b)?(this.next(),!0):!1};S.prototype.expect=function(a,b){if(!this.accept(a,b))throw Error("parse error ["+this.tokens.line+":"+this.tokens.column+"]: Expected "+(b||a));};S.prototype.parseAtom=function(a){if(this.accept("TNAME"))a.push(new b("IVAR",this.current.value));else if(this.accept("TNUMBER"))a.push(new b("INUMBER",this.current.value));else if(this.accept("TSTRING"))a.push(new b("INUMBER",this.current.value));else if(this.accept("TPAREN","("))this.parseExpression(a),this.expect("TPAREN",")");
else throw Error("unexpected "+this.nextToken);};S.prototype.parseExpression=function(a){this.parseConditionalExpression(a)};S.prototype.parseConditionalExpression=function(a){for(this.parseOrExpression(a);this.accept("TOP","?");){var c=[],d=[];this.parseConditionalExpression(c);this.expect("TOP",":");this.parseConditionalExpression(d);a.push(new b("IEXPR",c));a.push(new b("IEXPR",d));a.push(da("?"))}};S.prototype.parseOrExpression=function(a){for(this.parseAndExpression(a);this.accept("TOP","or");)this.parseAndExpression(a),
a.push(R("or"))};S.prototype.parseAndExpression=function(a){for(this.parseComparison(a);this.accept("TOP","and");)this.parseComparison(a),a.push(R("and"))};S.prototype.parseComparison=function(a){for(this.parseAddSub(a);this.accept("TOP","== != < <= >= >".split(" "));){var b=this.current;this.parseAddSub(a);a.push(R(b.value))}};S.prototype.parseAddSub=function(a){for(this.parseTerm(a);this.accept("TOP",["+","-","||"]);){var b=this.current;this.parseTerm(a);a.push(R(b.value))}};S.prototype.parseTerm=
function(a){for(this.parseFactor(a);this.accept("TOP",["*","/","%"]);){var b=this.current;this.parseFactor(a);a.push(R(b.value))}};S.prototype.parseFactor=function(a){var b=this.tokens.unaryOps;this.save();if(this.accept("TOP",function(a){return a.value in b}))if("-"!==this.current.value&&"+"!==this.current.value&&"TPAREN"===this.nextToken.type&&"("===this.nextToken.value)this.restore(),this.parseExponential(a);else{var c=this.current;this.parseFactor(a);a.push(X(c.value))}else this.parseExponential(a)};
S.prototype.parseExponential=function(a){for(this.parsePostfixExpression(a);this.accept("TOP","^");)this.parseFactor(a),a.push(R("^"))};S.prototype.parsePostfixExpression=function(a){for(this.parseFunctionCall(a);this.accept("TOP","!");)a.push(X("!"))};S.prototype.parseFunctionCall=function(a){var c=this.tokens.unaryOps;if(this.accept("TOP",function(a){return a.value in c})){var d=this.current;this.parseAtom(a);a.push(X(d.value))}else for(this.parseMemberExpression(a);this.accept("TPAREN","(");)this.accept("TPAREN",
")")?a.push(new b("IFUNCALL",0)):(d=this.parseArgumentList(a),a.push(new b("IFUNCALL",d)))};S.prototype.parseArgumentList=function(a){for(var b=0;!this.accept("TPAREN",")");)for(this.parseExpression(a),++b;this.accept("TCOMMA");)this.parseExpression(a),++b;return b};S.prototype.parseMemberExpression=function(a){for(this.parseAtom(a);this.accept("TOP",".");)this.expect("TNAME"),a.push(new b("IMEMBER",this.current.value))};V.parse=function(a){return(new V).parse(a)};V.evaluate=function(a,b){return V.parse(a).evaluate(b)};
V.prototype={parse:function(a){var b=[];a=new S(this,new ea(a,this.unaryOps,this.binaryOps,this.ternaryOps,this.consts));a.parseExpression(b);a.expect("TEOF","EOF");return new e(b,this)},evaluate:function(a,b){return this.parse(a).evaluate(b)}};return{Parser:V,Expression:e}})}),yc=function(){return R.call(this)||this};$jscomp.inherits(yc,R);yc.prototype._run=function(){if(!this.hasMetadata("expression"))console.warn('A filter of type ImageBlendExpressionFilter requires a blending expression.\nUse \'setMetadata("expression", "...")\' to set it.');
else if(this.hasSameNcppInput()&&this.hasSameSizeInput())if(this.getNumberOfInputs()){for(var a=this.getInputCategories(),b=this._getInput(a[0]),c=b.getDataCopy(),d=(new nf.Parser).parse(this.getMetadata("expression")),e=0;e<c.length;e++){for(var f={},g=0;g<a.length;g++)f[a[g]]=this._getInput(a[g]).getData()[e];c[e]=d.evaluate(f)}this._addOutput(B).setData(c,b.getWidth(),b.getHeight())}else console.warn("A filter of type ImageBlendExpressionFilter requires at least one input.")};var zc=function(){var a;
a=R.call(this)||this;a.addInputValidator(0,B);a.addInputValidator(1,B);return a};$jscomp.inherits(zc,R);zc.prototype._run=function(){if(!this.hasValidInput())console.warn("A filter of type MultiplyImageFilter requires 1 input of category '0' and one input of category '1'.");else if(this.hasSameNcppInput()&&this.hasSameSizeInput()){this.addTimeRecord("step1");var a=this._getInput(0),b=this._getInput(1).getData();this.addTimeRecord("step1.5");var c=a.getDataCopy();this.addTimeRecord("step2");for(var d=
0;d<c.length;d++)c[d]*=b[d];this.addTimeRecord("step3");this._addOutput(B).setData(c,a.getWidth(),a.getHeight());this.addTimeRecord("step4");this.getTime("step1","step1.5",!0);this.getTime("step1.5","step2",!0);this.getTime("step2","step3",!0);this.getTime("step3","step4",!0)}};var Ac=function(){var a;a=R.call(this)||this;a.setMetadata("threshold",128);a.setMetadata("lowValue",0);a.setMetadata("highValue",255);a.setMetadata("preserveAlpha",!0);return a};$jscomp.inherits(Ac,R);Ac.prototype._run=function(){if(this.hasValidInput()){var a=
this._getInput(0),b=a.clone(),c=a.getComponentsPerPixel(),a=this.getMetadata("threshold"),d=this.getMetadata("lowValue"),e=this.getMetadata("highValue"),f=b.getData();if(1==c||3==c||4==c){if(this.getMetadata("preserveAlpha")&&4==c)for(c=0;c<f.length;c++)3!=c%4&&(f[c]=f[c]<a?d:e);else for(c=0;c<f.length;c++)f[c]=f[c]<a?d:e;this._output[0]=b}else console.warn("The input data must have 1, 3 or 4 components per pixel.")}};var Bc=function(){var a;a=x.call(this)||this;a.addInputValidator(0,K);a.setMetadata("maxWidth",
4096);a.setMetadata("maxHeight",4096);a.setMetadata("axis","xspace");return a};$jscomp.inherits(Bc,x);Bc.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0),b=a.getMetadata(this.getMetadata("axis"));if(b){var c=b.space_length,d=b.width,b=b.height,e=Math.floor(this.getMetadata("maxWidth")/d),f=Math.floor(this.getMetadata("maxHeight")/b),g=e*d,h=f*b,f=e*f;1==Math.ceil(c/f)&&(h=Math.ceil(c/e)*b);this.setMetadata("gridWidth",g/d);this.setMetadata("gridHeight",h/b);for(var l=0,k=
0,n=0,q=null;k<c;k++){var r=a.getSlice(this.getMetadata("axis"),k);0==k%f&&(q=new B({width:g,height:h,color:[0]}),this._output[l]=q,n=0,l++);var p=n%e,t=Math.floor(n/e);n++;for(var p=p*d,t=t*b,u=0;u<b;u++)for(var v=0;v<d;v++)q.setPixel({x:p+v,y:t+u},r.getPixel({x:v,y:u}))}}else console.warn("Sampling axis for mosaicing was not poperly set. Has to be 'xspace', 'yspace' or 'zspace'.")}};l.PixpipeObject=T;l.Filter=x;l.Image2D=B;l.Image3D=K;l.ImageToImageFilter=R;l.MniVolume=pa;l.CanvasImageWriter=rb;
l.UrlImageReader=Lb;l.FileImageReader=Mb;l.FileToArrayBufferReader=wb;l.UrlToArrayBufferReader=Nb;l.Minc2Decoder=r;l.NiftiDecoder=Oa;l.PixpEncoder=xb;l.PixpDecoder=Ob;l.Image3DGenericDecoder=rc;l.TiffDecoder=wc;l.ForEachPixelImageFilter=Qb;l.SpectralScaleImageFilter=xc;l.ImageBlendExpressionFilter=yc;l.MultiplyImageFilter=zc;l.SimpleThresholdFilter=Ac;l.Image3DToMosaicFilter=Bc;Object.defineProperty(l,"__esModule",{value:!0})});
