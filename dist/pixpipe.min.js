// Build date: 2017-0427T15:52:02

/*
* Author   Jonathan Lurie - http://me.jonahanlurie.fr
* License  MIT
* Link      https://github.com/jonathanlurie/pixpipejs
* Lab       MCIN - Montreal Neurological Institute
*/
/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js  Based on ndef.parser, by Raphael Graf(r@undefined.ch)
 http://www.undefined.ch/mparser/index.html

 Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)

 You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
 to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
 but don't feel like you have to let me know or ask permission.
*/
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.inherits=function(f,r){function k(){}k.prototype=r.prototype;f.prototype=new k;f.prototype.constructor=f;for(var u in r)if(Object.defineProperties){var w=Object.getOwnPropertyDescriptor(r,u);w&&Object.defineProperty(f,u,w)}else f[u]=r[u]};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,r,k){if(k.get||k.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[r]=k.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var r=0;return $jscomp.iteratorPrototype(function(){return r<f.length?{done:!1,value:f[r++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();var r=f[Symbol.iterator];return r?r.call(f):$jscomp.arrayIterator(f)};
$jscomp.iteratorFromArray=function(f,r){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var k=0,u={next:function(){if(k<f.length){var w=k++;return{value:r(w,f[w]),done:!1}}u.next=function(){return{done:!0,value:void 0}};return u.next()}};u[Symbol.iterator]=function(){return u};return u};
$jscomp.polyfill=function(f,r,k,u){if(r){k=$jscomp.global;f=f.split(".");for(u=0;u<f.length-1;u++){var w=f[u];w in k||(k[w]={});k=k[w]}f=f[f.length-1];u=k[f];r=r(u);r!=u&&null!=r&&$jscomp.defineProperty(k,f,{configurable:!0,writable:!0,value:r})}};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(f,k,u){var r=this.length||0;0>k&&(k=Math.max(0,r+k));if(null==u||u>r)u=r;u=Number(u);0>u&&(u=Math.max(0,r+u));for(k=Number(k||0);k<u;k++)this[k]=f;return this}},"es6-impl","es3");$jscomp.polyfill("Math.log2",function(f){return f?f:function(f){return Math.log(f)/Math.LN2}},"es6-impl","es3");
$jscomp.findInternal=function(f,r,k){f instanceof String&&(f=String(f));for(var u=f.length,w=0;w<u;w++){var A=f[w];if(r.call(k,A,w,f))return{i:w,v:A}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,k){return $jscomp.findInternal(this,f,k).v}},"es6-impl","es3");$jscomp.owns=function(f,r){return Object.prototype.hasOwnProperty.call(f,r)};
$jscomp.polyfill("WeakMap",function(f){function r(f){$jscomp.owns(f,u)||$jscomp.defineProperty(f,u,{value:{}})}function k(f){var k=Object[f];k&&(Object[f]=function(f){r(f);return k(f)})}if(function(){if(!f||!Object.seal)return!1;try{var r=Object.seal({}),k=Object.seal({}),u=new f([[r,2],[k,3]]);if(2!=u.get(r)||3!=u.get(k))return!1;u.delete(r);u.set(k,4);return!u.has(r)&&4==u.get(k)}catch(Ga){return!1}}())return f;var u="$jscomp_hidden_"+Math.random().toString().substring(2);k("freeze");k("preventExtensions");
k("seal");var w=0,A=function(f){this.id_=(w+=Math.random()+1).toString();if(f){$jscomp.initSymbol();$jscomp.initSymbolIterator();f=$jscomp.makeIterator(f);for(var r;!(r=f.next()).done;)r=r.value,this.set(r[0],r[1])}};A.prototype.set=function(f,k){r(f);if(!$jscomp.owns(f,u))throw Error("WeakMap key fail: "+f);f[u][this.id_]=k;return this};A.prototype.get=function(f){return $jscomp.owns(f,u)?f[u][this.id_]:void 0};A.prototype.has=function(f){return $jscomp.owns(f,u)&&$jscomp.owns(f[u],this.id_)};A.prototype.delete=
function(f){return $jscomp.owns(f,u)&&$jscomp.owns(f[u],this.id_)?delete f[u][this.id_]:!1};return A},"es6-impl","es3");$jscomp.MapEntry=function(){};$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(f){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!f||!f.prototype.entries||"function"!=typeof Object.seal)return!1;try{var r=Object.seal({x:4}),k=new f($jscomp.makeIterator([[r,"s"]]));if("s"!=k.get(r)||1!=k.size||k.get({x:4})||k.set({x:4},"t")!=k||2!=k.size)return!1;var u=k.entries(),w=u.next();if(w.done||w.value[0]!=r||"s"!=w.value[1])return!1;w=u.next();return w.done||4!=w.value[0].x||"t"!=w.value[1]||!u.next().done?!1:!0}catch(Pb){return!1}}())return f;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var r=new WeakMap,k=function(f){this.data_={};this.head_=A();this.size=0;if(f){f=$jscomp.makeIterator(f);for(var r;!(r=f.next()).done;)r=r.value,this.set(r[0],r[1])}};k.prototype.set=function(f,r){var k=u(this,f);k.list||(k.list=this.data_[k.id]=[]);k.entry?k.entry.value=r:(k.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:f,value:r},k.list.push(k.entry),this.head_.previous.next=k.entry,this.head_.previous=k.entry,this.size++);return this};k.prototype.delete=
function(f){f=u(this,f);return f.entry&&f.list?(f.list.splice(f.index,1),f.list.length||delete this.data_[f.id],f.entry.previous.next=f.entry.next,f.entry.next.previous=f.entry.previous,f.entry.head=null,this.size--,!0):!1};k.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=A();this.size=0};k.prototype.has=function(f){return!!u(this,f).entry};k.prototype.get=function(f){return(f=u(this,f).entry)&&f.value};k.prototype.entries=function(){return w(this,function(f){return[f.key,
f.value]})};k.prototype.keys=function(){return w(this,function(f){return f.key})};k.prototype.values=function(){return w(this,function(f){return f.value})};k.prototype.forEach=function(f,r){for(var k=this.entries(),u;!(u=k.next()).done;)u=u.value,f.call(r,u[1],u[0],this)};k.prototype[Symbol.iterator]=k.prototype.entries;var u=function(f,k){var u;u=k&&typeof k;"object"==u||"function"==u?r.has(k)?u=r.get(k):(u=""+ ++T,r.set(k,u)):u="p_"+k;var w=f.data_[u];if(w&&$jscomp.owns(f.data_,u))for(f=0;f<w.length;f++){var A=
w[f];if(k!==k&&A.key!==A.key||k===A.key)return{id:u,list:w,index:f,entry:A}}return{id:u,list:w,index:-1,entry:void 0}},w=function(f,r){var k=f.head_;return $jscomp.iteratorPrototype(function(){if(k){for(;k.head!=f.head_;)k=k.previous;for(;k.next!=k.head;)return k=k.next,{done:!1,value:r(k)};k=null}return{done:!0,value:void 0}})},A=function(){var f={};return f.previous=f.next=f.head=f},T=0;return k},"es6-impl","es3");
$jscomp.polyfill("Object.assign",function(f){return f?f:function(f,k){for(var r=1;r<arguments.length;r++){var w=arguments[r];if(w)for(var A in w)$jscomp.owns(w,A)&&(f[A]=w[A])}return f}},"es6-impl","es3");$jscomp.polyfill("Math.sinh",function(f){if(f)return f;var r=Math.exp;return function(f){f=Number(f);return 0===f?f:(r(f)-r(-f))/2}},"es6-impl","es3");$jscomp.polyfill("Math.cosh",function(f){if(f)return f;var r=Math.exp;return function(f){f=Number(f);return(r(f)+r(-f))/2}},"es6-impl","es3");
$jscomp.polyfill("Math.tanh",function(f){return f?f:function(f){f=Number(f);if(0===f)return f;var k=Math.exp(-2*Math.abs(f)),k=(1-k)/(1+k);return 0>f?-k:k}},"es6-impl","es3");$jscomp.polyfill("Math.asinh",function(f){return f?f:function(f){f=Number(f);if(0===f)return f;var k=Math.log(Math.abs(f)+Math.sqrt(f*f+1));return 0>f?-k:k}},"es6-impl","es3");$jscomp.polyfill("Math.acosh",function(f){return f?f:function(f){f=Number(f);return Math.log(f+Math.sqrt(f*f-1))}},"es6-impl","es3");
$jscomp.polyfill("Math.log1p",function(f){return f?f:function(f){f=Number(f);if(.25>f&&-.25<f){for(var k=f,r=1,w=f,A=0,T=1;A!=w;)k*=f,T*=-1,w=(A=w)+T*k/++r;return w}return Math.log(1+f)}},"es6-impl","es3");$jscomp.polyfill("Math.atanh",function(f){if(f)return f;var r=Math.log1p;return function(f){f=Number(f);return(r(f)-r(-f))/2}},"es6-impl","es3");$jscomp.polyfill("Math.log10",function(f){return f?f:function(f){return Math.log(f)/Math.LN10}},"es6-impl","es3");
$jscomp.polyfill("Math.trunc",function(f){return f?f:function(f){f=Number(f);if(isNaN(f)||Infinity===f||-Infinity===f||0===f)return f;var k=Math.floor(Math.abs(f));return 0>f?-k:k}},"es6-impl","es3");
$jscomp.polyfill("Math.hypot",function(f){return f?f:function(f,k,u){f=Number(f);k=Number(k);var r,A,T,aa=Math.max(Math.abs(f),Math.abs(k));for(r=2;r<arguments.length;r++)aa=Math.max(aa,Math.abs(arguments[r]));if(1E100<aa||1E-100>aa){f/=aa;k/=aa;T=f*f+k*k;for(r=2;r<arguments.length;r++)A=Number(arguments[r])/aa,T+=A*A;return Math.sqrt(T)*aa}T=f*f+k*k;for(r=2;r<arguments.length;r++)A=Number(arguments[r]),T+=A*A;return Math.sqrt(T)}},"es6-impl","es3");
(function(f,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):r(f.pixpipe=f.pixpipe||{})})(this,function(f){function r(){throw Error("setTimeout has not been defined");}function k(){throw Error("clearTimeout has not been defined");}function u(a){if(ga===setTimeout)return setTimeout(a,0);if((ga===r||!ga)&&setTimeout)return ga=setTimeout,setTimeout(a,0);try{return ga(a,0)}catch(b){try{return ga.call(null,a,0)}catch(c){return ga.call(this,
a,0)}}}function w(a){if(ha===clearTimeout)return clearTimeout(a);if((ha===k||!ha)&&clearTimeout)return ha=clearTimeout,clearTimeout(a);try{return ha(a)}catch(b){try{return ha.call(null,a)}catch(c){return ha.call(this,a)}}}function A(){za&&pa&&(za=!1,pa.length?U=pa.concat(U):Wa=-1,U.length&&T())}function T(){if(!za){var a=u(A);za=!0;for(var b=U.length;b;){pa=U;for(U=[];++Wa<b;)pa&&pa[Wa].run();Wa=-1;b=U.length}pa=null;za=!1;w(a)}}function aa(a,b){this.fun=a;this.array=b}function oa(){}function Ga(a,
b){return b={exports:{}},a(b,b.exports),b.exports}function Ob(){hb=!0;for(var a=0;64>a;++a)ba[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],ca["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;ca[45]=62;ca[95]=63}function Pb(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(ba[b>>18&63]+ba[b>>12&63]+ba[b>>6&63]+ba[b&63]);return d.join("")}function Qb(a){hb||Ob();for(var b=a.length,c=b%3,d="",e=[],g=0,h=b-c;g<h;g+=16383)e.push(Pb(a,
g,g+16383>h?h:g+16383));1===c?(a=a[b-1],d+=ba[a>>2],d+=ba[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=ba[a>>10],d+=ba[a>>4&63],d+=ba[a<<2&63],d+="=");e.push(d);return e.join("")}function Xa(a,b,c,d,e){var g;g=8*e-d-1;var h=(1<<g)-1,E=h>>1,f=-7;e=c?e-1:0;var m=c?-1:1,n=a[b+e];e+=m;c=n&(1<<-f)-1;n>>=-f;for(f+=g;0<f;c=256*c+a[b+e],e+=m,f-=8);g=c&(1<<-f)-1;c>>=-f;for(f+=d;0<f;g=256*g+a[b+e],e+=m,f-=8);if(0===c)c=1-E;else{if(c===h)return g?NaN:Infinity*(n?-1:1);g+=Math.pow(2,d);c-=E}return(n?-1:
1)*g*Math.pow(2,c-d)}function Rb(a,b,c,d,e,g){var h,E=8*g-e-1,f=(1<<E)-1,m=f>>1,n=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;g=d?0:g-1;var V=d?1:-1,k=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=f):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(h=Math.pow(2,-d))&&(d--,h*=2),b=1<=d+m?b+n/h:b+n*Math.pow(2,1-m),2<=b*h&&(d++,h/=2),d+m>=f?(b=0,d=f):1<=d+m?(b=(b*h-1)*Math.pow(2,e),d+=m):(b=b*Math.pow(2,m-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+g]=b&255,g+=V,b/=256,e-=8);d=d<<e|b;for(E+=
e;0<E;a[c+g]=d&255,g+=V,d/=256,E-=8);a[c+g-V]|=128*k}function ia(a,b){if((l.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");l.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=l.prototype):(null===a&&(a=new l(b)),a.length=b);return a}function l(a,b,c){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return ib(this,
a)}return Sb(this,a,b,c)}function Sb(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);l.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=l.prototype):
a=jb(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!l.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=Tb(b,a)|0;d=ia(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Xc(a,b)}function Ub(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function ib(a,b){Ub(b);a=ia(a,0>b?0:kb(b)|0);if(!l.TYPED_ARRAY_SUPPORT)for(var c=
0;c<b;++c)a[c]=0;return a}function jb(a,b){var c=0>b.length?0:kb(b.length)|0;a=ia(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Xc(a,b){if(da(b)){var c=kb(b.length)|0;a=ia(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?ia(a,0):jb(a,b);if("Buffer"===b.type&&Vb(b.data))return jb(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}function kb(a){if(a>=(l.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(l.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function da(a){return!(null==a||!a._isBuffer)}function Tb(a,b){if(da(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;
if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return Ya(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return Wb(a).length;default:if(d)return Ya(a).length;b=(""+b).toLowerCase();d=!0}}function Yc(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";
for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return Xb(this,b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Qb(this):
Qb(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function qa(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function Yb(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=
a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=l.from(b,d));if(da(b))return 0===b.length?-1:Zb(a,b,c,d,e);if("number"===typeof b)return b&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):Zb(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function Zb(a,b,c,d,e){function g(a,b){return 1===h?a[b]:a.readUInt16BE(b*
h)}var h=1,E=a.length,f=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;h=2;E/=2;f/=2;c/=2}if(e)for(d=-1;c<E;c++)if(g(a,c)===g(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===f)return d*h}else-1!==d&&(c-=c-d),d=-1;else for(c+f>E&&(c=E-f);0<=c;c--){E=!0;for(d=0;d<f;d++)if(g(a,c+d)!==g(b,d)){E=!1;break}if(E)return c}return-1}function Xb(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],g=null,h=239<e?
4:223<e?3:191<e?2:1;if(b+h<=c){var E,f,m;switch(h){case 1:128>e&&(g=e);break;case 2:E=a[b+1];128===(E&192)&&(e=(e&31)<<6|E&63,127<e&&(g=e));break;case 3:E=a[b+1];f=a[b+2];128===(E&192)&&128===(f&192)&&(e=(e&15)<<12|(E&63)<<6|f&63,2047<e&&(55296>e||57343<e)&&(g=e));break;case 4:E=a[b+1],f=a[b+2],m=a[b+3],128===(E&192)&&128===(f&192)&&128===(m&192)&&(e=(e&15)<<18|(E&63)<<12|(f&63)<<6|m&63,65535<e&&1114112>e&&(g=e))}}null===g?(g=65533,h=1):65535<g&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|g&1023);
d.push(g);b+=h}a=d.length;if(a<=$b)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=$b));d=c}return d}function J(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function W(a,b,c,d,e,g){if(!da(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<g)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");
}function Za(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,g=Math.min(a.length-c,2);e<g;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function $a(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,g=Math.min(a.length-c,4);e<g;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function ac(a,b,c,d,e,g){if(c+d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function bc(a,b,c,d,e){e||ac(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);Rb(a,b,c,d,23,4);return c+4}function cc(a,
b,c,d,e){e||ac(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);Rb(a,b,c,d,52,8);return c+8}function Ya(a,b){b=b||Infinity;for(var c,d=a.length,e=null,g=[],h=0;h<d;++h){c=a.charCodeAt(h);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&g.push(239,191,189);continue}else if(h+1===d){-1<(b-=3)&&g.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&g.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&g.push(239,191,189);e=null;if(128>c){if(0>--b)break;
g.push(c)}else if(2048>c){if(0>(b-=2))break;g.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;g.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;g.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return g}function dc(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function Wb(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(Zc,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";hb||Ob();
var b,c,d,e,g;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");e="="===a[b-2]?2:"="===a[b-1]?1:0;g=new $c(3*b/4-e);c=0<e?b-4:b;var h=0;for(b=0;b<c;b+=4)d=ca[a.charCodeAt(b)]<<18|ca[a.charCodeAt(b+1)]<<12|ca[a.charCodeAt(b+2)]<<6|ca[a.charCodeAt(b+3)],g[h++]=d>>16&255,g[h++]=d>>8&255,g[h++]=d&255;2===e?(d=ca[a.charCodeAt(b)]<<2|ca[a.charCodeAt(b+1)]>>4,g[h++]=d&255):1===e&&(d=ca[a.charCodeAt(b)]<<10|ca[a.charCodeAt(b+1)]<<4|ca[a.charCodeAt(b+2)]>>2,g[h++]=d>>8&255,
g[h++]=d&255);return g}function Ha(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function ec(a){return null!=a&&(!!a._isBuffer||fc(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&fc(a.slice(0,0)))}function fc(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Aa(a){for(var b=a.length;0<=--b;)a[b]=0}function lb(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=
e;this.has_stree=a&&a.length}function mb(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function Ia(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function X(a,b,c){a.bi_valid>16-c?(a.bi_buf|=b<<a.bi_valid&65535,Ia(a,a.bi_buf),a.bi_buf=b>>16-a.bi_valid,a.bi_valid+=c-16):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function Y(a,b,c){X(a,c[2*b],c[2*b+1])}function gc(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function hc(a,b,c){var d=Array(16),e=
0,g;for(g=1;15>=g;g++)d[g]=e=e+c[g-1]<<1;for(c=0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=gc(d[e]++,e))}function ic(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function jc(a){8<a.bi_valid?Ia(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function kc(a,b,c,d){var e=2*b,g=2*c;return a[e]<a[g]||a[e]===a[g]&&d[b]<=d[c]}function nb(a,
b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<a.heap_len&&kc(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(kc(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function lc(a,b,c){var d,e,g=0,h,f;if(0!==a.last_lit){do d=a.pending_buf[a.d_buf+2*g]<<8|a.pending_buf[a.d_buf+2*g+1],e=a.pending_buf[a.l_buf+g],g++,0===d?Y(a,e,b):(h=Ja[e],Y(a,h+256+1,b),f=ob[h],0!==f&&(e-=pb[h],X(a,e,f)),d--,h=256>d?ra[d]:ra[256+(d>>>7)],Y(a,h,c),f=ab[h],0!==f&&(d-=bb[h],X(a,d,f)));while(g<a.last_lit)
}Y(a,256,b)}function qb(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,g=b.stat_desc.elems,h,f=-1,q;a.heap_len=0;a.heap_max=573;for(h=0;h<g;h++)0!==c[2*h]?(a.heap[++a.heap_len]=f=h,a.depth[h]=0):c[2*h+1]=0;for(;2>a.heap_len;)q=a.heap[++a.heap_len]=2>f?++f:0,c[2*q]=1,a.depth[q]=0,a.opt_len--,e&&(a.static_len-=d[2*q+1]);b.max_code=f;for(h=a.heap_len>>1;1<=h;h--)nb(a,c,h);q=g;do h=a.heap[1],a.heap[1]=a.heap[a.heap_len--],nb(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=h,a.heap[--a.heap_max]=
d,c[2*q]=c[2*h]+c[2*d],a.depth[q]=(a.depth[h]>=a.depth[d]?a.depth[h]:a.depth[d])+1,c[2*h+1]=c[2*d+1]=q,a.heap[1]=q++,nb(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];h=b.dyn_tree;q=b.max_code;var d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,g=b.stat_desc.extra_bits,m=b.stat_desc.extra_base,n=b.stat_desc.max_length,V,k,p,t,v=0;for(k=0;15>=k;k++)a.bl_count[k]=0;h[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++)V=a.heap[b],k=h[2*h[2*V+1]+1]+1,k>n&&(k=n,v++),h[2*V+1]=k,V>q||(a.bl_count[k]++,
p=0,V>=m&&(p=g[V-m]),t=h[2*V],a.opt_len+=t*(k+p),e&&(a.static_len+=t*(d[2*V+1]+p)));if(0!==v){do{for(k=n-1;0===a.bl_count[k];)k--;a.bl_count[k]--;a.bl_count[k+1]+=2;a.bl_count[n]--;v-=2}while(0<v);for(k=n;0!==k;k--)for(V=a.bl_count[k];0!==V;)d=a.heap[--b],d>q||(h[2*d+1]!==k&&(a.opt_len+=(k-h[2*d+1])*h[2*d],h[2*d+1]=k),V--)}hc(c,f,a.bl_count)}function mc(a,b,c){var d,e=-1,g,h=b[1],f=0,q=7,m=4;0===h&&(q=138,m=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++)g=h,h=b[2*(d+1)+1],++f<q&&g===h||(f<m?a.bl_tree[2*g]+=
f:0!==g?(g!==e&&a.bl_tree[2*g]++,a.bl_tree[32]++):10>=f?a.bl_tree[34]++:a.bl_tree[36]++,f=0,e=g,0===h?(q=138,m=3):g===h?(q=6,m=3):(q=7,m=4))}function nc(a,b,c){var d,e=-1,g,h=b[1],f=0,q=7,m=4;0===h&&(q=138,m=3);for(d=0;d<=c;d++)if(g=h,h=b[2*(d+1)+1],!(++f<q&&g===h)){if(f<m){do Y(a,g,a.bl_tree);while(0!==--f)}else 0!==g?(g!==e&&(Y(a,g,a.bl_tree),f--),Y(a,16,a.bl_tree),X(a,f-3,2)):10>=f?(Y(a,17,a.bl_tree),X(a,f-3,3)):(Y(a,18,a.bl_tree),X(a,f-11,7));f=0;e=g;0===h?(q=138,m=3):g===h?(q=6,m=3):(q=7,m=4)}}
function ad(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function oc(a,b,c,d){X(a,0+(d?1:0),3);jc(a);Ia(a,c);Ia(a,~c);D.arraySet(a.pending_buf,a.window,b,c,a.pending);a.pending+=c}function ja(a,b){a.msg=Ba[b];return b}function la(a){for(var b=a.length;0<=--b;)a[b]=0}function ma(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=
a.avail_out);0!==c&&(D.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function L(a,b){Z._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,b);a.block_start=a.strstart;ma(a.strm)}function B(a,b){a.pending_buf[a.pending++]=b}function Ka(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function pc(a,b){var c=a.max_chain_length,d=
a.strstart,e,g=a.prev_length,h=a.nice_match,f=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,q=a.window,m=a.w_mask,n=a.prev,k=a.strstart+258,l=q[d+g-1],p=q[d+g];a.prev_length>=a.good_match&&(c>>=2);h>a.lookahead&&(h=a.lookahead);do if(e=b,q[e+g]===p&&q[e+g-1]===l&&q[e]===q[d]&&q[++e]===q[d+1]){d+=2;for(e++;q[++d]===q[++e]&&q[++d]===q[++e]&&q[++d]===q[++e]&&q[++d]===q[++e]&&q[++d]===q[++e]&&q[++d]===q[++e]&&q[++d]===q[++e]&&q[++d]===q[++e]&&d<k;);e=258-(k-d);d=k-258;if(e>g){a.match_start=b;g=
e;if(e>=h)break;l=q[d+g-1];p=q[d+g]}}while((b=n[b&m])>f&&0!==--c);return g<=a.lookahead?g:a.lookahead}function sa(a){var b=a.w_size,c,d,e,g;do{g=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){D.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=d=a.hash_size;do e=a.head[--c],a.head[c]=e>=b?e-b:0;while(--d);c=d=b;do e=a.prev[--c],a.prev[c]=e>=b?e-b:0;while(--d);g+=b}if(0===a.strm.avail_in)break;c=a.strm;d=a.window;e=a.strstart+a.lookahead;var h=c.avail_in;
h>g&&(h=g);0===h?d=0:(c.avail_in-=h,D.arraySet(d,c.input,c.next_in,h,e),1===c.state.wrap?c.adler=La(c.adler,d,h,e):2===c.state.wrap&&(c.adler=O(c.adler,d,h,e)),c.next_in+=h,c.total_in+=h,d=h);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(g=a.strstart-a.insert,a.ins_h=a.window[g],a.ins_h=(a.ins_h<<a.hash_shift^a.window[g+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[g+3-1])&a.hash_mask,a.prev[g&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=g,g++,a.insert--,3>a.lookahead+a.insert););
}while(262>a.lookahead&&0!==a.strm.avail_in)}function rb(a,b){for(var c;;){if(262>a.lookahead){sa(a);if(262>a.lookahead&&0===b)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==c&&a.strstart-c<=a.w_size-262&&(a.match_length=pc(a,c));if(3<=a.match_length)if(c=Z._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=
a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else c=Z._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(c&&(L(a,!1),0===a.strm.avail_out))return 1}a.insert=
2>a.strstart?a.strstart:2;return 4===b?(L(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(L(a,!1),0===a.strm.avail_out)?1:2}function Ca(a,b){for(var c,d;;){if(262>a.lookahead){sa(a);if(262>a.lookahead&&0===b)return 1;if(0===a.lookahead)break}c=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==c&&a.prev_length<a.max_lazy_match&&
a.strstart-c<=a.w_size-262&&(a.match_length=pc(a,c),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-3;c=Z._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);
while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(c&&(L(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((c=Z._tr_tally(a,0,a.window[a.strstart-1]))&&L(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(Z._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===b?(L(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(L(a,!1),0===
a.strm.avail_out)?1:2}function bd(a,b){for(var c,d,e,g=a.window;;){if(258>=a.lookahead){sa(a);if(258>=a.lookahead&&0===b)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(d=a.strstart-1,c=g[d],c===g[++d]&&c===g[++d]&&c===g[++d])){for(e=a.strstart+258;c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&d<e;);a.match_length=258-(e-d);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(c=Z._tr_tally(a,
1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=Z._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(c&&(L(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===b?(L(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(L(a,!1),0===a.strm.avail_out)?1:2}function cd(a,b){for(var c;;){if(0===a.lookahead&&(sa(a),0===a.lookahead)){if(0===b)return 1;break}a.match_length=0;c=Z._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(c&&
(L(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===b?(L(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(L(a,!1),0===a.strm.avail_out)?1:2}function P(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function dd(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=
0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new D.Buf16(1146);this.dyn_dtree=new D.Buf16(122);this.bl_tree=new D.Buf16(78);la(this.dyn_ltree);la(this.dyn_dtree);la(this.bl_tree);this.bl_desc=this.d_desc=
this.l_desc=null;this.bl_count=new D.Buf16(16);this.heap=new D.Buf16(573);la(this.heap);this.heap_max=this.heap_len=0;this.depth=new D.Buf16(573);la(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function qc(a){var b;if(!a||!a.state)return ja(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=
0;Z._tr_init(b);return 0}function rc(a){var b=qc(a);0===b&&(a=a.state,a.window_size=2*a.w_size,la(a.head),a.max_lazy_match=Da[a.level].max_lazy,a.good_match=Da[a.level].good_length,a.nice_match=Da[a.level].nice_length,a.max_chain_length=Da[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function sc(a,b,c,d,e,g){if(!a)return-2;var h=1;-1===b&&(b=6);0>d?(h=0,d=-d):15<d&&(h=2,d-=16);if(1>e||9<e||8!==c||8>
d||15<d||0>b||9<b||0>g||4<g)return ja(a,-2);8===d&&(d=9);var f=new dd;a.state=f;f.strm=a;f.wrap=h;f.gzhead=null;f.w_bits=d;f.w_size=1<<f.w_bits;f.w_mask=f.w_size-1;f.hash_bits=e+7;f.hash_size=1<<f.hash_bits;f.hash_mask=f.hash_size-1;f.hash_shift=~~((f.hash_bits+3-1)/3);f.window=new D.Buf8(2*f.w_size);f.head=new D.Buf16(f.hash_size);f.prev=new D.Buf16(f.w_size);f.lit_bufsize=1<<e+6;f.pending_buf_size=4*f.lit_bufsize;f.pending_buf=new D.Buf8(f.pending_buf_size);f.d_buf=1*f.lit_bufsize;f.l_buf=3*f.lit_bufsize;
f.level=b;f.strategy=g;f.method=c;return rc(a)}function tc(a,b){if(65537>b&&(a.subarray&&uc||!a.subarray&&vc))return String.fromCharCode.apply(null,D.shrinkBuf(a,b));for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c}function ta(a){if(!(this instanceof ta))return new ta(a);a=this.options=D.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);
this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new wc;this.strm.avail_out=0;var b=Ma.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(0!==b)throw Error(Ba[b]);a.header&&Ma.deflateSetHeader(this.strm,a.header);if(a.dictionary){a="string"===typeof a.dictionary?ua.string2buf(a.dictionary):"[object ArrayBuffer]"===xc.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary;b=Ma.deflateSetDictionary(this.strm,a);if(0!==b)throw Error(Ba[b]);this._dict_set=
!0}}function sb(a,b){b=new ta(b);b.push(a,!0);if(b.err)throw b.msg||Ba[b.err];return b.result}function yc(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function ed(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=
this.lenbits=0;this.next=null;this.lens=new D.Buf16(320);this.work=new D.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function zc(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new D.Buf32(852);b.distcode=b.distdyn=new D.Buf32(592);b.sane=1;b.back=-1;return 0}function Ac(a){var b;if(!a||!a.state)return-2;b=a.state;
b.wsize=0;b.whave=0;b.wnext=0;return zc(a)}function Bc(a,b){var c,d;if(!a||!a.state)return-2;d=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==d.window&&d.wbits!==b&&(d.window=null);d.wrap=c;d.wbits=b;return Ac(a)}function Cc(a,b){var c;if(!a)return-2;c=new ed;a.state=c;c.window=null;b=Bc(a,b);0!==b&&(a.state=null);return b}function Dc(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new D.Buf8(e.wsize));d>=e.wsize?(D.arraySet(e.window,
b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&(a=d),D.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(D.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}function va(a){if(!(this instanceof va))return new va(a);var b=this.options=D.assign({chunkSize:16384,windowBits:0,to:""},a||{});b.raw&&0<=b.windowBits&&16>b.windowBits&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15));
!(0<=b.windowBits&&16>b.windowBits)||a&&a.windowBits||(b.windowBits+=32);15<b.windowBits&&48>b.windowBits&&0===(b.windowBits&15)&&(b.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new wc;this.strm.avail_out=0;a=Na.inflateInit2(this.strm,b.windowBits);if(a!==H.Z_OK)throw Error(Ba[a]);this.header=new fd;Na.inflateGetHeader(this.strm,this.header)}function tb(a,b){b=new va(b);b.push(a,!0);if(b.err)throw b.msg||Ba[b.err];return b.result}function Ec(a){return"number"===typeof a?
[a]:a}function Fc(a,b){if(1===b)return a.readUint8();for(var c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.readUint8();return c}function Ea(a,b){throw Error("Unsupported "+a+": "+b);}var F=function(){this._uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});this._metadata={};this._type=F.TYPE()};F.TYPE=function(){return"GENERIC"};F.prototype.isOfType=function(a){return!this._type.localeCompare(a)};F.prototype.getType=function(){this._type};
F.prototype.getUuid=function(){return this._uuid.slice()};F.prototype.setMetadata=function(a,b){"string"===typeof a||a instanceof String?this._metadata[a]=b:console.warn("The given key must be a String Object.")};F.prototype.getMetadata=function(a){if(a in this._metadata)return this._metadata[a];console.warn("The metadata with key: "+a+" doe not exist.");return null};F.prototype.hasMetadata=function(a){return a in this._metadata};F.prototype.getMetadataKeys=function(){return Object.keys(this._metadata)};
F.prototype.copyMetadataFrom=function(a){var b=this;a.getMetadataKeys().forEach(function(c){try{var d=JSON.parse(JSON.stringify(a.getMetadata(c)));b.setMetadata(c,d)}catch(e){console.error(e)}})};F.prototype.getMetadataCopy=function(){return JSON.parse(JSON.stringify(this._metadata))};var x=function(){var a;a=F.call(this)||this;a._type=x.TYPE();a._events={};a._inputValidator={};a._input={};a._output={};a._timer={};a._isOutputReady=!1;return a};$jscomp.inherits(x,F);x.TYPE=function(){return"FILTER"};
x.prototype.addInput=function(a,b){b=void 0===b?0:b;a?(b in this._input||(this._input[b]=null),this._input[b]=a,this._isOutputReady=!1):console.warn("A null input cannot be added.")};x.prototype.getOutput=function(a){a=void 0===a?0:a;return a in this._output?this._output[a]:null};x.prototype.forEachOutput=function(a){if(a)for(var b=this.getOutputCategories(),c=0;c<b.length;c++)a.call(this,b[c],this.getOutput(b[c]));else console.warn("forEachOutput requires a callback.")};x.prototype._forEachInput=
function(a){if(a)for(var b=this.getInputCategories(),c=0;c<b.length;c++)a.call(this,b[c],this._getInput(b[c]));else console.warn("forEachOutput requires a callback.")};x.prototype._addOutput=function(a,b){b=void 0===b?0:b;var c=null;b in this._output?console.warn("An output of category "+b+" was already defined. Nothing to be done."):(c=new a,this._output[b]=c,console.log("filter "+this.constructor.name+" creates a new output."));return c};x.prototype._getInput=function(a){a=void 0===a?0:a;return a in
this._input?this._input[a]:null};x.prototype.hasInputOfCategory=function(a){return a in this._input};x.prototype.getInputCategories=function(){return Object.keys(this._input)};x.prototype.getOutputCategories=function(){return Object.keys(this._output)};x.prototype.setMetadata=function(a,b){F.prototype.setMetadata.call(this,a,b);this._isOutputReady=!1};x.prototype.hasOutputReady=function(){return this._isOutputReady};x.prototype.setOutputAsReady=function(){this._isOutputReady=!0};x.prototype.addInputValidator=
function(a,b){this._inputValidator[a]="TYPE"in b?b.TYPE():b};x.prototype.hasValidInput=function(){var a=this,b=Object.keys(this._inputValidator),c=!0;0==b.length&&(c=!1,console.warn("No input validator was added. Filter cannot run. Use addInputValidator(...) to specify input types."));b.forEach(function(b){var d=a._getInput(b);if(d)if("isOfType"in d)c=c&&d.isOfType(a._inputValidator[b]);else try{c=c&&d instanceof a._inputValidator[b]}catch(g){c=!1}else c=!1});c||console.warn("The input is not valid.");
return c};x.prototype.update=function(){this.addTimeRecord("begin");this._run();this.addTimeRecord("end");console.log("Running time for filter "+this.constructor.name+": "+this.getTime("begin","end")+"ms.");this.getNumberOfOutputs()&&this.setOutputAsReady()};x.prototype._run=function(){console.error("The update() method has not been written, this filter is not valid.")};x.prototype.addTimeRecord=function(a){this._timer[a]=performance.now()};x.prototype.getTime=function(a,b,c){c=void 0===c?!1:c;if(a in
this._timer&&b in this._timer){var d=Math.abs(this._timer[b]-this._timer[a]);c&&console.log("> Time: ["+a+" , "+b+"] is "+d+" millisec.");return d}console.warn("The two given record name must exist in the time record table.");return-1};x.prototype.on=function(a,b){this._events[a]=b};x.prototype.triggerEvent=function(a){var b=null;if(this.hasEvent(a))if(1<arguments.length){for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);b=this._events[a].apply(this,b)}else b=this._events[a].call(this);
else console.warn("The event "+a+" does not exist.");return b};x.prototype.hasEvent=function(a){return a in this._events};x.prototype.getNumberOfInputs=function(){return Object.keys(this._input).length};x.prototype.getNumberOfOutputs=function(){return Object.keys(this._output).length};var wa=function(){var a;a=F.call(this)||this;a._data=null;return a};$jscomp.inherits(wa,F);wa.prototype.setRawData=function(a){this._data=a};wa.prototype.setRawMetadata=function(a){this._metadata=a};var C=function(a){var b;
a=void 0===a?null:a;b=wa.call(this)||this;b._type=C.TYPE();b.setMetadata("ncpp",4);if(a&&"width"in a&&"height"in a&&0<a.width&&0<a.height){b.setMetadata("width",a.width);b.setMetadata("height",a.height);"color"in a&&b.setMetadata("ncpp",a.color.length);b._data=new Float32Array(a.width*a.height*b.getMetadata("ncpp"));var c=b.getMetadata("ncpp");if("color"in a){a=a.color;for(var d=0;d<b._data.length;d++)b._data[d]=a[d%c];b.computeSimpleStat()}else b._data.fill(0)}return b};$jscomp.inherits(C,wa);C.TYPE=
function(){return"IMAGE2D"};C.prototype.clone=function(){var a=new C;a.setData(this._data,this.getMetadata("width"),this.getMetadata("height"),this.getMetadata("ncpp"),!0);a.copyMetadataFrom(this);return a};C.prototype.setData=function(a,b,c,d,e){d=void 0===d?4:d;e=void 0===e?!1:e;this.setMetadata("ncpp",d);a.length!=b*c*d?console.warn("The array size does not match the width and height. Cannot init the Image2D."):(this._data=e?new a.constructor(a):a,this.setMetadata("width",b),this.setMetadata("height",
c),this.computeSimpleStat())};C.prototype.setPixel=function(a,b,c){c=void 0===c?!1:c;if(this._data){var d=this._metadata.ncpp;if("x"in a&&0<=a.x&&a.x<this._metadata.width&&"y"in a&&0<=a.y&&a.y<this._metadata.height&&b.length==d){a=this.get1dIndexFrom2dPosition(a);if(1==d)this._data[a]=b[0];else{a*=d;for(var e=0;e<d;e++)this._data[a+e]=b[e]}c&&this.computeSimpleStat()}else console.error("x and y position have to be within the image dimensions and color size must be the same as the original image.")}else console.warn("The image is empty")};
C.prototype.getPixel=function(a){if(this._data){if("x"in a&&0<=a.x&&a.x<this._metadata.width&&"y"in a&&0<=a.y&&a.y<this._metadata.height){var b=this._metadata.ncpp;a=this.get1dIndexFrom2dPosition(a);1==b?b=[this._data[a]]:(a*=b,b=this._data.slice(a,a+b));return b}console.warn("The requested position is outside the image.");return null}console.warn("The image is empty")};C.prototype.getWidth=function(){return this._metadata.width};C.prototype.getHeight=function(){return this._metadata.height};C.prototype.getComponentsPerPixel=
function(){return this._metadata.ncpp};C.prototype.getData=function(){return this._data};C.prototype.getDataCopy=function(){return new this._data.constructor(this._data)};C.prototype.getDataAsUInt8Array=function(){if(this._data){for(var a=this.getMin(),b=this.getMax(),c=new Uint8Array(this._data.length),d=0;d<this._data.length;d++)c[d]=(this._data[d]-a)/b*256;return c}console.warn("No data, cannot make a copy of it.")};C.prototype.get2dPositionFrom1dIndex=function(a){return{x:a%this._metadata.width,
y:Math.floor(a/this._metadata.width)}};C.prototype.get1dIndexFrom2dPosition=function(a){return a.x+a.y*this._metadata.width};C.prototype.computeSimpleStat=function(){if(this._data){for(var a=Infinity,b=-Infinity,c=0,d=0;d<this._data.length;d++)a=Math.min(a,this._data[d]),b=Math.max(a,this._data[d]),c+=this._data[d];this.setMetadata("min",a);this.setMetadata("max",b);this.setMetadata("avg",c/this._data.length)}else console.warn("The image is empty")};C.prototype.getMin=function(){this.hasMetadata("min")||
this.computeSimpleStat();return this.getMetadata("min")};C.prototype.getMax=function(){this.hasMetadata("max")||this.computeSimpleStat();return this.getMetadata("max")};C.prototype.getAvg=function(){this.hasMetadata("avg")||this.computeSimpleStat();return this.getMetadata("avg")};var I=function(a){var b;a=void 0===a?null:a;b=wa.call(this)||this;b._type=I.TYPE();b.setMetadata("ncpp",1);a&&"order"in a?b.setMetadata("order",a.order):b.setMetadata("order",["zspace","yspace","xspace"]);var c={offset:1,
step:1},d={step:1},e={step:1};b.setMetadata("xspace",c);b.setMetadata("yspace",d);b.setMetadata("zspace",e);a&&"ncpp"in a&&b.setMetadata("ncpp",a.ncpp);a&&"xSize"in a&&"ySize"in a&&"zSize"in a&&0<a.xSize&&0<a.ySize&&0<a.zSize&&(c.space_length=a.xSize,d.space_length=a.ySize,e.space_length=a.zSize,d.offset=c.space_length,e.offset=c.space_length*d.space_length,b._data=new Float32Array(a.xSize*a.ySize*a.zSize*b.getMetadata("ncpp")),b._data.fill(0),b._scanDataRange(),b._finishHeader());return b};$jscomp.inherits(I,
wa);I.TYPE=function(){return"IMAGE3D"};I.prototype.clone=function(){var a=new I;a.setData(this._data,this.getMetadata("xspace").space_length,this.getMetadata("yspace").space_length,this.getMetadata("zspace").space_length,{ncpp:this.getMetadata("ncpp"),order:this.getMetadata("order").slice(),deepCopy:!0});a.copyMetadataFrom(this);return a};I.prototype.setData=function(a,b,c,d,e){var g=1;e&&"ncpp"in e&&(g=e.ncpp);a.length!=b*c*d*g?console.warn("The array size does not match the width and height. Cannot init the Image3D."):
(e&&"ncpp"in e&&this.setMetadata("ncpp",e.ncpp),e&&"order"in e&&this.setMetadata("order",e.order),this._data=e&&"deepCopy"in e&&e.deepCopy?new a.constructor(a):a,a=this.getMetadata("xspace"),e=this.getMetadata("yspace"),g=this.getMetadata("zspace"),a.space_length=b,e.space_length=c,g.space_length=d,e.offset=a.space_length,g.offset=a.space_length*e.space_length,this._scanDataRange(),this._finishHeader())};I.prototype._finishHeader=function(){var a=this.getMetadata("xspace"),b=this.getMetadata("yspace"),
c=this.getMetadata("zspace");a.name="xspace";b.name="yspace";c.name="zspace";a.width_space=JSON.parse(JSON.stringify(b));a.width=b.space_length;a.height_space=JSON.parse(JSON.stringify(c));a.height=c.space_length;b.width_space=JSON.parse(JSON.stringify(a));b.width=a.space_length;b.height_space=JSON.parse(JSON.stringify(c));b.height=c.space_length;c.width_space=JSON.parse(JSON.stringify(a));c.width=a.space_length;c.height_space=JSON.parse(JSON.stringify(b));c.height=b.space_length};I.prototype._scanDataRange=
function(){for(var a=Infinity,b=-Infinity,c=0;c<this._data.length;c++)a=Math.min(a,this._data[c]),b=Math.max(b,this._data[c]);this.setMetadata("voxel_min",a);this.setMetadata("voxel_max",b)};I.prototype.setPixel=function(a,b){};I.prototype.getPixel=function(a){};I.prototype.getSize=function(a){if(this.hasMetadata(a))return this.getMetadata(a).space_length;console.warn('The space must be "xspace", "yspace" or "zspace".');return null};I.prototype.getData=function(){return this._data};I.prototype.getDataCopy=
function(){return new this._data.constructor(this._data)};I.prototype.get1dIndexFrom3dPosition=function(a){};I.prototype.getSlice=function(a,b,c){b=void 0===b?0:b;c=void 0===c?0:c;if(!this.hasMetadata(a))return console.warn("The axis "+a+" does not exist."),null;var d=this.hasMetadata("time")?c*this.getMetadata("time").offset:0,e=this.getMetadata(a),g=e.width_space,h=e.height_space;a=e.width;c=e.height;var f=e.offset,q=g.offset,m=h.offset,n=new this._data.constructor(a*c),k,g=0<g.step,l=0<h.step;
k=0<e.step;var p=h=0,t=Infinity,v=-Infinity;this.getMetadata("voxel_max");b=k?b:e.space_length-b-1;if(0<=b&&b<e.space_length)for(d+=b*f,b=c-1;0<=b;b--)for(e=l?b:c-b-1,f=d+e*m,e=0;e<a;e++)k=g?e:a-e-1,k=f+k*q,k=this._data[k],t=Math.min(t,k),v=Math.max(v,k),p+=k,n[h++]=k;q=new C;q.setData(n,a,c,1);q.setMetadata("min",t);q.setMetadata("max",v);q.setMetadata("avg",p/(h-1));return q};I.prototype.getIntensity_ijk=function(a,b,c,d){d=void 0===d?0:d;var e=this.getMetadata("order");if(0>a||a>=this.getMetadata(e[0]).space_length||
0>b||b>=this.getMetadata(e[1]).space_length||0>c||c>=this.getMetadata(e[2]).space_length)return console.warn("getIntensity_ijk position is out of range."),0;d=this.hasMetadata("time")?d*this.getMetadata("time").offset:0;a=a*this.getMetadata(e[0]).offset+b*this.getMetadata(e[1]).offset+c*this.getMetadata(e[2]).offset+d;return this._data[a]};I.prototype.getIntensity_xyz=function(a,b,c,d){d=void 0===d?0:d;this.getMetadata("order");if(0>a||a>=this.getMetadata("xspace").space_length||0>b||b>=this.getMetadata("yspace").space_length||
0>c||c>=this.getMetadata("zspace").space_length)return console.warn("getIntensity_xyz position is out of range."),0;d=this.hasMetadata("time")?d*this.getMetadata("time").offset:0;a=a*this.getMetadata("xspace").offset+b*this.getMetadata("yspace").offset+c*this.getMetadata("zspace").offset+d;return this._data[a]};var R=function(){var a;a=x.call(this)||this;a.addInputValidator(0,C);return a};$jscomp.inherits(R,x);R.prototype.hasSameSizeInput=function(){var a=this,b=!0,c=[],d=[];Object.keys(this._input).forEach(function(b){c.push(a._getInput(b).getWidth());
d.push(a._getInput(b).getHeight())});c.length&&(c.sort(),d.sort(),(b=c[0]==c[c.length-1]&&d[0]==d[d.length-1])||console.warn("Input image do not all have the same size. Filter not valid"));return b};R.prototype.hasSameNcppInput=function(){var a=Object.keys(this._input);if(!a.length)return!1;for(var b=this._getInput(a[0]).getComponentsPerPixel(),c=0;c<a.length;c++)if(b!=this._getInput(a[c]).getComponentsPerPixel())return console.warn("Input image do not all have the same number of components per pixel. Filter not valid"),
!1;return!0};var ea=function(a){return I.call(this)||this};$jscomp.inherits(ea,I);ea.transformToMinc=function(a,b){function c(a){a=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0>=a&&(a=1);return Math.sqrt(a)}function d(a,b,c){return a[0]*(b[1]*c[2]-b[2]*c[1])-a[1]*(b[0]*c[2]-b[2]*c[0])+a[2]*(b[0]*c[1]-b[1]*c[0])}for(var e=[],g=[],h=[],f=c(a[0]),q=c(a[1]),m=c(a[2]),f=0>a[0][0]?-f:f,q=0>a[1][1]?-q:q,m=0>a[2][2]?-m:m,n=0;3>n;n++)e[n]=a[n][0]/f,g[n]=a[n][1]/q,h[n]=a[n][2]/m;b.xspace.step=f;b.yspace.step=q;b.zspace.step=
m;q=[a[0][3],a[1][3],a[2][3]];a=d(e,g,h);f=d(q,g,h);m=d(e,q,h);q=d(e,g,q);b.xspace.start=f/a;b.yspace.start=m/a;b.zspace.start=q/a;b.xspace.direction_cosines=e;b.yspace.direction_cosines=g;b.zspace.direction_cosines=h};ea.swapn=function(a,b){for(var c=0;c<a.length;c+=b)for(var d=b-1,e=0;d>e;){var g=a[c+d];a[c+d]=a[c+e];a[c+e]=g;d--;e++}};ea.prototype.setData=function(a,b){var c=this;this._data=a;this.setMetadata("position",{});this.setMetadata("current_time",0);Object.keys(b).forEach(function(a){c.setMetadata(a,
b[a])});this._scanDataRange();this._saveOriginAndTransform();this._finishHeader();console.log(this._metadata)};ea.prototype._saveOriginAndTransform=function(){var a=this.getMetadata("xspace"),b=this.getMetadata("yspace"),c=this.getMetadata("zspace"),d=a.start,e=b.start,g=c.start,h=a.direction_cosines,f=b.direction_cosines,q=c.direction_cosines,a=a.step,b=b.step,c=c.step,d={x:d*h[0]+e*f[0]+g*q[0],y:d*h[1]+e*f[1]+g*q[1],z:d*h[2]+e*f[2]+g*q[2]};this.setMetadata("voxel_origin",d);this.setMetadata("w2v",
[[h[0]/a,h[1]/a,h[2]/a,(-d.x*h[0]-d.y*h[1]-d.z*h[2])/a],[f[0]/b,f[1]/b,f[2]/b,(-d.x*f[0]-d.y*f[1]-d.z*f[2])/b],[q[0]/c,q[1]/c,q[2]/c,(-d.x*q[0]-d.y*q[1]-d.z*q[2])/c]])};var Oa=function(){var a;a=x.call(this)||this;a.addInputValidator(0,C);a.setMetadata("alpha",!1);a.setMetadata("min",0);a.setMetadata("max",255);a.setMetadata("reset",!0);a._canvas=null;a._ctx=null;return a};$jscomp.inherits(Oa,x);Oa.prototype._init=function(){var a=document.getElementById(this.getMetadata("parentDivID"));if(!a)return!1;
if(this.getMetadata("reset"))for(;a.firstChild;)a.removeChild(a.firstChild);this._canvas=document.createElement("canvas");this._canvas.style="image-rendering: pixelated;";this._ctx=this._canvas.getContext("2d");this._ctx.imageSmoothingEnabled=!0;this._ctx.mozImageSmoothingEnabled=!1;this._ctx.webkitImageSmoothingEnabled=!1;this._ctx.ctxmsImageSmoothingEnabled=!1;document.getElementById(this.getMetadata("parentDivID")).appendChild(this._canvas);return!0};Oa.prototype._run=function(){if(this.hasValidInput()){var a=
this._input[0],b=a.getComponentsPerPixel();if(1!=b&&4!=b)console.warn("Cannot write Image in canvas if contains other than 1 or 4 bands.");else if(this.getMetadata("parentDivID"))if(this._init()){var c=this.getMetadata("alpha");this._canvas.width=a.getWidth();this._canvas.height=a.getHeight();var d=this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height),e=d.data,a=a.getData();if(4==b)for(b=0;b<a.length;b++)e[b]=c||3!=b%4?this._stretchMinMax(a[b]):255;else if(1==b)for(b=0;b<a.length;b++){var c=
4*b,g=this._stretchMinMax(a[b]);e[c]=g;e[c+1]=g;e[c+2]=g;e[c+3]=255}else if(3==b)for(console.warn("From RGB Image2D to RGBA canvas, not sure of this implementation."),b=c=0;b<a.length;b++)3==b%4&&(e[c]=255,c++),e[c]=this._stretchMinMax(value),c++;this._ctx.putImageData(d,0,0)}else console.warn("The parent div was not specified or does not exist.");else console.error("The parent DIV ID to place the canvas element was not specified. Unable to display anything.")}};Oa.prototype._stretchMinMax=function(a){var b=
this._metadata.min,c=this._metadata.max;return 0==b&&255==c?a:(a-b)/(c-b)*255};var cb=function(a){a=x.call(this)||this;a._loadedCounter=0;a._addOutput(C,0);return a};$jscomp.inherits(cb,x);cb.prototype._run=function(){var a=this;this.getInputCategories().forEach(function(b){a._addOutput(C,b);a._loadImage(b)})};cb.prototype._loadImage=function(a){var b=this,c=new Image;c.src=this._getInput(a);c.onload=function(){var d=document.createElement("canvas");d.width=c.width;d.height=c.height;var e=d.getContext("2d");
e.drawImage(c,0,0);try{var g=e.getImageData(0,0,d.width,d.height),h=new Float32Array(g.data);b.getOutput(a).setData(h,c.width,c.height);b._loadedCounter++;b._loadedCounter==b.getNumberOfInputs()&&b.triggerEvent("ready")}catch(E){console.error(E)}}};var db=function(){var a;a=x.call(this)||this;a._allowedTypes=/image.*/;return a};$jscomp.inherits(db,x);db.prototype.hasValidInput=function(){var a=!1,b=this._getInput();b&&b.type.match(this._allowedTypes)?a=!0:console.error("The file must be an image (jpg/png). The type "+
b.type+" is not compatible with FileImageReader.");return a};db.prototype._run=function(){if(this.hasValidInput()){var a=this,b=this._getInput(),c=new FileReader;c.onload=function(b){var d=new Image;d.onload=function(){var b=document.createElement("canvas");b.width=d.width;b.height=d.height;b=b.getContext("2d");b.drawImage(d,0,0);b=b.getImageData(0,0,d.width,d.height).data;a._addOutput(C,0).setData(b,d.width,d.height);a.triggerEvent("ready")};d.src=c.result};c.readAsDataURL(b)}};var Pa="undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},ga=r,ha=k;"function"===typeof Pa.setTimeout&&(ga=setTimeout);"function"===typeof Pa.clearTimeout&&(ha=clearTimeout);var U=[],za=!1,pa,Wa=-1;aa.prototype.run=function(){this.fun.apply(null,this.array)};var Fa=Pa.performance||{},gd=Fa.now||Fa.mozNow||Fa.msNow||Fa.oNow||Fa.webkitNow||function(){return(new Date).getTime()},hd=new Date,ub={nextTick:function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=
1;c<arguments.length;c++)b[c-1]=arguments[c];U.push(new aa(a,b));1!==U.length||za||u(T)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:oa,addListener:oa,once:oa,off:oa,removeListener:oa,removeAllListeners:oa,emit:oa,binding:function(a){throw Error("process.binding is not supported");},cwd:function(){return"/"},chdir:function(a){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(a){var b=.001*gd.call(Fa),c=Math.floor(b),b=Math.floor(b%1*
1E9);a&&(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));return[c,b]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-hd)/1E3}},vb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Gc={},Hc=Object.freeze({default:Gc}),ba=[],ca=[],$c="undefined"!==typeof Uint8Array?Uint8Array:Array,hb=!1,id={}.toString,Vb=Array.isArray||function(a){return"[object Array]"==id.call(a)};l.TYPED_ARRAY_SUPPORT=void 0!==Pa.TYPED_ARRAY_SUPPORT?Pa.TYPED_ARRAY_SUPPORT:
!0;var jd=l.TYPED_ARRAY_SUPPORT?2147483647:1073741823;l.poolSize=8192;l._augment=function(a){a.__proto__=l.prototype;return a};l.from=function(a,b,c){return Sb(null,a,b,c)};l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,$jscomp.initSymbol(),$jscomp.initSymbol(),$jscomp.initSymbol());l.alloc=function(a,b,c){Ub(a);a=0>=a?ia(null,a):void 0!==b?"string"===typeof c?ia(null,a).fill(b,c):ia(null,a).fill(b):ia(null,a);return a};l.allocUnsafe=function(a){return ib(null,
a)};l.allocUnsafeSlow=function(a){return ib(null,a)};l.isBuffer=ec;l.compare=function(a,b){if(!da(a)||!da(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};l.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};l.concat=function(a,b){if(!Vb(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return l.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=l.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!da(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};l.byteLength=Tb;l.prototype._isBuffer=!0;l.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)qa(this,b,b+1);return this};l.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)qa(this,b,b+3),qa(this,b+1,b+2);return this};l.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)qa(this,b,b+7),qa(this,b+1,b+6),qa(this,b+2,b+5),qa(this,b+3,b+4);return this};l.prototype.toString=function(){var a=
this.length|0;return 0===a?"":0===arguments.length?Xb(this,0,a):Yc.apply(this,arguments)};l.prototype.equals=function(a){if(!da(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===l.compare(this,a)};l.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};l.prototype.compare=function(a,b,c,d,e){if(!da(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);
void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var g=e-d,h=c-b,f=Math.min(g,h);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<f;++b)if(d[b]!==a[b]){g=d[b];h=a[b];break}return g<h?-1:h<g?1:0};l.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};l.prototype.indexOf=function(a,
b,c){return Yb(this,a,b,c,!0)};l.prototype.lastIndexOf=function(a,b,c){return Yb(this,a,b,c,!1)};l.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return Ha(Ya(a,this.length-b),this,b,c);case "ascii":return Ha(dc(a),this,b,c);case "latin1":case "binary":return Ha(dc(a),this,b,c);case "base64":return Ha(Wb(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var g;
d=a;for(var e=this.length-b,h=[],f=0;f<d.length&&!(0>(e-=2));++f)g=d.charCodeAt(f),a=g>>8,g%=256,h.push(g),h.push(a);return Ha(h,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $b=4096;l.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(l.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=l.prototype;else{c=b-a;b=new l(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};l.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||J(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};l.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||J(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};l.prototype.readUInt8=function(a,b){b||J(a,1,this.length);return this[a]};l.prototype.readUInt16LE=function(a,
b){b||J(a,2,this.length);return this[a]|this[a+1]<<8};l.prototype.readUInt16BE=function(a,b){b||J(a,2,this.length);return this[a]<<8|this[a+1]};l.prototype.readUInt32LE=function(a,b){b||J(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};l.prototype.readUInt32BE=function(a,b){b||J(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};l.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||J(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=
this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};l.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||J(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};l.prototype.readInt8=function(a,b){b||J(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};l.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};l.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);
a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};l.prototype.readInt32LE=function(a,b){b||J(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};l.prototype.readInt32BE=function(a,b){b||J(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};l.prototype.readFloatLE=function(a,b){b||J(a,4,this.length);return Xa(this,a,!0,23,4)};l.prototype.readFloatBE=function(a,b){b||J(a,4,this.length);return Xa(this,a,!1,23,4)};l.prototype.readDoubleLE=function(a,b){b||
J(a,8,this.length);return Xa(this,a,!0,52,8)};l.prototype.readDoubleBE=function(a,b){b||J(a,8,this.length);return Xa(this,a,!1,52,8)};l.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||W(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};l.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||W(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};l.prototype.writeUInt8=
function(a,b,c){a=+a;b|=0;c||W(this,a,b,1,255,0);l.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};l.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,2,65535,0);l.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Za(this,a,b,!0);return b+2};l.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,2,65535,0);l.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Za(this,a,b,!1);return b+2};l.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,4,
4294967295,0);l.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):$a(this,a,b,!0);return b+4};l.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,4,4294967295,0);l.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):$a(this,a,b,!1);return b+4};l.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),W(this,a,b,c,d-1,-d));d=0;var e=1,g=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===g&&0!==this[b+d-
1]&&(g=1),this[b+d]=(a/e>>0)-g&255;return b+c};l.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),W(this,a,b,c,d-1,-d));d=c-1;var e=1,g=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===g&&0!==this[b+d+1]&&(g=1),this[b+d]=(a/e>>0)-g&255;return b+c};l.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||W(this,a,b,1,127,-128);l.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};l.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,2,32767,
-32768);l.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Za(this,a,b,!0);return b+2};l.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,2,32767,-32768);l.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Za(this,a,b,!1);return b+2};l.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||W(this,a,b,4,2147483647,-2147483648);l.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):$a(this,a,b,!0);return b+4};l.prototype.writeInt32BE=function(a,b,c){a=
+a;b|=0;c||W(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);l.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):$a(this,a,b,!1);return b+4};l.prototype.writeFloatLE=function(a,b,c){return bc(this,a,b,!0,c)};l.prototype.writeFloatBE=function(a,b,c){return bc(this,a,b,!1,c)};l.prototype.writeDoubleLE=function(a,b,c){return cc(this,a,b,!0,c)};l.prototype.writeDoubleBE=function(a,b,c){return cc(this,a,b,!1,c)};l.prototype.copy=function(a,b,c,d){c||(c=0);
d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!l.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+
b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};l.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!l.isEncoding(d))throw new TypeError("Unknown encoding: "+d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<
b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=da(a)?a:Ya((new l(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var Zc=/[^+\/0-9A-Za-z-_]/g,kd=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:jd,Buffer:l,SlowBuffer:function(a){+a!=a&&(a=0);return l.alloc(+a)},isBuffer:ec}),Ic=Hc&&Gc||Hc,Jc=Ga(function(a){(function(){function b(a){a?(n[0]=
n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0,this.blocks=n,this.buffer8=k):g?(a=new ArrayBuffer(68),this.buffer8=new Uint8Array(a),this.blocks=new Uint32Array(a)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var c="object"===typeof window?window:{},d=!c.JS_MD5_NO_NODE_JS&&"object"===typeof ub&&ub.versions&&ub.versions.node;d&&(c=vb);var e=!c.JS_MD5_NO_COMMON_JS&&
!0&&a.exports,g=!c.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,h="0123456789abcdef".split(""),f=[128,32768,8388608,-2147483648],q=[0,8,16,24],m=["hex","array","digest","buffer","arrayBuffer"],n=[],k;if(g){var l=new ArrayBuffer(68);k=new Uint8Array(l);n=new Uint32Array(l)}var p=function(a){return function(c){return(new b(!0)).update(c)[a]()}},t=function(a){var b=kd.Buffer;return function(c){if("string"===typeof c)return Ic.createHash("md5").update(c,"utf8").digest("hex");if(c.constructor===
ArrayBuffer)c=new Uint8Array(c);else if(void 0===c.length)return a(c);return Ic.createHash("md5").update(new b(c)).digest("hex")}};b.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;b&&a.constructor==c.ArrayBuffer&&(a=new Uint8Array(a));for(var d,e=0,h,f=a.length||0,v=this.blocks,m=this.buffer8;e<f;){this.hashed&&(this.hashed=!1,v[0]=v[16],v[16]=v[1]=v[2]=v[3]=v[4]=v[5]=v[6]=v[7]=v[8]=v[9]=v[10]=v[11]=v[12]=v[13]=v[14]=v[15]=0);if(b)if(g)for(h=this.start;e<f&&64>h;++e)m[h++]=
a[e];else for(h=this.start;e<f&&64>h;++e)v[h>>2]|=a[e]<<q[h++&3];else if(g)for(h=this.start;e<f&&64>h;++e)d=a.charCodeAt(e),128>d?m[h++]=d:(2048>d?m[h++]=192|d>>6:(55296>d||57344<=d?m[h++]=224|d>>12:(d=65536+((d&1023)<<10|a.charCodeAt(++e)&1023),m[h++]=240|d>>18,m[h++]=128|d>>12&63),m[h++]=128|d>>6&63),m[h++]=128|d&63);else for(h=this.start;e<f&&64>h;++e)d=a.charCodeAt(e),128>d?v[h>>2]|=d<<q[h++&3]:(2048>d?v[h>>2]|=(192|d>>6)<<q[h++&3]:(55296>d||57344<=d?v[h>>2]|=(224|d>>12)<<q[h++&3]:(d=65536+((d&
1023)<<10|a.charCodeAt(++e)&1023),v[h>>2]|=(240|d>>18)<<q[h++&3],v[h>>2]|=(128|d>>12&63)<<q[h++&3]),v[h>>2]|=(128|d>>6&63)<<q[h++&3]),v[h>>2]|=(128|d&63)<<q[h++&3]);this.lastByteIndex=h;this.bytes+=h-this.start;64<=h?(this.start=h-64,this.hash(),this.hashed=!0):this.start=h}return this}};b.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=f[b&3];56<=b&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=
a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[14]=this.bytes<<3;this.hash()}};b.prototype.hash=function(){var a,b,c,d,e,g=this.blocks;this.first?(a=g[0]-680876937,a=(a<<7|a>>>25)-271733879<<0,d=(-1732584194^a&2004318071)+g[1]-117830708,d=(d<<12|d>>>20)+a<<0,c=(-271733879^d&(a^-271733879))+g[2]-1126478375,c=(c<<17|c>>>15)+d<<0,b=(a^c&(d^a))+g[3]-1316259209):(a=this.h0,b=this.h1,c=this.h2,d=this.h3,a+=(d^b&(c^d))+g[0]-680876936,a=(a<<7|a>>>25)+b<<0,d+=(c^a&(b^c))+g[1]-389564586,d=(d<<12|d>>>20)+a<<
0,c+=(b^d&(a^b))+g[2]+606105819,c=(c<<17|c>>>15)+d<<0,b+=(a^c&(d^a))+g[3]-1044525330);b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+g[4]-176418897;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+g[5]+1200080426;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+g[6]-1473231341;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+g[7]-45705983;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+g[8]+1770035416;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+g[9]-1958414417;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+g[10]-42063;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+g[11]-1990404162;
b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+g[12]+1804603682;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+g[13]-40341101;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+g[14]-1502002290;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+g[15]+1236535329;b=(b<<22|b>>>10)+c<<0;a+=(c^d&(b^c))+g[1]-165796510;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+g[6]-1069501632;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+g[11]+643717713;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+g[0]-373897302;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+g[5]-701558691;a=(a<<5|a>>>27)+b<<0;d+=(b^c&
(a^b))+g[10]+38016083;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+g[15]-660478335;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+g[4]-405537848;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+g[9]+568446438;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+g[14]-1019803690;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+g[3]-187363961;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+g[8]+1163531501;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+g[13]-1444681467;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+g[2]-51403784;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+g[7]+1735328473;c=(c<<14|c>>>
18)+d<<0;b+=(d^a&(c^d))+g[12]-1926607734;b=(b<<20|b>>>12)+c<<0;e=b^c;a+=(e^d)+g[5]-378558;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+g[8]-2022574463;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+g[11]+1839030562;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+g[14]-35309556;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+g[1]-1530992060;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+g[4]+1272893353;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+g[7]-155497632;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+g[10]-1094730640;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+g[13]+681279174;a=(a<<4|a>>>28)+
b<<0;d+=(e^a)+g[0]-358537222;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+g[3]-722521979;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+g[6]+76029189;b=(b<<23|b>>>9)+c<<0;e=b^c;a+=(e^d)+g[9]-640364487;a=(a<<4|a>>>28)+b<<0;d+=(e^a)+g[12]-421815835;d=(d<<11|d>>>21)+a<<0;e=d^a;c+=(e^b)+g[15]+530742520;c=(c<<16|c>>>16)+d<<0;b+=(e^c)+g[2]-995338651;b=(b<<23|b>>>9)+c<<0;a+=(c^(b|~d))+g[0]-198630844;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+g[7]+1126891415;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+g[14]-1416354905;c=(c<<15|c>>>17)+d<<0;b+=
(d^(c|~a))+g[5]-57434055;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+g[12]+1700485571;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+g[3]-1894986606;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+g[10]-1051523;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+g[1]-2054922799;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+g[8]+1873313359;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+g[15]-30611744;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+g[6]-1560198380;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+g[13]+1309151649;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+g[4]-145523070;a=(a<<6|a>>>
26)+b<<0;d+=(b^(a|~c))+g[11]-1120210379;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+g[2]+718787259;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+g[9]-343485551;b=(b<<21|b>>>11)+c<<0;this.first?(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)};b.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return h[a>>4&15]+h[a&15]+h[a>>12&15]+h[a>>
8&15]+h[a>>20&15]+h[a>>16&15]+h[a>>28&15]+h[a>>24&15]+h[b>>4&15]+h[b&15]+h[b>>12&15]+h[b>>8&15]+h[b>>20&15]+h[b>>16&15]+h[b>>28&15]+h[b>>24&15]+h[c>>4&15]+h[c&15]+h[c>>12&15]+h[c>>8&15]+h[c>>20&15]+h[c>>16&15]+h[c>>28&15]+h[c>>24&15]+h[d>>4&15]+h[d&15]+h[d>>12&15]+h[d>>8&15]+h[d>>20&15]+h[d>>16&15]+h[d>>28&15]+h[d>>24&15]};b.prototype.toString=b.prototype.hex;b.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>
8&255,b>>16&255,b>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,d&255,d>>8&255,d>>16&255,d>>24&255]};b.prototype.array=b.prototype.digest;b.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(16),b=new Uint32Array(a);b[0]=this.h0;b[1]=this.h1;b[2]=this.h2;b[3]=this.h3;return a};b.prototype.buffer=b.prototype.arrayBuffer;l=function(){var a=p("hex");d&&(a=t(a));a.create=function(){return new b};a.update=function(b){return a.create().update(b)};for(var c=0;c<m.length;++c){var e=m[c];
a[e]=p(e)}return a}();e?a.exports=l:c.md5=l})()}),D=Ga(function(a,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};b.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};
var c={arraySet:function(a,b,c,d,f){if(b.subarray&&a.subarray)a.set(b.subarray(c,c+d),f);else for(var e=0;e<d;e++)a[f+e]=b[c+e]},flattenChunks:function(a){var b,c,d,e,f;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;f=new Uint8Array(d);b=d=0;for(c=a.length;b<c;b++)e=a[b],f.set(e,d),d+=e.length;return f}},d={arraySet:function(a,b,c,d,f){for(var e=0;e<d;e++)a[f+e]=b[c+e]},flattenChunks:function(a){return[].concat.apply([],a)}};b.setTyped=function(a){a?(b.Buf8=Uint8Array,b.Buf16=Uint16Array,b.Buf32=Int32Array,
b.assign(b,c)):(b.Buf8=Array,b.Buf16=Array,b.Buf32=Array,b.assign(b,d))};b.setTyped(a)}),ob=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ab=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],md=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Kc=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fa=Array(576);Aa(fa);var Qa=Array(60);Aa(Qa);var ra=Array(512);Aa(ra);var Ja=Array(256);Aa(Ja);var pb=Array(29);Aa(pb);var bb=Array(30);Aa(bb);var Lc,Mc,Nc,Oc=!1,Z={_tr_init:function(a){if(!Oc){var b,
c,d,e=Array(16);for(d=c=0;28>d;d++)for(pb[d]=c,b=0;b<1<<ob[d];b++)Ja[c++]=d;Ja[c-1]=d;for(d=c=0;16>d;d++)for(bb[d]=c,b=0;b<1<<ab[d];b++)ra[c++]=d;for(c>>=7;30>d;d++)for(bb[d]=c<<7,b=0;b<1<<ab[d]-7;b++)ra[256+c++]=d;for(b=0;15>=b;b++)e[b]=0;for(b=0;143>=b;)fa[2*b+1]=8,b++,e[8]++;for(;255>=b;)fa[2*b+1]=9,b++,e[9]++;for(;279>=b;)fa[2*b+1]=7,b++,e[7]++;for(;287>=b;)fa[2*b+1]=8,b++,e[8]++;hc(fa,287,e);for(b=0;30>b;b++)Qa[2*b+1]=5,Qa[2*b]=gc(b,5);Lc=new lb(fa,ob,257,286,15);Mc=new lb(Qa,ab,0,30,15);Nc=
new lb([],md,0,19,7);Oc=!0}a.l_desc=new mb(a.dyn_ltree,Lc);a.d_desc=new mb(a.dyn_dtree,Mc);a.bl_desc=new mb(a.bl_tree,Nc);a.bi_buf=0;a.bi_valid=0;ic(a)},_tr_stored_block:oc,_tr_flush_block:function(a,b,c,d){var e,g,h=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=ad(a));qb(a,a.l_desc);qb(a,a.d_desc);mc(a,a.dyn_ltree,a.l_desc.max_code);mc(a,a.dyn_dtree,a.d_desc.max_code);qb(a,a.bl_desc);for(h=18;3<=h&&0===a.bl_tree[2*Kc[h]+1];h--);a.opt_len+=3*(h+1)+14;e=a.opt_len+3+7>>>3;g=a.static_len+3+
7>>>3;g<=e&&(e=g)}else e=g=c+5;if(c+4<=e&&-1!==b)oc(a,b,c,d);else if(4===a.strategy||g===e)X(a,2+(d?1:0),3),lc(a,fa,Qa);else{X(a,4+(d?1:0),3);b=a.l_desc.max_code+1;c=a.d_desc.max_code+1;h+=1;X(a,b-257,5);X(a,c-1,5);X(a,h-4,4);for(e=0;e<h;e++)X(a,a.bl_tree[2*Kc[e]+1],3);nc(a,a.dyn_ltree,b-1);nc(a,a.dyn_dtree,c-1);lc(a,a.dyn_ltree,a.dyn_dtree)}ic(a);d&&jc(a)},_tr_tally:function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=
c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(Ja[c]+256+1)]++,a.dyn_dtree[2*(256>b?ra[b]:ra[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1},_tr_align:function(a){X(a,2,3);Y(a,256,fa);16===a.bi_valid?(Ia(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},La=function(a,b,c,d){var e=a&65535|0;a=a>>>16&65535|0;for(var g;0!==c;){g=2E3<c?2E3:c;c-=g;do e=e+b[d++]|0,a=a+e|0;while(--g);e%=65521;a%=
65521}return e|a<<16|0},nd=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}(),O=function(a,b,c,d){c=d+c;for(a^=-1;d<c;d++)a=a>>>8^nd[(a^b[d])&255];return a^-1},Ba={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Da;Da=[new P(0,0,0,0,function(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(1>=
a.lookahead){sa(a);if(0===a.lookahead&&0===b)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+c;if(0===a.strstart||a.strstart>=d)if(a.lookahead=a.strstart-d,a.strstart=d,L(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(L(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===b)return L(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&L(a,!1);return 1}),new P(4,4,8,4,rb),new P(4,5,16,8,rb),new P(4,6,32,32,rb),new P(4,
4,16,16,Ca),new P(8,16,32,32,Ca),new P(8,16,128,128,Ca),new P(8,32,128,256,Ca),new P(32,128,258,1024,Ca),new P(32,258,258,4096,Ca)];var Ma={deflateInit:function(a,b){return sc(a,b,8,15,8,0)},deflateInit2:sc,deflateReset:rc,deflateResetKeep:qc,deflateSetHeader:function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0},deflate:function(a,b){var c,d,e,g;if(!a||!a.state||5<b||0>b)return a?ja(a,-2):-2;d=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===d.status&&4!==b)return ja(a,
0===a.avail_out?-5:-2);d.strm=a;c=d.last_flush;d.last_flush=b;42===d.status&&(2===d.wrap?(a.adler=0,B(d,31),B(d,139),B(d,8),d.gzhead?(B(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),B(d,d.gzhead.time&255),B(d,d.gzhead.time>>8&255),B(d,d.gzhead.time>>16&255),B(d,d.gzhead.time>>24&255),B(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),B(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(B(d,d.gzhead.extra.length&255),B(d,d.gzhead.extra.length>>
8&255)),d.gzhead.hcrc&&(a.adler=O(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(B(d,0),B(d,0),B(d,0),B(d,0),B(d,0),B(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),B(d,3),d.status=113)):(e=8+(d.w_bits-8<<4)<<8,e|=(2<=d.strategy||2>d.level?0:6>d.level?1:6===d.level?2:3)<<6,0!==d.strstart&&(e|=32),d.status=113,Ka(d,e+(31-e%31)),0!==d.strstart&&(Ka(d,a.adler>>>16),Ka(d,a.adler&65535)),a.adler=1));if(69===d.status)if(d.gzhead.extra){for(e=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&
(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e)),ma(a),e=d.pending,d.pending!==d.pending_buf_size));)B(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e));d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(73===d.status)if(d.gzhead.name){e=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,
d.pending-e,e)),ma(a),e=d.pending,d.pending===d.pending_buf_size)){g=1;break}g=d.gzindex<d.gzhead.name.length?d.gzhead.name.charCodeAt(d.gzindex++)&255:0;B(d,g)}while(0!==g);d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e));0===g&&(d.gzindex=0,d.status=91)}else d.status=91;if(91===d.status)if(d.gzhead.comment){e=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e)),ma(a),e=d.pending,d.pending===d.pending_buf_size)){g=
1;break}g=d.gzindex<d.gzhead.comment.length?d.gzhead.comment.charCodeAt(d.gzindex++)&255:0;B(d,g)}while(0!==g);d.gzhead.hcrc&&d.pending>e&&(a.adler=O(a.adler,d.pending_buf,d.pending-e,e));0===g&&(d.status=103)}else d.status=103;103===d.status&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&ma(a),d.pending+2<=d.pending_buf_size&&(B(d,a.adler&255),B(d,a.adler>>8&255),a.adler=0,d.status=113)):d.status=113);if(0!==d.pending){if(ma(a),0===a.avail_out)return d.last_flush=-1,0}else if(0===a.avail_in&&(b<<
1)-(4<b?9:0)<=(c<<1)-(4<c?9:0)&&4!==b)return ja(a,-5);if(666===d.status&&0!==a.avail_in)return ja(a,-5);if(0!==a.avail_in||0!==d.lookahead||0!==b&&666!==d.status){c=2===d.strategy?cd(d,b):3===d.strategy?bd(d,b):Da[d.level].func(d,b);if(3===c||4===c)d.status=666;if(1===c||3===c)return 0===a.avail_out&&(d.last_flush=-1),0;if(2===c&&(1===b?Z._tr_align(d):5!==b&&(Z._tr_stored_block(d,0,0,!1),3===b&&(la(d.head),0===d.lookahead&&(d.strstart=0,d.block_start=0,d.insert=0))),ma(a),0===a.avail_out))return d.last_flush=
-1,0}if(4!==b)return 0;if(0>=d.wrap)return 1;2===d.wrap?(B(d,a.adler&255),B(d,a.adler>>8&255),B(d,a.adler>>16&255),B(d,a.adler>>24&255),B(d,a.total_in&255),B(d,a.total_in>>8&255),B(d,a.total_in>>16&255),B(d,a.total_in>>24&255)):(Ka(d,a.adler>>>16),Ka(d,a.adler&65535));ma(a);0<d.wrap&&(d.wrap=-d.wrap);return 0!==d.pending?0:1},deflateEnd:function(a){var b;if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return ja(a,-2);a.state=null;return 113===
b?ja(a,-3):0},deflateSetDictionary:function(a,b){var c=b.length,d,e,g,h,f;if(!a||!a.state)return-2;d=a.state;e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return-2;1===e&&(a.adler=La(a.adler,b,c,0));d.wrap=0;c>=d.w_size&&(0===e&&(la(d.head),d.strstart=0,d.block_start=0,d.insert=0),g=new D.Buf8(d.w_size),D.arraySet(g,b,c-d.w_size,d.w_size,0),b=g,c=d.w_size);g=a.avail_in;h=a.next_in;f=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(sa(d);3<=d.lookahead;){b=d.strstart;c=d.lookahead-2;do d.ins_h=
(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=b,b++;while(--c);d.strstart=b;d.lookahead=2;sa(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=h;a.input=f;a.avail_in=g;d.wrap=e;return 0},deflateInfo:"pako deflate (from Nodeca project)"},vc=!0,uc=!0;try{String.fromCharCode.apply(null,[0])}catch(a){vc=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){uc=
!1}for(var Ra=new D.Buf8(256),na=0;256>na;na++)Ra[na]=252<=na?6:248<=na?5:240<=na?4:224<=na?3:192<=na?2:1;Ra[254]=Ra[254]=1;var ua={string2buf:function(a){var b,c,d,e,g,h=a.length,f=0;for(e=0;e<h;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),e++)),f+=128>c?1:2048>c?2:65536>c?3:4;b=new D.Buf8(f);for(e=g=0;g<f;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),
e++)),128>c?b[g++]=c:(2048>c?b[g++]=192|c>>>6:(65536>c?b[g++]=224|c>>>12:(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63),b[g++]=128|c>>>6&63),b[g++]=128|c&63);return b},buf2binstring:function(a){return tc(a,a.length)},binstring2buf:function(a){for(var b=new D.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b},buf2string:function(a,b){var c,d,e,g=b||a.length,h=Array(2*g);for(b=c=0;b<g;)if(d=a[b++],128>d)h[c++]=d;else if(e=Ra[d],4<e)h[c++]=65533,b+=e-1;else{for(d&=2===e?31:3===e?15:7;1<e&&
b<g;)d=d<<6|a[b++]&63,e--;1<e?h[c++]=65533:65536>d?h[c++]=d:(d-=65536,h[c++]=55296|d>>10&1023,h[c++]=56320|d&1023)}return tc(h,c)},utf8border:function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||0===c?b:c+Ra[a[c]]>b?c:b}},wc=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},xc=Object.prototype.toString;
ta.prototype.push=function(a,b){var c=this.strm,d=this.options.chunkSize;if(this.ended)return!1;b=b===~~b?b:!0===b?4:0;"string"===typeof a?c.input=ua.string2buf(a):"[object ArrayBuffer]"===xc.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;c.avail_in=c.input.length;do{0===c.avail_out&&(c.output=new D.Buf8(d),c.next_out=0,c.avail_out=d);a=Ma.deflate(c,b);if(1!==a&&0!==a)return this.onEnd(a),this.ended=!0,!1;if(0===c.avail_out||0===c.avail_in&&(4===b||2===b))if("string"===this.options.to)this.onData(ua.buf2binstring(D.shrinkBuf(c.output,
c.next_out)));else this.onData(D.shrinkBuf(c.output,c.next_out))}while((0<c.avail_in||0===c.avail_out)&&1!==a);if(4===b)return a=Ma.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a;2===b&&(this.onEnd(0),c.avail_out=0);return!0};ta.prototype.onData=function(a){this.chunks.push(a)};ta.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):D.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var od={Deflate:ta,deflate:sb,deflateRaw:function(a,
b){b=b||{};b.raw=!0;return sb(a,b)},gzip:function(a,b){b=b||{};b.gzip=!0;return sb(a,b)}},pd=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],qd=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],rd=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],sd=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,
64],Sa=function(a,b,c,d,e,g,h,f){var q=f.bits,m,n,E,k,p,t,v,l,r,u,y,x,w,z=0,C,A=new D.Buf16(16);p=new D.Buf16(16);var B,I=0,H,G,J;for(m=0;15>=m;m++)A[m]=0;for(n=0;n<d;n++)A[b[c+n]]++;k=q;for(E=15;1<=E&&0===A[E];E--);k>E&&(k=E);if(0===E)return e[g++]=20971520,e[g++]=20971520,f.bits=1,0;for(q=1;q<E&&0===A[q];q++);k<q&&(k=q);for(m=t=1;15>=m;m++)if(t<<=1,t-=A[m],0>t)return-1;if(0<t&&(0===a||1!==E))return-1;p[1]=0;for(m=1;15>m;m++)p[m+1]=p[m]+A[m];for(n=0;n<d;n++)0!==b[c+n]&&(h[p[b[c+n]]++]=n);0===a?(w=
B=h,C=19):1===a?(w=pd,z-=257,B=qd,I-=257,C=256):(w=rd,B=sd,C=-1);n=l=0;m=q;x=g;d=k;p=0;u=-1;v=1<<k;y=v-1;if(1===a&&852<v||2===a&&592<v)return 1;for(;;){H=m-p;h[n]<C?(G=0,J=h[n]):h[n]>C?(G=B[I+h[n]],J=w[z+h[n]]):(G=96,J=0);t=1<<m-p;q=r=1<<d;do r-=t,e[x+(l>>p)+r]=H<<24|G<<16|J|0;while(0!==r);for(t=1<<m-1;l&t;)t>>=1;0!==t?(l&=t-1,l+=t):l=0;n++;if(0===--A[m]){if(m===E)break;m=b[c+h[n]]}if(m>k&&(l&y)!==u){0===p&&(p=k);x+=q;d=m-p;for(t=1<<d;d+p<E;){t-=A[d+p];if(0>=t)break;d++;t<<=1}v+=1<<d;if(1===a&&852<
v||2===a&&592<v)return 1;u=l&y;e[u]=k<<24|d<<16|x-g|0}}0!==l&&(e[x+l]=m-p<<24|4194304);f.bits=k;return 0},Pc=!0,wb,xb,Na={inflateReset:Ac,inflateReset2:Bc,inflateResetKeep:zc,inflateInit:function(a){return Cc(a,15)},inflateInit2:Cc,inflate:function(a,b){var c,d,e,g,h,f,q,m,n,k,l,p,t,v,r,u,y,x,w=new D.Buf8(4),C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;c=a.state;12===c.mode&&(c.mode=13);h=a.next_out;e=a.output;q=a.avail_out;g=a.next_in;
d=a.input;f=a.avail_in;m=c.hold;n=c.bits;k=f;l=q;x=0;a:for(;;)switch(c.mode){case 1:if(0===c.wrap){c.mode=13;break}for(;16>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}if(c.wrap&2&&35615===m){c.check=0;w[0]=m&255;w[1]=m>>>8&255;c.check=O(c.check,w,2,0);n=m=0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((m&255)<<8)+(m>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(m&15)){a.msg="unknown compression method";c.mode=30;break}m>>>=4;n-=4;t=(m&15)+8;if(0===c.wbits)c.wbits=
t;else if(t>c.wbits){a.msg="invalid window size";c.mode=30;break}c.dmax=1<<t;a.adler=c.check=1;c.mode=m&512?10:12;n=m=0;break;case 2:for(;16>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.flags=m;if(8!==(c.flags&255)){a.msg="unknown compression method";c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=m>>8&1);c.flags&512&&(w[0]=m&255,w[1]=m>>>8&255,c.check=O(c.check,w,2,0));n=m=0;c.mode=3;case 3:for(;32>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.head&&
(c.head.time=m);c.flags&512&&(w[0]=m&255,w[1]=m>>>8&255,w[2]=m>>>16&255,w[3]=m>>>24&255,c.check=O(c.check,w,4,0));n=m=0;c.mode=4;case 4:for(;16>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.head&&(c.head.xflags=m&255,c.head.os=m>>8);c.flags&512&&(w[0]=m&255,w[1]=m>>>8&255,c.check=O(c.check,w,2,0));n=m=0;c.mode=5;case 5:if(c.flags&1024){for(;16>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.length=m;c.head&&(c.head.extra_len=m);c.flags&512&&(w[0]=m&255,w[1]=m>>>8&255,c.check=O(c.check,w,2,0));n=m=0}else c.head&&
(c.head.extra=null);c.mode=6;case 6:if(c.flags&1024&&(p=c.length,p>f&&(p=f),p&&(c.head&&(t=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),D.arraySet(c.head.extra,d,g,p,t)),c.flags&512&&(c.check=O(c.check,d,p,g)),f-=p,g+=p,c.length-=p),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===f)break a;p=0;do t=d[g+p++],c.head&&t&&65536>c.length&&(c.head.name+=String.fromCharCode(t));while(t&&p<f);c.flags&512&&(c.check=O(c.check,d,p,g));f-=p;g+=p;if(t)break a}else c.head&&
(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.flags&4096){if(0===f)break a;p=0;do t=d[g+p++],c.head&&t&&65536>c.length&&(c.head.comment+=String.fromCharCode(t));while(t&&p<f);c.flags&512&&(c.check=O(c.check,d,p,g));f-=p;g+=p;if(t)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}if(m!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}n=m=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=
0;c.mode=12;break;case 10:for(;32>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}a.adler=c.check=yc(m);n=m=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=h,a.avail_out=q,a.next_in=g,a.avail_in=f,c.hold=m,c.bits=n,2;a.adler=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){m>>>=n&7;n-=n&7;c.mode=27;break}for(;3>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.last=m&1;m>>>=1;--n;switch(m&3){case 0:c.mode=14;break;case 1:t=c;if(Pc){wb=new D.Buf32(512);xb=new D.Buf32(32);for(p=
0;144>p;)t.lens[p++]=8;for(;256>p;)t.lens[p++]=9;for(;280>p;)t.lens[p++]=7;for(;288>p;)t.lens[p++]=8;Sa(1,t.lens,0,288,wb,0,t.work,{bits:9});for(p=0;32>p;)t.lens[p++]=5;Sa(2,t.lens,0,32,xb,0,t.work,{bits:5});Pc=!1}t.lencode=wb;t.lenbits=9;t.distcode=xb;t.distbits=5;c.mode=20;if(6===b){m>>>=2;n-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}m>>>=2;n-=2;break;case 14:m>>>=n&7;for(n-=n&7;32>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}if((m&65535)!==(m>>>16^65535)){a.msg=
"invalid stored block lengths";c.mode=30;break}c.length=m&65535;n=m=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(p=c.length){p>f&&(p=f);p>q&&(p=q);if(0===p)break a;D.arraySet(e,d,g,p,h);f-=p;g+=p;q-=p;h+=p;c.length-=p;break}c.mode=12;break;case 17:for(;14>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.nlen=(m&31)+257;m>>>=5;n-=5;c.ndist=(m&31)+1;m>>>=5;n-=5;c.ncode=(m&15)+4;m>>>=4;n-=4;if(286<c.nlen||30<c.ndist){a.msg="too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=
18;case 18:for(;c.have<c.ncode;){for(;3>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.lens[C[c.have++]]=m&7;m>>>=3;n-=3}for(;19>c.have;)c.lens[C[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;p={bits:c.lenbits};x=Sa(0,c.lens,0,19,c.lencode,0,c.work,p);c.lenbits=p.bits;if(x){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){r=c.lencode[m&(1<<c.lenbits)-1];p=r>>>24;r&=65535;if(p<=n)break;if(0===f)break a;f--;m+=d[g++]<<n;n+=8}if(16>r)m>>>=p,
n-=p,c.lens[c.have++]=r;else{if(16===r){for(t=p+2;n<t;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}m>>>=p;n-=p;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}t=c.lens[c.have-1];p=3+(m&3);m>>>=2;n-=2}else if(17===r){for(t=p+3;n<t;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}m>>>=p;n-=p;t=0;p=3+(m&7);m>>>=3;n-=3}else{for(t=p+7;n<t;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}m>>>=p;n-=p;t=0;p=11+(m&127);m>>>=7;n-=7}if(c.have+p>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;p--;)c.lens[c.have++]=
t}}if(30===c.mode)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;p={bits:c.lenbits};x=Sa(1,c.lens,0,c.nlen,c.lencode,0,c.work,p);c.lenbits=p.bits;if(x){a.msg="invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;p={bits:c.distbits};x=Sa(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,p);c.distbits=p.bits;if(x){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=f&&258<=q){a.next_out=
h;a.avail_out=q;a.next_in=g;a.avail_in=f;c.hold=m;c.bits=n;var z,A,B,I,H,J,G,L,F,M,Q=a;M=Q.state;F=Q.next_in;e=Q.input;L=F+(Q.avail_in-5);G=Q.next_out;d=Q.output;J=G-(l-Q.avail_out);H=G+(Q.avail_out-257);I=M.dmax;r=M.wsize;y=M.whave;u=M.wnext;v=M.window;t=M.hold;p=M.bits;n=M.lencode;m=M.distcode;q=(1<<M.lenbits)-1;f=(1<<M.distbits)-1;b:do c:for(15>p&&(t+=e[F++]<<p,p+=8,t+=e[F++]<<p,p+=8),z=n[t&q];;){h=z>>>24;t>>>=h;p-=h;h=z>>>16&255;if(0===h)d[G++]=z&65535;else if(h&16){g=z&65535;if(h&=15)p<h&&(t+=
e[F++]<<p,p+=8),g+=t&(1<<h)-1,t>>>=h,p-=h;15>p&&(t+=e[F++]<<p,p+=8,t+=e[F++]<<p,p+=8);z=m[t&f];d:for(;;){h=z>>>24;t>>>=h;p-=h;h=z>>>16&255;if(h&16){B=z&65535;h&=15;p<h&&(t+=e[F++]<<p,p+=8,p<h&&(t+=e[F++]<<p,p+=8));B+=t&(1<<h)-1;if(B>I){Q.msg="invalid distance too far back";M.mode=30;break b}t>>>=h;p-=h;h=G-J;if(B>h){h=B-h;if(h>y&&M.sane){Q.msg="invalid distance too far back";M.mode=30;break b}A=0;z=v;if(0===u){if(A+=r-h,h<g){g-=h;do d[G++]=v[A++];while(--h);A=G-B;z=d}}else if(u<h){if(A+=r+u-h,h-=
u,h<g){g-=h;do d[G++]=v[A++];while(--h);A=0;if(u<g){h=u;g-=h;do d[G++]=v[A++];while(--h);A=G-B;z=d}}}else if(A+=u-h,h<g){g-=h;do d[G++]=v[A++];while(--h);A=G-B;z=d}for(;2<g;)d[G++]=z[A++],d[G++]=z[A++],d[G++]=z[A++],g-=3;g&&(d[G++]=z[A++],1<g&&(d[G++]=z[A++]))}else{A=G-B;do d[G++]=d[A++],d[G++]=d[A++],d[G++]=d[A++],g-=3;while(2<g);g&&(d[G++]=d[A++],1<g&&(d[G++]=d[A++]))}}else if(0===(h&64)){z=m[(z&65535)+(t&(1<<h)-1)];continue d}else{Q.msg="invalid distance code";M.mode=30;break b}break}}else if(0===
(h&64)){z=n[(z&65535)+(t&(1<<h)-1)];continue c}else{h&32?M.mode=12:(Q.msg="invalid literal/length code",M.mode=30);break b}break}while(F<L&&G<H);g=p>>3;F-=g;p-=g<<3;Q.next_in=F;Q.next_out=G;Q.avail_in=F<L?5+(L-F):5-(F-L);Q.avail_out=G<H?257+(H-G):257-(G-H);M.hold=t&(1<<p)-1;M.bits=p;h=a.next_out;e=a.output;q=a.avail_out;g=a.next_in;d=a.input;f=a.avail_in;m=c.hold;n=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=0;;){r=c.lencode[m&(1<<c.lenbits)-1];p=r>>>24;t=r>>>16&255;r&=65535;if(p<=n)break;if(0===
f)break a;f--;m+=d[g++]<<n;n+=8}if(t&&0===(t&240)){v=p;u=t;for(y=r;;){r=c.lencode[y+((m&(1<<v+u)-1)>>v)];p=r>>>24;t=r>>>16&255;r&=65535;if(v+p<=n)break;if(0===f)break a;f--;m+=d[g++]<<n;n+=8}m>>>=v;n-=v;c.back+=v}m>>>=p;n-=p;c.back+=p;c.length=r;if(0===t){c.mode=26;break}if(t&32){c.back=-1;c.mode=12;break}if(t&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=t&15;c.mode=22;case 22:if(c.extra){for(t=c.extra;n<t;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.length+=m&(1<<c.extra)-1;m>>>=
c.extra;n-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){r=c.distcode[m&(1<<c.distbits)-1];p=r>>>24;t=r>>>16&255;r&=65535;if(p<=n)break;if(0===f)break a;f--;m+=d[g++]<<n;n+=8}if(0===(t&240)){v=p;u=t;for(y=r;;){r=c.distcode[y+((m&(1<<v+u)-1)>>v)];p=r>>>24;t=r>>>16&255;r&=65535;if(v+p<=n)break;if(0===f)break a;f--;m+=d[g++]<<n;n+=8}m>>>=v;n-=v;c.back+=v}m>>>=p;n-=p;c.back+=p;if(t&64){a.msg="invalid distance code";c.mode=30;break}c.offset=r;c.extra=t&15;c.mode=24;case 24:if(c.extra){for(t=
c.extra;n<t;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}c.offset+=m&(1<<c.extra)-1;m>>>=c.extra;n-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===q)break a;p=l-q;if(c.offset>p){p=c.offset-p;if(p>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}p>c.wnext?(p-=c.wnext,t=c.wsize-p):t=c.wnext-p;p>c.length&&(p=c.length);v=c.window}else v=e,t=h-c.offset,p=c.length;p>q&&(p=q);q-=p;c.length-=p;do e[h++]=v[t++];while(--p);
0===c.length&&(c.mode=21);break;case 26:if(0===q)break a;e[h++]=c.length;q--;c.mode=21;break;case 27:if(c.wrap){for(;32>n;){if(0===f)break a;f--;m|=d[g++]<<n;n+=8}l-=q;a.total_out+=l;c.total+=l;l&&(a.adler=c.check=c.flags?O(c.check,e,l,h-l):La(c.check,e,l,h-l));l=q;if((c.flags?m:yc(m))!==c.check){a.msg="incorrect data check";c.mode=30;break}n=m=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>n;){if(0===f)break a;f--;m+=d[g++]<<n;n+=8}if(m!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=
30;break}n=m=0}c.mode=29;case 29:x=1;break a;case 30:x=-3;break a;case 31:return-4;default:return-2}a.next_out=h;a.avail_out=q;a.next_in=g;a.avail_in=f;c.hold=m;c.bits=n;if((c.wsize||l!==a.avail_out&&30>c.mode&&(27>c.mode||4!==b))&&Dc(a,a.output,a.next_out,l-a.avail_out))return c.mode=31,-4;k-=a.avail_in;l-=a.avail_out;a.total_in+=k;a.total_out+=l;c.total+=l;c.wrap&&l&&(a.adler=c.check=c.flags?O(c.check,e,l,a.next_out-l):La(c.check,e,l,a.next_out-l));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?
128:0)+(20===c.mode||15===c.mode?256:0);(0===k&&0===l||4===b)&&0===x&&(x=-5);return x},inflateEnd:function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0},inflateGetHeader:function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0},inflateSetDictionary:function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=La(1,b,c,0),e!==d.check))return-3;if(Dc(a,
b,c,c))return d.mode=31,-4;d.havedict=1;return 0},inflateInfo:"pako inflate (from Nodeca project)"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},fd=function(){this.os=
this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},Qc=Object.prototype.toString;va.prototype.push=function(a,b){var c=this.strm,d=this.options.chunkSize,e=this.options.dictionary,g,f,k,q=!1;if(this.ended)return!1;b=b===~~b?b:!0===b?H.Z_FINISH:H.Z_NO_FLUSH;"string"===typeof a?c.input=ua.binstring2buf(a):"[object ArrayBuffer]"===Qc.call(a)?c.input=new Uint8Array(a):c.input=a;c.next_in=0;c.avail_in=c.input.length;do{0===c.avail_out&&
(c.output=new D.Buf8(d),c.next_out=0,c.avail_out=d);a=Na.inflate(c,H.Z_NO_FLUSH);a===H.Z_NEED_DICT&&e&&(a="string"===typeof e?ua.string2buf(e):"[object ArrayBuffer]"===Qc.call(e)?new Uint8Array(e):e,a=Na.inflateSetDictionary(this.strm,a));a===H.Z_BUF_ERROR&&!0===q&&(a=H.Z_OK,q=!1);if(a!==H.Z_STREAM_END&&a!==H.Z_OK)return this.onEnd(a),this.ended=!0,!1;if(c.next_out&&(0===c.avail_out||a===H.Z_STREAM_END||0===c.avail_in&&(b===H.Z_FINISH||b===H.Z_SYNC_FLUSH)))if("string"===this.options.to)g=ua.utf8border(c.output,
c.next_out),f=c.next_out-g,k=ua.buf2string(c.output,g),c.next_out=f,c.avail_out=d-f,f&&D.arraySet(c.output,c.output,g,f,0),this.onData(k);else this.onData(D.shrinkBuf(c.output,c.next_out));0===c.avail_in&&0===c.avail_out&&(q=!0)}while((0<c.avail_in||0===c.avail_out)&&a!==H.Z_STREAM_END);a===H.Z_STREAM_END&&(b=H.Z_FINISH);if(b===H.Z_FINISH)return a=Na.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===H.Z_OK;b===H.Z_SYNC_FLUSH&&(this.onEnd(H.Z_OK),c.avail_out=0);return!0};va.prototype.onData=function(a){this.chunks.push(a)};
va.prototype.onEnd=function(a){a===H.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):D.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var td=D.assign,xa={};td(xa,od,{Inflate:va,inflate:tb,inflateRaw:function(a,b){b=b||{};b.raw=!0;return tb(a,b)},ungzip:tb},H);var Ta=function(){var a;a=x.call(this)||this;a._outputCounter=0;a.setMetadata("filenames",{});a.setMetadata("checksums",{});return a};$jscomp.inherits(Ta,x);Ta.prototype._run=function(){var a=
this;this._outputCounter=0;this.getInputCategories().forEach(function(b){a._loadFile(b)})};Ta.prototype._loadFile=function(a){var b=this,c=new FileReader;c.onloadend=function(c){c=c.target.result;var d=b._getInput(a).name.split(/[\\/]/).pop(),g=d.split(".").pop(),f=Jc(c);b._metadata.filenames[a]=d;b._metadata.checksums[a]=f;if(g.localeCompare("pixp"))try{c=xa.inflate(c).buffer,console.log("File was un-gziped successfully")}catch(E){console.log("Pako: "+E+" (this content is not gziped)")}b._output[a]=
c;b._fileLoadCount()};c.onerror=function(){this._output[a]=null;b._fileLoadCount();console.warn("error reading file from category "+a)};c.readAsArrayBuffer(this._getInput(a))};Ta.prototype._fileLoadCount=function(){this._outputCounter++;this._outputCounter==this.getNumberOfInputs()&&this.triggerEvent("ready")};var eb=function(){var a;a=x.call(this)||this;a._outputCounter=0;a.setMetadata("filenames",{});a.setMetadata("checksums",{});return a};$jscomp.inherits(eb,x);eb.prototype._run=function(){var a=
this;this.getNumberOfInputs()?this._forEachInput(function(b,c){a._loadUrl(b,c)}):console.warn("No input was specified, cannot run this filer.")};eb.prototype._loadUrl=function(a,b){var c=this,d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onload=function(e){e=d.response;var g=b.split(/[\\/]/).pop(),f=g.split(".").pop(),k=Jc(e);c._metadata.filenames[a]=g;c._metadata.checksums[a]=k;if(f.localeCompare("pixp"))try{e=xa.inflate(e).buffer,console.log("File was un-gziped successfully")}catch(q){console.log("Pako: "+
q+" (this content is not gziped)")}c._output[a]=e;c._outputCounter++;c._outputCounter==c.getNumberOfInputs()&&c.triggerEvent("ready")};d.error=function(){console.log("here go the error")};d.send()};var y=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);a._type_enum={INT8:1,UINT8:2,INT16:3,UINT16:4,INT32:5,UINT32:6,FLT:7,DBL:8,STR:9};a._type_matching="int8 uint8 int16 uint16 int32 uint32 float32 float64 undef".split(" ");a.type_sizes=[0,1,1,2,2,4,4,
4,8,0];a._dv_offset=0;a._align=8;a._little_endian=!0;a._continuation_queue=[];a._dv=null;a._superblk={};a._start_offset=0;a._huge_id=0;return a};$jscomp.inherits(y,x);y.prototype.createLink=function(){return{hdr_offset:0,data_offset:0,data_length:0,n_filled:0,chunk_size:0,sym_btree:0,sym_lheap:0,name:"",attributes:{},children:[],array:void 0,type:-1,inflate:!1,dims:[]}};y.prototype.startAlignment=function(){this._start_offset=this._dv_offset};y.prototype.checkAlignment=function(){var a=this._dv_offset-
this._start_offset;if(0!==a%this._align){var b=this._align-a%this._align;this._dv_offset+=b;this.getMetadata("debug")&&console.log("skipping "+b+" bytes at "+a+" for alignmnent")}};y.prototype.skip=function(a){this._dv_offset+=a};y.prototype.seek=function(a){this._dv_offset=a};y.prototype.tell=function(){return this._dv_offset};y.prototype.getU8=function(){var a=this._dv.getUint8(this._dv_offset);this._dv_offset+=1;return a};y.prototype.getU16=function(){var a=this._dv.getUint16(this._dv_offset,this._little_endian);
this._dv_offset+=2;return a};y.prototype.getU32=function(){var a=this._dv.getUint32(this._dv_offset,this._little_endian);this._dv_offset+=4;return a};y.prototype.getU64=function(){var a=this._dv.getUint64(this._dv_offset,this._little_endian);this._dv_offset+=8;return a};y.prototype.getF32=function(){var a=this._dv.getFloat32(this._dv_offset,this._little_endian);this._dv_offset+=4;return a};y.prototype.getF64=function(){var a=this._dv.getFloat64(this._dv_offset,this._little_endian);this._dv_offset+=
8;return a};y.prototype.getOffset=function(a){var b;a=a||this._superblk.offsz;if(4===a)b=this._dv.getUint32(this._dv_offset,this._little_endian);else if(8===a)b=this._dv.getUint64(this._dv_offset,this._little_endian);else throw Error("Unsupported value for offset size "+a);this._dv_offset+=a;return b};y.prototype.getLength=function(){var a=this._dv.getUint64(this._dv_offset,this._little_endian);this._dv_offset+=this._superblk.lensz;return a};y.prototype.getString=function(a){var b="",c,d;for(c=0;c<
a;c+=1){d=this.getU8();if(0===d){this._dv_offset+=a-c-1;break}b+=String.fromCharCode(d)}return b};y.prototype.getArray=function(a,b,c){var d=this._getInput(),e=this._dv_offset;c&&(this._dv_offset=c);switch(a){case this._type_enum.INT8:a=new Int8Array(d,this._dv_offset,b);break;case this._type_enum.UINT8:a=new Uint8Array(d,this._dv_offset,b);break;case this._type_enum.INT16:if(0!==this._dv_offset%2)for(a=new ArrayBuffer(b),b/=2,a=new Int16Array(a),d=0;d<b;d+=1)a[d]=this.getU16();else a=new Int16Array(d,
this._dv_offset,b/2),this._dv_offset+=b;break;case this._type_enum.UINT16:if(0!==this._dv_offset%2)for(a=new ArrayBuffer(b),b/=2,a=new Uint16Array(a),d=0;d<b;d+=1)a[d]=this.getU16();else a=new Uint16Array(d,this._dv_offset,b/2),this._dv_offset+=b;break;case this._type_enum.INT32:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,a=new Int32Array(a),d=0;d<b;d+=1)a[d]=this.getU32();else a=new Int32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.UINT32:if(0!==this._dv_offset%
4)for(a=new ArrayBuffer(b),b/=4,a=new Uint32Array(a),d=0;d<b;d+=1)a[d]=this.getU32();else a=new Uint32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.FLT:if(0!==this._dv_offset%4)for(a=new ArrayBuffer(b),b/=4,a=new Float32Array(a),d=0;d<b;d+=1)a[d]=this.getF32();else a=new Float32Array(d,this._dv_offset,b/4),this._dv_offset+=b;break;case this._type_enum.DBL:if(0!==this._dv_offset%8)for(a=new ArrayBuffer(b),b/=8,a=new Float64Array(a),d=0;d<b;d+=1)a[d]=this.getF64();else a=
new Float64Array(d,this._dv_offset,b/8),this._dv_offset+=b;break;default:throw Error("Bad type in this.getArray "+a);}c&&(this._dv_offset=e);return a};y.prototype.getUXX=function(a){var b,c;switch(a){case 1:b=this._dv.getUint8(this._dv_offset);break;case 2:b=this._dv.getUint16(this._dv_offset,this._little_endian);break;case 4:b=this._dv.getUint32(this._dv_offset,this._little_endian);break;case 8:b=this._dv.getUint64(this._dv_offset,this._little_endian);break;default:if(b=0,this._little_endian)for(c=
a-1;0<=c;c--)b=(b<<8)+this._dv.getUint8(this._dv_offset+c);else for(c=0;c<a;c++)b=(b<<8)+this._dv.getUint8(this._dv_offset+c)}this._dv_offset+=a;return b};y.prototype.checkSignature=function(a){var b;for(b=0;b<a.length;b+=1)if(this._dv.getUint8(this._dv_offset+b)!==a.charCodeAt(b))return!1;this.skip(a.length);return!0};y.prototype.hdf5Superblock=function(){var a={};if(!this.checkSignature("\u0089HDF\r\n\u001a\n"))throw Error("Bad magic string in HDF5");a.sbver=this.getU8();if(2<a.sbver)throw Error("Unsupported HDF5 superblock version "+
a.sbver);1>=a.sbver?(a.fsver=this.getU8(),a.rgver=this.getU8(),this.skip(1),a.shver=this.getU8(),a.offsz=this.getU8(),a.lensz=this.getU8(),this.skip(1),a.gln_k=this.getU16(),a.gin_k=this.getU16(),a.cflags=this.getU32(),1===a.sbver&&(a.isin_k=this.getU16(),this.skip(2)),a.base_addr=this.getOffset(a.offsz),a.gfsi_addr=this.getOffset(a.offsz),a.eof_addr=this.getOffset(a.offsz),a.dib_addr=this.getOffset(a.offsz),a.root_ln_offs=this.getOffset(a.offsz),a.root_addr=this.getOffset(a.offsz),a.root_cache_type=
this.getU32(),this.skip(4),this.skip(16)):(a.offsz=this.getU8(),a.lensz=this.getU8(),a.cflags=this.getU8(),a.base_addr=this.getOffset(a.offsz),a.ext_addr=this.getOffset(a.offsz),a.eof_addr=this.getOffset(a.offsz),a.root_addr=this.getOffset(a.offsz),a.checksum=this.getU32());this.getMetadata("debug")&&console.log("HDF5 SB "+a.sbver+" "+a.offsz+" "+a.lensz+" "+a.cflags);return a};y.prototype.hdf5FractalHeapHeader=function(){var a={};if(!this.checkSignature("FRHP"))throw Error("Bad or missing FRHP signature");
a.ver=this.getU8();a.idlen=this.getU16();a.iof_el=this.getU16();a.flags=this.getU8();a.objmax=this.getU32();a.objnid=this.getLength();a.objbta=this.getOffset();a.nf_blk=this.getLength();a.af_blk=this.getOffset();a.heap_total=this.getLength();a.heap_alloc=this.getLength();a.bai_offset=this.getLength();a.heap_nobj=this.getLength();a.heap_chuge=this.getLength();a.heap_nhuge=this.getLength();a.heap_ctiny=this.getLength();a.heap_ntiny=this.getLength();a.table_width=this.getU16();a.start_blksz=this.getLength();
a.max_blksz=this.getLength();a.max_heapsz=this.getU16();a.rib_srows=this.getU16();a.root_addr=this.getOffset();a.rib_crows=this.getU16();var b=Math.log2(a.max_blksz)-Math.log2(a.start_blksz)+2;a.K=Math.min(a.rib_crows,b)*a.table_width;a.N=a.rib_crows<b?0:a.K-b*a.table_width;this.getMetadata("debug")&&(console.log("FRHP V"+a.ver+" F"+a.flags+" "+a.objbta+" Total:"+a.heap_total+" Alloc:"+a.heap_alloc+" #obj:"+a.heap_nobj+" width:"+a.table_width+" start_blksz:"+a.start_blksz+" max_blksz:"+a.max_blksz+
" "+a.max_heapsz+" srows:"+a.rib_srows+" crows:"+a.rib_crows+" "+a.heap_nhuge),console.log("   K: "+a.K+" N: "+a.N));if(0<a.iof_el)throw Error("Filters present in fractal heap.");return a};y.prototype.hdf5V2BtreeHeader=function(){var a={};if(!this.checkSignature("BTHD"))throw Error("Bad or missing BTHD signature");a.ver=this.getU8();a.type=this.getU8();a.nodesz=this.getU32();a.recsz=this.getU16();a.depth=this.getU16();a.splitp=this.getU8();a.mergep=this.getU8();a.root_addr=this.getOffset();a.root_nrec=
this.getU16();a.total_nrec=this.getLength();a.checksum=this.getU32();this.getMetadata("debug")&&console.log("BTHD V"+a.ver+" T"+a.type+" "+a.nodesz+" "+a.recsz+" "+a.depth+" "+a.root_addr+" "+a.root_nrec+" "+a.total_nrec);return a};y.prototype.hdf5V2BtreeRecords=function(a,b,c,d){var e,g,f;if(1===b)for(b=0;b<c;b++)g=this.getOffset(),f=this.getLength(),a=this.getLength(),this.getMetadata("debug")&&console.log("  -> "+g+" "+f+" "+a+" "+this._this._huge_id),e=this.tell(),a===this._this._huge_id&&(this.seek(g),
this.hdf5MsgAttribute(f,d)),this.seek(e);else if(8===b){var k,q;k=a.max_heapsz/8;b=Math.min(a.objmax,a.max_blksz);q=256>=b?1:65536>=b?2:4;for(b=0;b<c;b++){e=this.getU8();if(0!==(e&192))throw Error("Bad Fractal Heap ID version "+e);var m=e&48,n;if(16===m)this._this._huge_id=this.getUXX(7);else if(0===m)g=this.getUXX(k),f=this.getUXX(q);else throw Error("Can't handle this Heap ID: "+e);n=this.getU8();this.getU32();this.getU32();this.getMetadata("debug")&&console.log("  -> "+e+" "+g+" "+f+" "+n);e=this.tell();
if(16===m)if(this.seek(a.objbta),m=this.hdf5V2BtreeHeader(),1===m.type)this.seek(m.root_addr),this.hdf5V2BtreeLeafNode(a,m.root_nrec,d);else throw Error("Can only handle type-1 btrees");else m=this.hdf5FractalHeapOffset(a,g),this.seek(m),this.hdf5MsgAttribute(f,d);this.seek(e)}}else throw Error("Unhandled V2 btree type.");};y.prototype.hdf5V2BtreeLeafNode=function(a,b,c){if(!this.checkSignature("BTLF"))throw Error("Bad or missing BTLF signature");var d=this.getU8(),e=this.getU8();this.getMetadata("debug")&&
console.log("BTLF V"+d+" T"+e+" "+this.tell());this.hdf5V2BtreeRecords(a,e,b,c)};y.prototype.hdf5V2BtreeInternalNode=function(a,b,c,d){if(!this.checkSignature("BTIN"))throw Error("Bad or missing BTIN signature");var e=this.getU8(),g=this.getU8();this.getMetadata("debug")&&console.log("BTIN V"+e+" T"+g);this.hdf5V2BtreeRecords(a,g,b,d);for(a=0;a<=b;a++){d=this.getOffset();var e=this.getUXX(1),f;1<c&&(f=this.getUXX(1));this.getMetadata("debug")&&console.log(" child->"+d+" "+e+" "+f)}};y.prototype.hdf5GetMsgName=
function(a){var b="NIL;Dataspace;LinkInfo;Datatype;FillValue 1;FillValue 2;Link;ExternalFiles;Layout;BOGUS;GroupInfo;FilterPipeline;Attribute;ObjectComment;ObjectModTime 1;SharedMsgTable;ObjHdrContinue;SymbolTable;ObjectModTime 2;BtreeKValue;DriverInfo;AttrInfo;ObjectRefCnt;MESSAGE23;FileSpaceInfo".split(";");if(a<b.length)return b[a];throw Error("Unknown message type "+a+" "+this.tell());};y.prototype.hdf5V1BtreeNode=function(a){var b=this._getInput(),c,d={};if(!this.checkSignature("TREE"))throw Error("Bad TREE signature at "+
this.tell());d.keys=[];d.node_type=this.getU8();d.node_level=this.getU8();d.entries_used=this.getU16();d.left_sibling=this.getOffset();d.right_sibling=this.getOffset();this.getMetadata("debug")&&console.log("BTREE type "+d.node_type+" lvl "+d.node_level+" n_used "+d.entries_used+" "+d.left_sibling+" "+d.right_sibling);if(a){var e,g=[];for(c=0;c<d.entries_used;c+=1){d.keys[c]={};g[c]={};g[c].chunk_size=this.getU32();g[c].filter_mask=this.getU32();g[c].chunk_offsets=[];for(e=0;e<a.dims.length+1;e+=
1)g[c].chunk_offsets.push(this.getU64());d.keys[c].child_address=this.getOffset();c<d.entries_used&&this.getMetadata("debug")&&console.log("  BTREE "+c+" chunk_size "+g[c].chunk_size+" filter_mask "+g[c].filter_mask+" addr "+d.keys[c].child_address)}g[c]={};g[c].chunk_size=this.getU32();g[c].filter_mask=this.getU32();g[c].chunk_offsets=[];for(e=0;e<a.dims.length+1;e+=1)g[c].chunk_offsets.push(this.getU64());if(0===d.node_level){var f;for(c=0;c<d.entries_used;c+=1)if(e=g[c].chunk_size,f=d.keys[c].child_address,
a.inflate){e=new Uint8Array(b,f,e);f=xa.inflate(e);switch(a.type){case this._type_enum.INT8:f=new Int8Array(f.buffer);break;case this._type_enum.UINT8:f=new Uint8Array(f.buffer);break;case this._type_enum.INT16:f=new Int16Array(f.buffer);break;case this._type_enum.UINT16:f=new Uint16Array(f.buffer);break;case this._type_enum.INT32:f=new Int32Array(f.buffer);break;case this._type_enum.UINT32:f=new Uint32Array(f.buffer);break;case this._type_enum.FLT:f=new Float32Array(f.buffer);break;case this._type_enum.DBL:f=
new Float64Array(f.buffer);break;default:throw Error("Unknown type code "+a.type);}a.array.length-a.n_filled<f.length&&(f=f.subarray(0,a.array.length-a.n_filled));a.array.set(f,a.n_filled);a.n_filled+=f.length;this.getMetadata("debug")&&console.log(a.name+" "+e.length+" "+f.length+" "+a.n_filled+"/"+a.array.length)}else f=this.getArray(a.type,e,f),a.array.set(f,a.n_filled),a.n_filled+=f.length}else for(c=0;c<d.entries_used;c+=1)this.seek(d.keys[c].child_address),this.hdf5V1BtreeNode(a)}else for(c=
0;c<d.entries_used;c+=1)d.keys[c]={},d.keys[c].key_value=this.getLength(),d.keys[c].child_address=this.getOffset(),this.getMetadata("debug")&&console.log("  BTREE "+c+" key "+d.keys[c].key_value+" adr "+d.keys[c].child_address);return d};y.prototype.hdf5GroupSymbolTable=function(a,b){if(!this.checkSignature("SNOD"))throw Error("Bad or missing SNOD signature");var c=this.getU8();this.skip(1);var d=this.getU16();this.getMetadata("debug")&&console.log("this.hdf5GroupSymbolTable V"+c+" #"+d+" '"+b.name+
"'");for(var e,g,f,k,q,c=0;c<2*this._superblk.gln_k;c+=1)e=this.getOffset(),g=this.getOffset(),f=this.getU32(),this.skip(20),c<d&&(k=this.createLink(),k.hdr_offset=g,a&&(q=this.tell(),this.seek(a.lh_dseg_off+e),k.name=this.getString(a.lh_dseg_len),this.seek(q)),this.getMetadata("debug")&&console.log("    "+c+" O "+e+" A "+g+" T "+f+" '"+k.name+"'"),b.children.push(k))};y.prototype.hdf5LocalHeap=function(){var a={};if(!this.checkSignature("HEAP"))throw Error("Bad or missing HEAP signature");a.lh_ver=
this.getU8();this.skip(3);a.lh_dseg_len=this.getLength();a.lh_flst_len=this.getLength();a.lh_dseg_off=this.getOffset();this.getMetadata("debug")&&console.log("LHEAP V"+a.lh_ver+" "+a.lh_dseg_len+" "+a.lh_flst_len+" "+a.lh_dseg_off);return a};y.prototype.hdf5MsgDataspace=function(a,b){var c,d=this.getU8(),e=this.getU8(),g=this.getU8();1>=d?this.skip(5):this.skip(1);var f=1,k=[],q;for(q=0;q<e;q+=1)k[q]=this.getLength(),f*=k[q];c=e*this._superblk.lensz+(1>=d?8:4);if(0!==(g&1))for(c+=e*this._superblk.lensz,
q=0;q<e;q+=1)this.getLength();if(0!==(g&2))for(c+=e*this._superblk.lensz,q=0;q<e;q+=1)this.getLength();d="this.hdf5MsgDataspace V"+d+" N"+e+" F"+g;this.getMetadata("debug")&&(0!==e&&(d+="["+k.join(", ")+"]"),console.log(d));c<a&&this.skip(a-c);b&&(b.dims=k);return f};y.prototype.hdf5MsgLinkInfo=function(a){var b=this,c=this.getU8(),d=this.getU8();0!==(d&1)&&this.getU64();var e=this.getOffset(),g=this.getOffset();0!==(d&2)&&this.getOffset();this.getMetadata("debug")&&console.log("this.hdf5MsgLinkInfo V"+
c+" F"+d+" FH "+e+" BT "+g);c=this.tell();if(e<this._superblk.eof_addr){this.seek(e);var f=this.hdf5FractalHeapHeader(),k=0;this.hdf5FractalHeapEnumerate(f,function(c,d,e,g){for(c=d+g;k<f.heap_nobj&&b.tell()<c;)b.hdf5MsgLink(a),k+=1;return!0})}this.seek(c)};y.prototype.dt_class_name=function(a){var b="Fixed-Point Floating-Point Time String BitField Opaque Compound Reference Enumerated Variable-Length Array".split(" ");if(a<b.length)return b[a];throw Error("Unknown datatype class: "+a);};y.prototype.hdf5MsgDatatype=
function(a){var b={},c=8,d,e,g,f,k,q,m,n,l=this.getU8();d=l>>4;e=l&15;f=[];for(l=0;3>l;l+=1)f[l]=this.getU8();l=this.getU32();this.getMetadata("debug")&&console.log("this.hdf5MsgDatatype V"+d+" C"+e+" "+this.dt_class_name(e)+" "+f[0]+"."+f[1]+"."+f[2]+" "+l);switch(e){case 0:e=this.getU16();g=this.getU16();switch(l){case 4:b.typ_type=f[0]&8?this._type_enum.INT32:this._type_enum.UINT32;break;case 2:b.typ_type=f[0]&8?this._type_enum.INT16:this._type_enum.UINT16;break;case 1:b.typ_type=f[0]&8?this._type_enum.INT8:
this._type_enum.UINT8;break;default:throw Error("Unknown type size "+l);}b.typ_length=l;c+=4;this.getMetadata("debug")&&console.log("  ("+e+" "+g+")");break;case 1:d="";if(this.getMetadata("debug"))switch(f[0]&65){case 0:d+="LE ";break;case 1:d+="BE ";break;case 65:d+="VX ";break;default:throw Error("Reserved fp byte order: "+f[0]);}e=this.getU16();g=this.getU16();f=this.getU8();k=this.getU8();q=this.getU8();m=this.getU8();n=this.getU32();this.getMetadata("debug")&&(d+=e+" "+g+" "+f+" "+k+" "+q+" "+
m+" "+n);if(64===g&&0===e&&52===f&&11===k&&0===q&&52===m&&1023===n&&8===l)b.typ_type=this._type_enum.DBL;else if(32===g&&0===e&&23===f&&8===k&&0===q&&23===m&&127===n&&4===l)b.typ_type=this._type_enum.FLT;else throw Error("Unsupported floating-point type");this.getMetadata("debug")&&console.log(d);b.typ_length=l;c+=12;break;case 3:b.typ_type=this._type_enum.STR;b.typ_length=l;break;default:throw Error("Unimplemented HDF5 data class "+e);}a>c&&this.skip(a-c);return b};y.prototype.hdf5MsgLayout=function(a){var b=
"",c=this.getU8(),d,e,g,f=[];g=1;if(1===c||2===c){e=this.getU8();d=this.getU8();this.skip(5);this.getMetadata("debug")&&(b+="this.hdf5MsgLayout V"+c+" N"+e+" C"+d);if(1===d||2===d)c=this.getOffset(),this.getMetadata("debug")&&(b+=" A"+c),a.data_offset=c;for(c=0;c<e;c+=1)f[c]=this.getU32(),g*=f[c];this.getMetadata("debug")&&(b+="["+f.join(", ")+"]");2===d&&(e=this.getU32(),a.chunk_size=g*e,this.getMetadata("debug")&&(b+=" E"+e));0===d?(g=this.getU32(),this.getMetadata("debug")&&(b+="("+g+")"),a.data_offset=
this.tell(),a.data_length=g):1===d&&(a.data_length=g)}else if(3===c)if(d=this.getU8(),b="this.hdf5MsgLayout V"+c+" C"+d,0===d)g=this.getU16(),this.getMetadata("debug")&&(b+="("+g+")"),a.data_offset=this.tell(),a.data_length=g;else if(1===d)d=this.getOffset(),g=this.getLength(),this.getMetadata("debug")&&(b+="("+d+", "+g+")"),a.data_offset=d,a.data_length=g;else{if(2===d){e=this.getU8();d=this.getOffset();a.data_offset=d;a.chunk_size=1;for(c=0;c<e-1;c+=1)f[c]=this.getU32(),g*=f[c];this.getMetadata("debug")&&
(b+="(N"+e+", A"+d+" ["+f.join(",")+"]");e=this.getU32();a.chunk_size=g*e;this.getMetadata("debug")&&(b+=" E"+e)}}else throw Error("Illegal layout version "+c);this.getMetadata("debug")&&console.log(b)};y.prototype.hdf5MsgPipeline=function(a){var b=this.getU8(),c=this.getU8(),d="this.hdf5MsgPipeline V"+b+" N"+c;1===b&&this.skip(6);this.getMetadata("debug")&&console.log(d);for(var e,g,f,k,d=0;d<c;d+=1){e=this.getU16();if(1!==e)throw Error("Unimplemented HDF5 filter "+e);if("object"!==typeof xa)throw Error("Need pako to inflate data.");
a.inflate=!0;g=1===b||256<e?this.getU16():0;f=this.getU16();k=this.getU16();0!==(k&1)&&(k+=1);0!==g&&this.skip(g);this.skip(4*k);this.getMetadata("debug")&&console.log("  "+d+" ID"+e+" F"+f+" "+k)}};y.prototype.hdf5MsgAttribute=function(a,b){var c=this.getU8(),d=this.getU8(),e=this.getU16(),g=this.getU16(),f=this.getU16(),k="this.hdf5MsgAttribute V"+c+" F"+d+" "+a+": ";if(0!==(d&3))throw Error("Shared dataspaces and datatypes are not supported.");3===c&&(d=this.getU8(),this.getMetadata("debug")&&
(k+=0===d?"ASCII":"UTF-8"));this.getMetadata("debug")&&(k+="("+e+" "+g+" "+f+")");3>c&&(e=8*Math.floor((e+7)/8),g=8*Math.floor((g+7)/8),f=8*Math.floor((f+7)/8),this.getMetadata("debug")&&(k+="/("+e+" "+g+" "+f+")"));d=this.getString(e);this.getMetadata("debug")&&console.log(k+(" Name: "+d));var k=this.hdf5MsgDatatype(g),q=this.hdf5MsgDataspace(f);a=0<a?3>c?a-(8+e+g+f):a-(9+e+g+f):k.typ_length*q;this.getMetadata("debug")&&console.log("  attribute data size "+a+" "+this.tell());a=k.typ_type===this._type_enum.STR?
this.getString(a):this.getArray(k.typ_type,a);b.attributes[d]=a};y.prototype.hdf5MsgGroupInfo=function(){var a=4,b=8,c=this.getU8(),d=this.getU8();0!==(d&1)&&(this.getU16(),this.getU16());0!==(d&2)&&(a=this.getU16(),b=this.getU16());this.getMetadata("debug")&&console.log("this.hdf5MsgGroupInfo V"+c+" F"+d+" ENT "+a+" LNL "+b)};y.prototype.hdf5MsgLink=function(a){var b=this.getU8(),c=0;if(1!==b)throw Error("Bad link message version "+b);var d=this.getU8();0!==(d&8)&&(c=this.getU8());0!==(d&4)&&this.getU64();
0!==(d&16)&&this.getU8();var e=this.getUXX(1<<(d&3)),g=this.createLink();g.name=this.getString(e);0===(d&8)&&(g.hdr_offset=this.getOffset());this.getMetadata("debug")&&console.log("this.hdf5MsgLink V"+b+" F"+d+" T"+c+" NM "+g.name+" OF "+g.hdr_offset);a.children.push(g)};y.prototype.hdf5FractalHeapDirectBlock=function(a,b,c,d){if(!this.checkSignature("FHDB"))throw Error("Bad or missing FHDB signature");var e=this.getU8();if(0!==e)throw Error("Bad FHDB version: "+e);this.getOffset();var g=this.getUXX(Math.ceil(a.max_heapsz/
8));0!==(a.flags&2)&&this.getU32();this.getMetadata("debug")&&console.log("FHDB V:"+e+" R:"+b+" O:"+g+" A:"+c);a=1>=b?a.start_blksz:Math.pow(2,b-1)*a.start_blksz;return d?d(b,c,g,a):!0};y.prototype.hdf5FractalHeapIndirectBlock=function(a,b){if(!this.checkSignature("FHIB"))throw Error("Bad or missing FHIB signature");var c=this.getU8();if(0!==c)throw Error("Bad FHIB version: "+c);this.getOffset();var d=this.getUXX(Math.ceil(a.max_heapsz/8));this.getMetadata("debug")&&console.log("FHIB V:"+c+" O:"+
d);for(var e=[],c=0;c<a.K;c+=1)d=this.getOffset(),d<this._superblk.eof_addr&&(this.getMetadata("debug")&&console.log("direct block at "+d),e.push(d));for(var g=[],c=0;c<a.N;c+=1)d=this.getOffset(),d<this._superblk.eof_addr&&(this.getMetadata("debug")&&console.log("indirect block at "+d),g.push(d));this.getU32();for(c=0;c<e.length;c++)if(this.seek(e[c]),!this.hdf5FractalHeapDirectBlock(a,c/a.table_width,e[c],b))return!1;for(c=0;c<g.length;c++)if(this.seek(g[c]),!this.hdf5FractalHeapIndirectBlock(a,
b))return!1;return!0};y.prototype.hdf5FractalHeapEnumerate=function(a,b){this.seek(a.root_addr);0===a.K?this.hdf5FractalHeapDirectBlock(a,0,a.root_addr,b):this.hdf5FractalHeapIndirectBlock(a,b)};y.prototype.hdf5FractalHeapOffset=function(a,b){var c;this.hdf5FractalHeapEnumerate(a,function(a,e,g,f){return b>=g&&b<g+f?(c=e+(b-g),!1):!0});return c};y.prototype.hdf5MsgAttrInfo=function(a){var b=this.getU8();if(0!==b)throw Error("Bad attribute information message version: "+b);var c=this.getU8();0!==(c&
1)&&this.getU16();var d=this.getOffset(),e=this.getOffset();0!==(c&2)&&this.getOffset();this.getMetadata("debug")&&console.log("this.hdf5MsgAttrInfo V"+b+" F"+c+" HP "+d+" AN "+e);var b=this.tell(),g;d<this._superblk.eof_addr&&(this.seek(d),g=this.hdf5FractalHeapHeader());if(e<this._superblk.eof_addr){this.seek(e);d=this.hdf5V2BtreeHeader();if(8!==d.type)throw Error("Can only handle indexed attributes.");this.seek(d.root_addr);0<d.depth?this.hdf5V2BtreeInternalNode(g,d.root_nrec,d.depth,a):this.hdf5V2BtreeLeafNode(g,
d.root_nrec,a)}this.seek(b)};y.prototype.hdf5ProcessMessage=function(a,b){var c={};switch(a.hm_type){case 1:this.hdf5MsgDataspace(a.hm_size,b);break;case 2:this.hdf5MsgLinkInfo(b);break;case 3:a=this.hdf5MsgDatatype(a.hm_size);b&&(b.type=a.typ_type);break;case 6:this.hdf5MsgLink(b);break;case 8:this.hdf5MsgLayout(b);break;case 10:this.hdf5MsgGroupInfo();break;case 11:this.hdf5MsgPipeline(b);break;case 12:this.hdf5MsgAttribute(a.hm_size,b);break;case 16:c.cq_off=this.getOffset();c.cq_len=this.getLength();
this._continuation_queue.push(c);this.getMetadata("debug")&&console.log("hdf5MsgObjHdrContinue "+c.cq_off+" "+c.cq_len);break;case 17:b.sym_btree=this.getOffset();b.sym_lheap=this.getOffset();this.getMetadata("debug")&&console.log("hdf5MsgSymbolTable "+b.sym_btree+" "+b.sym_lheap);break;case 21:this.hdf5MsgAttrInfo(b);break;case 0:case 4:case 5:case 7:case 18:case 19:case 20:case 22:case 24:this.skip(a.hm_size);break;default:throw Error("Unknown message type: "+a.hm_type);}};y.prototype.hdf5V2ObjectHeader=
function(a){if(!this.checkSignature("OHDR"))throw Error("Bad or missing OHDR signature");var b=this.getU8(),c=this.getU8();0!==(c&32)&&(this.getU32(),this.getU32(),this.getU32(),this.getU32());0!==(c&16)&&(this.getU16(),this.getU16());var d=this.getUXX(1<<(c&3)),e=0,g=0,f=d;for(this.getMetadata("debug")&&console.log("this.hdf5V2ObjectHeader V"+b+" F"+c+" HS"+d);;){for(;8<=f-g;)b={},b.hm_type=this.getU8(),b.hm_size=this.getU16(),b.hm_flags=this.getU8(),this.getMetadata("debug")&&console.log("  msg"+
e+" F"+b.hm_flags+" T "+b.hm_type+" S "+b.hm_size+" ("+g+"/"+f+") "+this.hdf5GetMsgName(b.hm_type)),0!==(c&4)&&(b.hm_corder=this.getU16()),d=this.tell(),this.hdf5ProcessMessage(b,a),this.seek(d+b.hm_size),g+=b.hm_size+4,e+=1;4<f-g&&this.skip(f-(g+4));this.getU32();if(0!==this._continuation_queue.length){if(b=this._continuation_queue.shift(),this.seek(b.cq_off),f=b.cq_len-4,g=0,this.getMetadata("debug")&&console.log("continuing with "+b.cq_len+" bytes at "+this.tell()),!this.checkSignature("OCHK"))throw Error("Bad v2 object continuation");
}else break}a.children.forEach(function(a,b){that.seek(a.hdr_offset);that.getMetadata("debug")&&console.log(b+" "+a.hdr_offset+" "+a.name);this.checkSignature("OHDR")?(that.seek(a.hdr_offset),that.hdf5V2ObjectHeader(a)):(that.seek(a.hdr_offset),that.hdf5V1ObjectHeader(a))})};y.prototype.loadData=function(a){var b=this;if(0!==a.chunk_size){this.seek(a.data_offset);var c=1,d;for(d=0;d<a.dims.length;d+=1)c*=a.dims[d];c*=this.typeSize(a.type);this.getMetadata("debug")&&console.log("allocating "+c+" bytes");
c=new ArrayBuffer(c);a.n_filled=0;switch(a.type){case this._type_enum.INT8:a.array=new Int8Array(c);break;case this._type_enum.UINT8:a.array=new Uint8Array(c);break;case this._type_enum.INT16:a.array=new Int16Array(c);break;case this._type_enum.UINT16:a.array=new Uint16Array(c);break;case this._type_enum.INT32:a.array=new Int32Array(c);break;case this._type_enum.UINT32:a.array=new Uint32Array(c);break;case this._type_enum.FLT:a.array=new Float32Array(c);break;case this._type_enum.DBL:a.array=new Float64Array(c);
break;default:throw Error("Illegal type: "+a.type);}this.hdf5V1BtreeNode(a)}else 0<a.data_offset&&a.data_offset<this._superblk.eof_addr?(this.getMetadata("debug")&&console.log("loading "+a.data_length+" bytes from "+a.data_offset+" to "+a.name),a.array=this.getArray(a.type,a.data_length,a.data_offset)):this.getMetadata("debug")&&console.log("data not present for /"+a.name+"/");a.children.forEach(function(a){b.loadData(a)})};y.prototype.hdf5V1ObjectHeader=function(a){var b=this,c,d,e,f;this.startAlignment();
c=this.getU8();this.skip(1);d=this.getU16();e=this.getU32();f=this.getU32();if(1!==c)throw Error("Bad v1 object header version: "+c);this.getMetadata("debug")&&console.log("this.hdf5V1ObjectHeader V"+c+" #M "+d+" RC "+e+" HS "+f);e=f;var h;for(c=0;c<d;c+=1){if(8>=e)if(0!==this._continuation_queue.length)e=this._continuation_queue.shift(),this.seek(e.cq_off),e=e.cq_len,this.getMetadata("debug")&&console.log("continuing with "+e+" bytes at "+this.tell()),this.startAlignment();else break;this.checkAlignment();
f={};f.hm_type=this.getU16();f.hm_size=this.getU16();f.hm_flags=this.getU8();if(0!==f.hm_size%8)throw Error("Size is not 8-byte aligned: "+f.hm_size);this.skip(3);e-=8+f.hm_size;this.getMetadata("debug")&&console.log("  msg"+c+" F "+f.hm_flags+" T "+f.hm_type+" S "+f.hm_size+"("+e+") "+this.hdf5GetMsgName(f.hm_type));h=this.tell();this.hdf5ProcessMessage(f,a);this.seek(h+f.hm_size)}if(0!==a.sym_btree&&0!==a.sym_lheap){this.seek(a.sym_btree);d=this.hdf5V1BtreeNode();this.seek(a.sym_lheap);c=this.hdf5LocalHeap();
for(e=0;e<d.entries_used;e+=1)this.seek(d.keys[e].child_address),this.checkSignature("SNOD")?(this.seek(d.keys[e].child_address),this.hdf5GroupSymbolTable(c,a)):(this.seek(d.keys[e].child_address),this.hdf5V1ObjectHeader(a));a.children.forEach(function(a){b.seek(a.hdr_offset);b.hdf5V1ObjectHeader(a)})}};y.prototype.getTypeMatchMinc=function(a){return this._type_matching[a-1]};y.prototype.defined=function(a){return"undefined"!==typeof a};y.prototype.typeName=function(a){return this.defined(a)?a.constructor.name:
"undefined"};y.prototype.typeSize=function(a){if(a>=this._type_enum.INT8&&a<this.type_sizes.length)return this.type_sizes[a];throw Error("Unknown type "+a);};y.prototype.typeIsFloat=function(a){return a>=this._type_enum.FLT&&a<=this._type_enum.DBL};y.prototype.join=function(a,b){var c="";if(a&&a.length){var d;for(d=0;d<a.length-1;d+=1)c+=a[d],c+=b;c+=a[d]}return c};y.prototype.printStructure=function(a,b){var c=this,d,e="";for(d=0;d<2*b;d+=1)e+=" ";e+=a.name+(a.children.length?"/":"");0<a.type&&(e+=
" "+this.typeName(a.array),a.dims.length&&(e+="["+a.dims.join(", ")+"]"),e=a.array?e+(":"+a.array.length):e+" NULL");console.log(e);Object.keys(a.attributes).forEach(function(f){var g=a.attributes[f];e="";for(d=0;d<2*b+1;d+=1)e+=" ";e+=a.name+":"+f+" "+c.typeName(g)+"["+g.length+"] ";"string"===typeof g?e+=JSON.stringify(g):(e+="{"+c.join(g.slice(0,16),", "),16<g.length&&(e+=", ..."),e+="}");console.log(e)});a.children.forEach(function(a){c.printStructure(a,b+1)})};y.prototype.findDataset=function(a,
b,c){var d=this,e;a&&a.name===b&&0<a.type?e=a:a.children.find(function(a){e=d.findDataset(a,b,c+1);return d.defined(e)});return e};y.prototype.findAttribute=function(a,b,c){var d=this,e=a.attributes[b];if(e)return e;a.children.find(function(a){e=d.findAttribute(a,b,c+1);return d.defined(e)});return e};y.prototype.scaleVoxels=function(a,b,c,d,e){var f,h;switch(this.getTypeMatchMinc(a.type)){case "int8":f=new ArrayBuffer(a.array.length*Int8Array.BYTES_PER_ELEMENT);h=new Int8Array(f);break;case "int16":f=
new ArrayBuffer(a.array.length*Int16Array.BYTES_PER_ELEMENT);h=new Int16Array(f);break;case "int32":f=new ArrayBuffer(a.array.length*Int32Array.BYTES_PER_ELEMENT);h=new Int32Array(f);break;case "float32":f=new ArrayBuffer(a.array.length*Float32Array.BYTES_PER_ELEMENT);h=new Float32Array(f);break;case "float64":f=new ArrayBuffer(a.array.length*Float64Array.BYTES_PER_ELEMENT);h=new Float64Array(f);break;case "uint8":f=new ArrayBuffer(a.array.length*Uint8Array.BYTES_PER_ELEMENT);h=new Uint8Array(f);
break;case "uint16":f=new ArrayBuffer(a.array.length*Uint16Array.BYTES_PER_ELEMENT);h=new Uint16Array(f);break;case "uint32":f=new ArrayBuffer(a.array.length*Uint32Array.BYTES_PER_ELEMENT);h=new Uint32Array(f);break;default:throw b="Unsupported data type: "+header.datatype,console.log({message:b}),Error(b);}if(1>a.dims.length-b.dims.length)throw Error("Too few slice dimensions: "+a.dims.length+" "+b.dims.length);var k=1,q;for(q=b.dims.length;q<a.dims.length;q+=1)k*=a.dims[q];e&&console.log(k+" voxels in slice.");
var m=0,n=0,l=-Number.MAX_VALUE,r=Number.MAX_VALUE,p=a.array;c=c.array;var t=b.array;e&&console.log("valid range is "+d[0]+" to "+d[1]);var v,u=d[0],y,x,w,z=this.typeIsFloat(a.type);for(q=0;q<b.array.length;q+=1)if(e&&console.log(q+" "+t[q]+" "+c[q]+" "+p[q*k]),z)for(x=0;x<k;x+=1)w=p[n],w<d[0]||w>d[1]?h[n]=0:(h[n]=w,m+=w,w>l&&(l=w),w<r&&(r=w)),n+=1;else for(a=d[1]-d[0],v=c[q]-t[q],y=t[q],x=0;x<k;x+=1)w=(p[n]-u)/a*v+y,w=w/c[q]*d[1],h[n]=w,m+=w,n+=1,w>l&&(l=w),w<r&&(r=w);e&&(console.log("Min: "+r),
console.log("Max: "+l),console.log("Sum: "+m),console.log("Mean: "+m/n));return f};y.prototype.isRgbVolume=function(a,b){var c=a.order;return"Uint8Array"===b.array.constructor.name&&0<c.length&&"vector_dimension"===c[c.length-1]&&3===a.vector_dimension.space_length};y.prototype.rgbVoxels=function(a){a=a.array;var b=a.length,c=new ArrayBuffer(b/3*4),d=new Uint8Array(c),e,f=0;for(e=0;e<b;e+=3)d[f+0]=a[e+0],d[f+1]=a[e+1],d[f+2]=a[e+2],d[f+3]=255,f+=4;return c};y.prototype.parseHeader=function(a){var b;
try{b=JSON.parse(a)}catch(c){throw a="server did not respond with valid JSON\nResponse was: \n"+a,console.log({message:a}),Error(a);}4===b.order.length&&(b.order=b.order.slice(1));b.datatype=b.datatype||"uint8";b.xspace.space_length=parseFloat(b.xspace.space_length);b.yspace.space_length=parseFloat(b.yspace.space_length);b.zspace.space_length=parseFloat(b.zspace.space_length);b.xspace.start=parseFloat(b.xspace.start);b.yspace.start=parseFloat(b.yspace.start);b.zspace.start=parseFloat(b.zspace.start);
b.xspace.step=parseFloat(b.xspace.step);b.yspace.step=parseFloat(b.yspace.step);b.zspace.step=parseFloat(b.zspace.step);b.xspace.direction_cosines=b.xspace.direction_cosines||[1,0,0];b.yspace.direction_cosines=b.yspace.direction_cosines||[0,1,0];b.zspace.direction_cosines=b.zspace.direction_cosines||[0,0,1];b.xspace.direction_cosines=b.xspace.direction_cosines.map(parseFloat);b.yspace.direction_cosines=b.yspace.direction_cosines.map(parseFloat);b.zspace.direction_cosines=b.zspace.direction_cosines.map(parseFloat);
b[b.order[0]].offset=b[b.order[1]].space_length*b[b.order[2]].space_length;b[b.order[1]].offset=b[b.order[2]].space_length;b[b.order[2]].offset=1;b.time&&(b.time.space_length=parseFloat(b.time.space_length),b.time.start=parseFloat(b.time.start),b.time.step=parseFloat(b.time.step),b.time.offset=b.xspace.space_length*b.yspace.space_length*b.zspace.space_length);return b};y.prototype.createMincData=function(a,b){switch(a.datatype){case "int8":a=new Int8Array(b);break;case "int16":a=new Int16Array(b);
break;case "int32":a=new Int32Array(b);break;case "float32":a=new Float32Array(b);break;case "float64":a=new Float64Array(b);break;case "uint8":a=new Uint8Array(b);break;case "uint16":a=new Uint16Array(b);break;case "uint32":case "rgb8":a=new Uint32Array(b);break;default:throw a="Unsupported data type: "+a.datatype,console.log({message:a}),Error(a);}return a};y.prototype._run=function(){var a=this,b=this._getInput(0);if(b){this._dv=new DataView(b);this._dv.getUint64=function(b,c){var d=a._dv.getUint32(b+
0,c);b=a._dv.getUint32(b+4,c);return c?(b<<32)+d:(d<<32)+b};var c=this.createLink();try{this._superblk=this.hdf5Superblock()}catch(q){console.warn("The input file is not a Minc2 file.");return}this.seek(this._superblk.root_addr);1>=this._superblk.sbver?this.hdf5V1ObjectHeader(c):this.hdf5V2ObjectHeader(c);this.loadData(c);this.getMetadata("debug")&&this.printStructure(c,0);b=this.findDataset(c,"image");if(!this.defined(b))throw Error("Can't find image dataset.");var d=this.findAttribute(b,"valid_range",
0);if(!this.defined(d)){var e,f;switch(b.type){case this._type_enum.INT8:e=-128;f=127;break;case this._type_enum.UINT8:e=0;f=255;break;case this._type_enum.INT16:e=-32768;f=32767;break;case this._type_enum.UINT16:e=0;f=65535;break;case this._type_enum.INT32:e=2147483648;f=-2147483649;break;case this._type_enum.UINT32:e=0,f=(1<<32)-1}d=Float32Array.of(e,f)}e=this.findDataset(c,"image-min");this.defined(e)||(e={array:Float32Array.of(0),dims:[]});f=this.findDataset(c,"image-max");this.defined(f)||(f=
{array:Float32Array.of(1),dims:[]});var h={},k=this.findAttribute(b,"dimorder",0);if("string"!==typeof k)throw Error("Can't find dimension order.");h.order=k.split(",");h.order.forEach(function(b){var d=a.findDataset(c,b);if(!a.defined(d))throw Error("Can't find dimension variable "+b);h[b]={};k=a.findAttribute(d,"step",0);a.defined(k)||(k=Float32Array.of(1));h[b].step=k[0];k=a.findAttribute(d,"start",0);a.defined(k)||(k=Float32Array.of(0));h[b].start=k[0];k=a.findAttribute(d,"length",0);if(!a.defined(k))throw Error("Can't find length for "+
b);h[b].space_length=k[0];k=a.findAttribute(d,"direction_cosines",0);a.defined(k)?h[b].direction_cosines=Array.prototype.slice.call(k):"xspace"===b?h[b].direction_cosines=[1,0,0]:"yspace"===b?h[b].direction_cosines=[0,1,0]:"zspace"===b&&(h[b].direction_cosines=[0,0,1])});this.isRgbVolume(h,b)?(h.order.pop(),h.datatype="rgb8",d=this.rgbVoxels(b)):(h.datatype=this.getTypeMatchMinc(b.type),d=this.scaleVoxels(b,e,f,d,this.getMetadata("debug")));b=this.parseHeader(JSON.stringify(h));d=this.createMincData(b,
d);this._addOutput(ea);e=this.getOutput();e.setData(d,b);e.setMetadata("format","minc2")}else console.warn('Minc2Decoder requires an ArrayBuffer as input "0". Unable to continue.')};var ya=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);a.setMetadata("debug",!1);return a};$jscomp.inherits(ya,x);ya.prototype.parseNifti1Header=function(a){var b={order:["zspace","yspace","xspace"],xspace:{},yspace:{},zspace:{}},c=null,d=new DataView(a,0,348),e=new Uint8Array(a,0,348);a=!0;var f=
d.getUint32(0,!0);348===f?a=!0:1543569408===f?a=!1:c="This does not look like a NIfTI-1 file.";f=d.getUint16(40,a);if(3>f||4<f)c="Cannot handle "+f+"-dimensional images yet.";e=String.fromCharCode.apply(null,e.subarray(344,348));"n+1\x00"!==e&&(c="Bad magic number: '"+e+"'");if(c)return console.warn("The input file is not a NIfTI file."),null;b.xspace.space_length=d.getUint16(42,a);b.yspace.space_length=d.getUint16(44,a);b.zspace.space_length=d.getUint16(46,a);var h=d.getUint16(48,a),c=d.getUint16(70,
a),k=d.getUint16(72,a),e=d.getFloat32(80,a),f=d.getFloat32(84,a),q=d.getFloat32(88,a),m=d.getFloat32(92,a),n=d.getFloat32(108,a);352>n&&(n=352);var l=d.getFloat32(112,a),r=d.getFloat32(116,a),p=d.getUint16(252,a),t=d.getUint16(254,a),v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];1<=h&&(b.time={},b.time.space_length=h,b.time.step=m,b.time.start=0,b.time.name="time",b.order=["time","zspace","yspace","xspace"]);b.bytes_per_voxel=k/8;b.must_swap_data=!a&&1<b.bytes_per_voxel;0<t?(v[0][0]=d.getFloat32(280,
a),v[0][1]=d.getFloat32(284,a),v[0][2]=d.getFloat32(288,a),v[0][3]=d.getFloat32(292,a),v[1][0]=d.getFloat32(296,a),v[1][1]=d.getFloat32(300,a),v[1][2]=d.getFloat32(304,a),v[1][3]=d.getFloat32(308,a),v[2][0]=d.getFloat32(312,a),v[2][1]=d.getFloat32(316,a),v[2][2]=d.getFloat32(320,a),v[2][3]=d.getFloat32(324,a)):0<p?(h=d.getFloat32(256,a),k=d.getFloat32(260,a),m=d.getFloat32(264,a),p=d.getFloat32(268,a),t=d.getFloat32(272,a),v=d.getFloat32(276,a),d=0>d.getFloat32(76,a)?-1:1,v=this.niftiQuaternToMat44(h,
k,m,p,t,v,e,f,q,d)):(v[0][0]=e,v[1][1]=f,v[2][2]=q);ea.transformToMinc(v,b);b.datatype=c;b.vox_offset=n;b.scl_slope=l;b.scl_inter=r;return b};ya.prototype.niftiQuaternToMat44=function(a,b,c,d,e,f,h,k,q,m){var g=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,1]],l;l=1-(a*a+b*b+c*c);1E-7>l?(l=1/Math.sqrt(a*a+b*b+c*c),a*=l,b*=l,c*=l,l=0):l=Math.sqrt(l);h=0<h?h:1;k=0<k?k:1;q=0<q?q:1;0>m&&(q=-q);g[0][0]=(l*l+a*a-b*b-c*c)*h;g[0][1]=2*(a*b-l*c)*k;g[0][2]=2*(a*c+l*b)*q;g[1][0]=2*(a*b+l*c)*h;g[1][1]=(l*l+b*b-a*a-c*
c)*k;g[1][2]=2*(b*c-l*a)*q;g[2][0]=2*(a*c-l*b)*h;g[2][1]=2*(b*c+l*a)*k;g[2][2]=(l*l+c*c-b*b-a*a)*q;g[0][3]=d;g[1][3]=e;g[2][3]=f;return g};ya.prototype.createNifti1Data=function(a,b){a.must_swap_data&&ea.swapn(new Uint8Array(b,a.vox_offset),a.bytes_per_voxel);switch(a.datatype){case 2:b=new Uint8Array(b,a.vox_offset);break;case 4:b=new Int16Array(b,a.vox_offset);break;case 8:b=new Int32Array(b,a.vox_offset);break;case 16:b=new Float32Array(b,a.vox_offset);break;case 64:b=new Float64Array(b,a.vox_offset);
break;case 256:b=new Int8Array(b,a.vox_offset);break;case 512:b=new Uint16Array(b,a.vox_offset);break;case 768:b=new Uint32Array(b,a.vox_offset);break;default:throw Error("Unsupported data type: "+a.datatype);}var c,d=a.scl_slope,e=a.scl_inter;if(0!==d){var f=new Float32Array(b.length);for(c=0;c<b.length;c++)f[c]=b[c]*d+e;b=f}4===a.order.length&&(a.order=a.order.slice(1));a[a.order[0]].offset=a[a.order[1]].space_length*a[a.order[2]].space_length;a[a.order[1]].offset=a[a.order[2]].space_length;a[a.order[2]].offset=
1;a.time&&(a.time.offset=a.xspace.space_length*a.yspace.space_length*a.zspace.space_length);return b};ya.prototype._run=function(){var a=this._getInput(0);if(a){var b=this.parseNifti1Header(a);if(b){a=this.createNifti1Data(b,a);this._addOutput(ea);var c=this.getOutput();c.setData(a,b);c.setMetadata("format","nifti")}}else console.warn('NiftiDecoder requires an ArrayBuffer as input "0". Unable to continue.')};var ud=Ga(function(a){var b=b||function(a){if(!("undefined"===typeof a||"undefined"!==typeof navigator&&
/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in b,f=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),k=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},q=function(b){setTimeout(function(){"string"===typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()},4E4)},m=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?
new Blob([String.fromCharCode(65279),a],{type:a.type}):a},n=function(d,e,g){g||(d=m(d));var n=this,l="application/octet-stream"===d.type,p,r=function(){for(var a=["writestart","progress","write","writeend"],a=[].concat(a),b=a.length;b--;){var c=n["on"+a[b]];if("function"===typeof c)try{c.call(n,n)}catch(ld){k(ld)}}};n.readyState=n.INIT;c?(p=(a.URL||a.webkitURL||a).createObjectURL(d),setTimeout(function(){b.href=p;b.download=e;var a=new MouseEvent("click");b.dispatchEvent(a);r();q(p);n.readyState=
n.DONE})):function(){if((h||l&&f)&&a.FileReader){var b=new FileReader;b.onloadend=function(){var c=h?b.result:b.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(c,"_blank")||(a.location.href=c);n.readyState=n.DONE;r()};b.readAsDataURL(d);n.readyState=n.INIT}else p||(p=(a.URL||a.webkitURL||a).createObjectURL(d)),l?a.location.href=p:a.open(p,"_blank")||(a.location.href=p),n.readyState=n.DONE,r(),q(p)}()},l=n.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(a,
b,c){b=b||a.name||"download";c||(a=m(a));return navigator.msSaveOrOpenBlob(a,b)};l.abort=function(){};l.readyState=l.INIT=0;l.WRITING=1;l.DONE=2;l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null;return function(a,b,c){return new n(a,b||a.name||"download",c)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||vb.content);a.exports&&(a.exports.saveAs=b)}),Ua=function(){var a;a=x.call(this)||this;a.setMetadata("filename","untitled.pixp");return a};
$jscomp.inherits(Ua,x);Ua.prototype.hasValidInput=function(){var a=this._getInput();return a&&(a.isOfType(C.TYPE())||a.isOfType(I.TYPE()))};Ua.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),a={dataType:a.getData().constructor.name,data:Array.prototype.slice.call(a.getData()),metadata:a.getMetadataCopy(),pixpipeType:a.constructor.name},a=JSON.stringify(a),b=new xa.Deflate({level:6,gzip:!0,header:{text:!0,time:+new Date,comment:"This file was created by Pixpipe.js"}});b.push(a,
!0);this._output[0]=new Blob([b.result],{type:"application/gzip"})}else console.warn("PixpEncoder can only encode Image2D and Image3D.")};Ua.prototype.download=function(){this.getOutput()?ud.saveAs(this.getOutput(),this.getMetadata("filename")):console.warn("No output computed yet.")};var fb=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(fb,x);fb.prototype._run=function(){console.log(this._input);if(this.hasValidInput()){var a=this._getInput(),
b=new xa.Inflate({level:6,to:"string"});b.push(a,!0);if(b.err)console.warn("This file is not a Pixp file.");else{a=null;try{a=JSON.parse(b.result)}catch(d){console.warn("Could not parse pixp file.");console.error(d);return}if(a.pixpipeType in pixpipe)if(b=window||this,b[a.dataType]){var b=new b[a.dataType](a.data),c=new pixpipe[a.pixpipeType];c.setRawData(b);c.setRawMetadata(a.metadata);this._output[0]=c}else console.warn("Data array from pixp file is unknown: "+a.dataType);else console.warn("Unknown type pixpipe."+
a.pixpipeType+", cannot create any output.")}}else console.warn("PixpDecoder can only decode ArrayBuffer.")};var yb=function(){var a;a=x.call(this)||this;a._decoders=[y,ya,fb];return a};$jscomp.inherits(yb,x);yb.prototype._run=function(){var a=this._getInput(0);if(a)for(var b=0;b<this._decoders.length;b++){var c=new this._decoders[b];c.addInput(a);c.update();if(c.getNumberOfOutputs()){this._output[0]=c.getOutput();this.setMetadata("decoderConstructor",this._decoders[b]);this.setMetadata("decoderName",
this._decoders[b].name);break}}else console.warn("The input buffer must not be null.")};var zb=[],z=function(a,b){b=b||{};void 0===a&&(a=8192);"number"===typeof a&&(a=new ArrayBuffer(a));var c=a.byteLength;b=b.offset?b.offset>>>0:0;a.buffer&&(c=a.byteLength-b,a=a.byteLength!==a.buffer.byteLength?a.buffer.slice(a.byteOffset+b,a.byteOffset+a.byteLength):b?a.buffer.slice(b):a.buffer);this.buffer=a;this.byteLength=this.length=c;this.offset=this.byteOffset=0;this.littleEndian=!0;this._data=new DataView(this.buffer);
this._increment=c||8192;this._mark=0};z.prototype.available=function(a){void 0===a&&(a=1);return this.offset+a<=this.length};z.prototype.isLittleEndian=function(){return this.littleEndian};z.prototype.setLittleEndian=function(){this.littleEndian=!0};z.prototype.isBigEndian=function(){return!this.littleEndian};z.prototype.setBigEndian=function(){this.littleEndian=!1};z.prototype.skip=function(a){void 0===a&&(a=1);this.offset+=a};z.prototype.seek=function(a){this.offset=a};z.prototype.mark=function(){this._mark=
this.offset};z.prototype.reset=function(){this.offset=this._mark};z.prototype.rewind=function(){this.offset=0};z.prototype.ensureAvailable=function(a){void 0===a&&(a=1);if(!this.available(a)){this._increment=a=this._increment+this._increment;a=this.length+a;var b=new Uint8Array(a);b.set(new Uint8Array(this.buffer));this.buffer=b.buffer;this.length=a;this._data=new DataView(this.buffer)}};z.prototype.readBoolean=function(){return 0!==this.readUint8()};z.prototype.readInt8=function(){return this._data.getInt8(this.offset++)};
z.prototype.readUint8=function(){return this._data.getUint8(this.offset++)};z.prototype.readByte=function(){return this.readUint8()};z.prototype.readBytes=function(a){void 0===a&&(a=1);for(var b=new Uint8Array(a),c=0;c<a;c++)b[c]=this.readByte();return b};z.prototype.readInt16=function(){var a=this._data.getInt16(this.offset,this.littleEndian);this.offset+=2;return a};z.prototype.readUint16=function(){var a=this._data.getUint16(this.offset,this.littleEndian);this.offset+=2;return a};z.prototype.readInt32=
function(){var a=this._data.getInt32(this.offset,this.littleEndian);this.offset+=4;return a};z.prototype.readUint32=function(){var a=this._data.getUint32(this.offset,this.littleEndian);this.offset+=4;return a};z.prototype.readFloat32=function(){var a=this._data.getFloat32(this.offset,this.littleEndian);this.offset+=4;return a};z.prototype.readFloat64=function(){var a=this._data.getFloat64(this.offset,this.littleEndian);this.offset+=8;return a};z.prototype.readChar=function(){return String.fromCharCode(this.readInt8())};
z.prototype.readChars=function(a){void 0===a&&(a=1);zb.length=a;for(var b=0;b<a;b++)zb[b]=this.readChar();return zb.join("")};z.prototype.writeBoolean=function(a){this.writeUint8(a?255:0)};z.prototype.writeInt8=function(a){this.ensureAvailable(1);this._data.setInt8(this.offset++,a)};z.prototype.writeUint8=function(a){this.ensureAvailable(1);this._data.setUint8(this.offset++,a)};z.prototype.writeByte=function(a){this.writeUint8(a)};z.prototype.writeBytes=function(a){this.ensureAvailable(a.length);
for(var b=0;b<a.length;b++)this._data.setUint8(this.offset++,a[b])};z.prototype.writeInt16=function(a){this.ensureAvailable(2);this._data.setInt16(this.offset,a,this.littleEndian);this.offset+=2};z.prototype.writeUint16=function(a){this.ensureAvailable(2);this._data.setUint16(this.offset,a,this.littleEndian);this.offset+=2};z.prototype.writeInt32=function(a){this.ensureAvailable(4);this._data.setInt32(this.offset,a,this.littleEndian);this.offset+=4};z.prototype.writeUint32=function(a){this.ensureAvailable(4);
this._data.setUint32(this.offset,a,this.littleEndian);this.offset+=4};z.prototype.writeFloat32=function(a){this.ensureAvailable(4);this._data.setFloat32(this.offset,a,this.littleEndian);this.offset+=4};z.prototype.writeFloat64=function(a){this.ensureAvailable(8);this._data.setFloat64(this.offset,a,this.littleEndian);this.offset+=8};z.prototype.writeChar=function(a){this.writeUint8(a.charCodeAt(0))};z.prototype.writeChars=function(a){for(var b=0;b<a.length;b++)this.writeUint8(a.charCodeAt(b))};z.prototype.toArray=
function(){return new Uint8Array(this.buffer,0,this.offset)};var Ab={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",
284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",
325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",
512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",
33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",
42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",
50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",
50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},Rc={},Bb;for(Bb in Ab)Rc[Ab[Bb]]=Bb;var vd={tagsById:Ab,tagsByName:Rc},Cb={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",
36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",
40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",
41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},Sc={},Db;for(Db in Cb)Sc[Cb[Db]]=Db;var wd={tagsById:Cb,tagsByName:Sc},Eb={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",
9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},Tc={},Fb;for(Fb in Eb)Tc[Eb[Fb]]=Fb;
var Uc={standard:vd,exif:wd,gps:{tagsById:Eb,tagsByName:Tc}},Va=function(a){if(!a)throw Error("missing kind");this.data=null;this.fields=new Map;this.kind=a;this._map=null};Va.prototype.get=function(a){if("number"===typeof a)return this.fields.get(a);if("string"===typeof a)return this.fields.get(Uc[this.kind].tagsByName[a]);throw Error("expected a number or string");};$jscomp.global.Object.defineProperties(Va.prototype,{map:{configurable:!0,enumerable:!0,get:function(){if(!this._map){this._map={};
for(var a=Uc[this.kind].tagsById,b=$jscomp.makeIterator(this.fields.keys()),c=b.next();!c.done;c=b.next())c=c.value,a[c]&&(this._map[a[c]]=this.fields.get(c))}return this._map}}});var xd=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,Gb=function(){return Va.call(this,"standard")||this};$jscomp.inherits(Gb,Va);$jscomp.global.Object.defineProperties(Gb.prototype,{size:{configurable:!0,enumerable:!0,get:function(){return this.width*this.height}},width:{configurable:!0,enumerable:!0,get:function(){return this.imageWidth}},
height:{configurable:!0,enumerable:!0,get:function(){return this.imageLength}},components:{configurable:!0,enumerable:!0,get:function(){return this.samplesPerPixel}},date:{configurable:!0,enumerable:!0,get:function(){var a=new Date,b=xd.exec(this.dateTime);a.setFullYear(b[1],b[2]-1,b[3]);a.setHours(b[4],b[5],b[6]);return a}},newSubfileType:{configurable:!0,enumerable:!0,get:function(){return this.get(254)}},imageWidth:{configurable:!0,enumerable:!0,get:function(){return this.get(256)}},imageLength:{configurable:!0,
enumerable:!0,get:function(){return this.get(257)}},bitsPerSample:{configurable:!0,enumerable:!0,get:function(){return this.get(258)}},compression:{configurable:!0,enumerable:!0,get:function(){return this.get(259)||1}},type:{configurable:!0,enumerable:!0,get:function(){return this.get(262)}},fillOrder:{configurable:!0,enumerable:!0,get:function(){return this.get(266)||1}},documentName:{configurable:!0,enumerable:!0,get:function(){return this.get(269)}},imageDescription:{configurable:!0,enumerable:!0,
get:function(){return this.get(270)}},stripOffsets:{configurable:!0,enumerable:!0,get:function(){return Ec(this.get(273))}},orientation:{configurable:!0,enumerable:!0,get:function(){return this.get(274)}},samplesPerPixel:{configurable:!0,enumerable:!0,get:function(){return this.get(277)}},rowsPerStrip:{configurable:!0,enumerable:!0,get:function(){return this.get(278)}},stripByteCounts:{configurable:!0,enumerable:!0,get:function(){return Ec(this.get(279))}},minSampleValue:{configurable:!0,enumerable:!0,
get:function(){return this.get(280)||0}},maxSampleValue:{configurable:!0,enumerable:!0,get:function(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}},xResolution:{configurable:!0,enumerable:!0,get:function(){return this.get(282)}},yResolution:{configurable:!0,enumerable:!0,get:function(){return this.get(283)}},planarConfiguration:{configurable:!0,enumerable:!0,get:function(){return this.get(284)||1}},resolutionUnit:{configurable:!0,enumerable:!0,get:function(){return this.get(296)||2}},dateTime:{configurable:!0,
enumerable:!0,get:function(){return this.get(306)}},predictor:{configurable:!0,enumerable:!0,get:function(){return this.get(317)||1}},sampleFormat:{configurable:!0,enumerable:!0,get:function(){return this.get(339)||1}},sMinSampleValue:{configurable:!0,enumerable:!0,get:function(){return this.get(340)||this.minSampleValue}},sMaxSampleValue:{configurable:!0,enumerable:!0,get:function(){return this.get(341)||this.maxSampleValue}}});var Vc=new Map([[1,[1,Fc]],[2,[1,function(a,b){for(var c=[],d="",e=0;e<
b;e++){var f=String.fromCharCode(a.readUint8());"\x00"===f?(c.push(d),d=""):d+=f}return 1===c.length?c[0]:c}]],[3,[2,function(a,b){if(1===b)return a.readUint16();for(var c=new Uint16Array(b),d=0;d<b;d++)c[d]=a.readUint16();return c}]],[4,[4,function(a,b){if(1===b)return a.readUint32();for(var c=new Uint32Array(b),d=0;d<b;d++)c[d]=a.readUint32();return c}]],[5,[8,function(a,b){if(1===b)return a.readUint32()/a.readUint32();for(var c=Array(b),d=0;d<b;d++)c[d]=a.readUint32()/a.readUint32();return c}]],
[6,[1,function(a,b){if(1===b)return a.readInt8();for(var c=new Int8Array(b),d=0;d<b;d++)c[d]=a.readInt8();return c}]],[7,[1,Fc]],[8,[2,function(a,b){if(1===b)return a.readInt16();for(var c=new Int16Array(b),d=0;d<b;d++)c[d]=a.readInt16();return c}]],[9,[4,function(a,b){if(1===b)return a.readInt32();for(var c=new Int32Array(b),d=0;d<b;d++)c[d]=a.readInt32();return c}]],[10,[8,function(a,b){if(1===b)return a.readInt32()/a.readInt32();for(var c=Array(b),d=0;d<b;d++)c[d]=a.readInt32()/a.readInt32();return c}]],
[11,[4,function(a,b){if(1===b)return a.readFloat32();for(var c=new Float32Array(b),d=0;d<b;d++)c[d]=a.readFloat32();return c}]],[12,[8,function(a,b){if(1===b)return a.readFloat64();for(var c=new Float64Array(b),d=0;d<b;d++)c[d]=a.readFloat64();return c}]]]),Wc={getByteLength:function(a,b){return Vc.get(a)[0]*b},readData:function(a,b,c){return Vc.get(b)[1](a,c)}},yd={ignoreImageData:!1,onlyFirst:!1},ka=function(a,b){a=z.call(this,a,b)||this;a._nextIFD=0;return a};$jscomp.inherits(ka,z);ka.prototype.decode=
function(a){a=Object.assign({},yd,a);var b=[];for(this.decodeHeader();this._nextIFD;)if(b.push(this.decodeIFD(a)),a.onlyFirst)return b[0];return b};ka.prototype.decodeHeader=function(){var a=this.readUint16();if(18761===a)this.setLittleEndian();else if(19789===a)this.setBigEndian();else throw Error("invalid byte order: 0x"+a.toString(16));a=this.readUint16();if(42!==a)throw Error("not a TIFF file");this._nextIFD=this.readUint32()};ka.prototype.decodeIFD=function(a){this.seek(this._nextIFD);var b;
b=a.kind?new Va(a.kind):new Gb;for(var c=this.readUint16(),d=0;d<c;d++)this.decodeIFDEntry(b);a.ignoreImageData||this.decodeImageData(b);this._nextIFD=this.readUint32();return b};ka.prototype.decodeIFDEntry=function(a){var b=this.offset,c=this.readUint16(),d=this.readUint16(),e=this.readUint32();if(1>d||12<d)this.skip(4);else{4<Wc.getByteLength(d,e)&&this.seek(this.readUint32());d=Wc.readData(this,d,e);a.fields.set(c,d);if(34665===c||34853===c){var e=this.offset,f;34665===c?f="exif":34853===c&&(f=
"gps");this._nextIFD=d;a[f]=this.decodeIFD({kind:f,ignoreImageData:!0});this.offset=e}this.seek(b);this.skip(12)}};ka.prototype.decodeImageData=function(a){var b=a.orientation;b&&1!==b&&Ea("orientation",b);switch(a.type){case 1:case 2:this.readStripData(a);break;default:Ea("image type",a.type)}};ka.prototype.readStripData=function(a){var b=a.width,c=a.height,d=a.bitsPerSample;if(d.length)for(var e=d,d=e[0],f=0;f<e.length;f++)e[f]!==d&&Ea("bit depth",e);e=a.sampleFormat;c*=b;f=c;f=8===d?new Uint8Array(1*
f):16===d?new Uint16Array(1*f):32===d&&3===e?new Float32Array(1*f):Ea("bit depth / sample format",d+" / "+e);for(var h=a.compression,b=a.rowsPerStrip*b,k=a.stripOffsets,l=a.stripByteCounts,m=0,n=0;n<k.length;n++){var r=this.getStripData(h,k[n],l[n]),u=c>b?b:c,c=c-u;if(8===d)for(var p=0;p<u;p++)f[m++]=r.getUint8(p);else if(16===d)for(var p=this.isLittleEndian(),t=0;t<2*u;t+=2)f[m++]=r.getUint16(t,p);else if(32===d&&3===e)for(p=this.isLittleEndian(),t=0;t<4*u;t+=4)f[m++]=r.getFloat32(t,p);else Ea("bitDepth",
d)}a.data=f};ka.prototype.getStripData=function(a,b,c){switch(a){case 1:return new DataView(this.buffer,b,c);case 2:case 32773:return Ea("Compression",a);default:throw Error("invalid compression: "+a);}};var zd={decode:function(a,b){return(new ka(a,b)).decode(b)}},Hb=function(){var a;a=x.call(this)||this;a.addInputValidator(0,ArrayBuffer);return a};$jscomp.inherits(Hb,x);Hb.prototype._run=function(){var a=this._getInput(0);a?(a=zd.decode(a),0<a.length?(a=a[0],this._addOutput(C).setData(a.data,a.width,
a.height,a.components)):console.warn("Could no decode this tiff file.")):console.warn('NiftiDecoder requires an ArrayBuffer as input "0". Unable to continue.')};var gb=function(){return R.call(this)||this};$jscomp.inherits(gb,R);gb.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(),b=a.getWidth()*a.getHeight(),c=a.getDataCopy();this._forEachPixelOfSuch(c,0,b,1);this._addOutput(C).setData(c,a.getWidth(),a.getHeight(),a.getComponentsPerPixel())}};gb.prototype._forEachPixelOfSuch=
function(a,b,c,d){if(this.hasEvent("pixel"))for(var e=this._getInput(),f=e.getData(),h=e.getComponentsPerPixel(),k;b<c;b+=d){var l=b*h,m=e.get2dPositionFrom1dIndex(b);k=f.slice(l,l+h);if((k=this.triggerEvent("pixel",m,k))&&k.length==h)for(m=0;m<h;m++)a[l+m]=k[m]}else console.warn("No function to apply per pixel was specified.")};var Ib=function(){var a;a=R.call(this)||this;a.addInputValidator(0,C);a.addInputValidator(1,C);return a};$jscomp.inherits(Ib,R);Ib.prototype._run=function(){if(this.hasValidInput()&&
this.hasSameSizeInput()&&this.hasValidInput()){var a=this._getInput(0),b=this._getInput(1);if(1!=b.getComponentsPerPixel())console.warn("The scaling image must have one single band.");else{for(var c=a.getWidth()*a.getHeight(),d=a.getComponentsPerPixel(),e=a.getDataCopy(),b=b.getData(),f=0;f<c;f++)for(var h=0;h<d;h++)e[f*d+h]*=b[f];this._addOutput(C).setData(e,a.getWidth(),a.getHeight())}}};var Ad=Ga(function(a,b){(function(b,d){a.exports=d()})(vb,function(){function a(a,b){for(var c=0;c<a.length;c++)if(a[c]===
b)return c;return-1}function b(a,b){this.type=a;this.value=void 0!==b&&null!==b?b:0}function e(a,b){this.tokens=a;this.parser=b;this.unaryOps=b.unaryOps;this.binaryOps=b.binaryOps;this.ternaryOps=b.ternaryOps;this.functions=b.functions}function f(a){return"string"===typeof a?JSON.stringify(a).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):a}function h(a,c,d,e,f){for(var g=[],K=[],k,m,n,l,Jb=0,p=a.length;Jb<p;Jb++)if(l=a[Jb],k=l.type,"INUMBER"===k)g.push(l);else if("IVAR"===k&&f.hasOwnProperty(l.value))l=
new b("INUMBER",f[l.value]),g.push(l);else if("IOP2"===k&&1<g.length)m=g.pop(),k=g.pop(),l=d[l.value],l=new b("INUMBER",l(k.value,m.value)),g.push(l);else if("IOP3"===k&&2<g.length)n=g.pop(),m=g.pop(),k=g.pop(),"?"===l.value?g.push(k.value?m.value:n.value):(l=e[l.value],l=new b("INUMBER",l(k.value,m.value,n.value)),g.push(l));else if("IOP1"===k&&0<g.length)k=g.pop(),l=c[l.value],l=new b("INUMBER",l(k.value)),g.push(l);else if("IEXPR"===k){for(;0<g.length;)K.push(g.shift());K.push(new b("IEXPR",h(l.value,
c,d,e,f)))}else if("IMEMBER"===k&&0<g.length)k=g.pop(),g.push(new b("INUMBER",k.value[l.value]));else{for(;0<g.length;)K.push(g.shift());K.push(l)}for(;0<g.length;)K.push(g.shift());return K}function k(a,c,d){for(var e=[],f=0,g=a.length;f<g;f++){var h=a[f],K=h.type;if("IVAR"===K&&h.value===c)for(h=0;h<d.tokens.length;h++)K=d.tokens[h],K="IOP1"===K.type?Y(K.value):"IOP2"===K.type?P(K.value):"IOP3"===K.type?ea(K.value):new b(K.type,K.value),e.push(K);else"IEXPR"===K?e.push(new b("IEXPR",k(h.value,c,
d))):e.push(h)}return e}function l(a,b,c){for(var d=[],e,f,g,h,K=0,k=a.length;K<k;K++)if(h=a[K],e=h.type,"INUMBER"===e)d.push(h.value);else if("IOP2"===e)f=d.pop(),e=d.pop(),h=b.binaryOps[h.value],d.push(h(e,f));else if("IOP3"===e)g=d.pop(),f=d.pop(),e=d.pop(),"?"===h.value?d.push(l(e?f:g,b,c)):(h=b.ternaryOps[h.value],d.push(h(e,f,g)));else if("IVAR"===e)if(h.value in b.functions)d.push(b.functions[h.value]);else if(e=c[h.value],void 0!==e)d.push(e);else throw Error("undefined variable: "+h.value);
else if("IOP1"===e)e=d.pop(),h=b.unaryOps[h.value],d.push(h(e));else if("IFUNCALL"===e){h=h.value;for(e=[];0<h--;)e.unshift(d.pop());h=d.pop();if(h.apply&&h.call)d.push(h.apply(void 0,e));else throw Error(h+" is not a function");}else if("IEXPR"===e)d.push(h.value);else if("IMEMBER"===e)e=d.pop(),d.push(e[h.value]);else throw Error("invalid Expression");if(1<d.length)throw Error("invalid Expression (parity)");return d[0]}function m(a,b){for(var c=[],d,e,g,h,K=0,k=a.length;K<k;K++)if(h=a[K],d=h.type,
"INUMBER"===d)"number"===typeof h.value&&0>h.value?c.push("("+h.value+")"):c.push(f(h.value));else if("IOP2"===d)e=c.pop(),d=c.pop(),h=h.value,b?"^"===h?c.push("Math.pow("+d+", "+e+")"):"and"===h?c.push("(!!"+d+" && !!"+e+")"):"or"===h?c.push("(!!"+d+" || !!"+e+")"):"||"===h?c.push("(String("+d+") + String("+e+"))"):"=="===h?c.push("("+d+" === "+e+")"):"!="===h?c.push("("+d+" !== "+e+")"):c.push("("+d+" "+h+" "+e+")"):c.push("("+d+" "+h+" "+e+")");else if("IOP3"===d)if(g=c.pop(),e=c.pop(),d=c.pop(),
h=h.value,"?"===h)c.push("("+d+" ? "+e+" : "+g+")");else throw Error("invalid Expression");else if("IVAR"===d)c.push(h.value);else if("IOP1"===d)d=c.pop(),h=h.value,"-"===h||"+"===h?c.push("("+h+d+")"):b?"not"===h?c.push("(!"+d+")"):"!"===h?c.push("fac("+d+")"):c.push(h+"("+d+")"):"!"===h?c.push("("+d+"!)"):c.push("("+h+" "+d+")");else if("IFUNCALL"===d){e=h.value;for(d=[];0<e--;)d.unshift(c.pop());h=c.pop();c.push(h+"("+d.join(", ")+")")}else if("IMEMBER"===d)d=c.pop(),c.push(d+"."+h.value);else if("IEXPR"===
d)c.push("("+m(h.value,b)+")");else throw Error("invalid Expression");if(1<c.length)throw Error("invalid Expression (parity)");return c[0]}function n(b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];"IVAR"===f.type&&-1===a(c,f.value)?c.push(f.value):"IEXPR"===f.type&&n(f.value,c)}}function r(a,b){return Number(a)+Number(b)}function u(a,b){return a-b}function p(a,b){return a*b}function t(a,b){return a/b}function v(a,b){return a%b}function w(a,b){return""+a+b}function x(a,b){return a===b}function y(a,
b){return a!==b}function z(a,b){return a>b}function A(a,b){return a<b}function B(a,b){return a>=b}function C(a,b){return a<=b}function D(a,b){return!(!a||!b)}function F(a,b){return!(!a&&!b)}function H(a){return(Math.exp(a)-Math.exp(-a))/2}function I(a){return(Math.exp(a)+Math.exp(-a))/2}function J(a){return Infinity===a?1:-Infinity===a?-1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))}function G(a){return-Infinity===a?a:Math.log(a+Math.sqrt(a*a+1))}function L(a){return Math.log(a+Math.sqrt(a*
a-1))}function O(a){return Math.log((1+a)/(1-a))/2}function M(a){return Math.log(a)*Math.LOG10E}function Q(a){return-a}function T(a){return!a}function W(a){return 0>a?Math.ceil(a):Math.floor(a)}function X(a){return Math.random()*(a||1)}function R(a){return ba(a+1)}function ca(a){return String(a).length}function Z(){for(var a=0,b=0,c=0,d=arguments.length;c<d;c++){var e=Math.abs(arguments[c]),f;b<e?(f=b/e,a=a*f*f+1,b=e):0<e?(f=e/b,a+=f*f):a+=e}return Infinity===b?Infinity:b*Math.sqrt(a)}function aa(a,
b,c){return a?b:c}function ba(a){var b,c;c=a;if(isFinite(c)&&c===Math.round(c)){if(0>=a)return isFinite(a)?Infinity:NaN;if(171<a)return Infinity;c=a-2;for(--a;1<c;)a*=c,c--;0===a&&(a=1);return a}if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*ba(1-a));if(171.35<=a)return Infinity;if(85<a){c=a*a;b=c*a;var d=b*a,e=d*a;return Math.sqrt(2*Math.PI/a)*Math.pow(a/Math.E,a)*(1+1/(12*a)+1/(288*c)-139/(51840*b)-571/(2488320*d)+163879/(209018880*e)+5246819/(75246796800*e*a))}--a;c=fa[0];for(b=1;b<fa.length;++b)c+=
fa[b]/(a+b);b=a+ia+.5;return Math.sqrt(2*Math.PI)*Math.pow(b,a+.5)*Math.exp(-b)*c}function da(a,b,c,d){this.type=a;this.value=b;this.line=c;this.column=d}function S(a,b,c,d,e){this.column=this.line=this.pos=0;this.current=null;this.unaryOps=b;this.binaryOps=c;this.ternaryOps=d;this.consts=e;this.expression=a;this.savedPosition=0;this.savedCurrent=null;this.savedColumn=this.savedLine=0}function Y(a){var c=ga[a];c||(c=ga[a]=new b("IOP1",a));return c}function P(a){var c=ha[a];c||(c=ha[a]=new b("IOP2",
a));return c}function ea(a){var c=ja[a];c||(c=ja[a]=new b("IOP3",a));return c}function N(a,b){this.parser=a;this.tokens=b;this.nextToken=this.current=null;this.next();this.savedNextToken=this.savedCurrent=null}function U(){this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||H,cosh:Math.cosh||I,tanh:Math.tanh||J,asinh:Math.asinh||G,acosh:Math.acosh||L,atanh:Math.atanh||O,sqrt:Math.sqrt,log:Math.log,ln:Math.log,lg:Math.log10||M,log10:Math.log10||
M,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||W,"-":Q,"+":Number,exp:Math.exp,not:T,length:ca,"!":R};this.binaryOps={"+":r,"-":u,"*":p,"/":t,"%":v,"^":Math.pow,"||":w,"==":x,"!=":y,">":z,"<":A,">=":B,"<=":C,and:D,or:F};this.ternaryOps={"?":aa};this.functions={random:X,fac:R,min:Math.min,max:Math.max,hypot:Math.hypot||Z,pyt:Math.hypot||Z,pow:Math.pow,atan2:Math.atan2,"if":aa,gamma:ba};this.consts={E:Math.E,PI:Math.PI,"true":!0,"false":!1}}b.prototype.toString=function(){switch(this.type){case "INUMBER":case "IOP1":case "IOP2":case "IOP3":case "IVAR":return this.value;
case "IFUNCALL":return"CALL "+this.value;case "IMEMBER":return"."+this.value;default:return"Invalid Instruction"}};e.prototype.simplify=function(a){a=a||{};return new e(h(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,a),this.parser)};e.prototype.substitute=function(a,b){b instanceof e||(b=this.parser.parse(String(b)));return new e(k(this.tokens,a,b),this.parser)};e.prototype.evaluate=function(a){a=a||{};return l(this.tokens,this,a)};e.prototype.toString=function(){return m(this.tokens,
!1)};e.prototype.symbols=function(){var a=[];n(this.tokens,a);return a};e.prototype.variables=function(){var a=[];n(this.tokens,a);var b=this.functions;return a.filter(function(a){return!(a in b)})};e.prototype.toJSFunction=function(a,b){var c=this,d=new Function(a,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+m(this.simplify(b).tokens,!0)+"; }");return function(){return d.apply(c,arguments)}};var ia=4.7421875,fa=[.9999999999999971,57.15623566586292,
-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];da.prototype.toString=function(){return this.type+": "+this.value};S.prototype.newToken=function(a,b,c,d){return new da(a,b,null!=c?c:this.line,null!=d?d:this.column)};S.prototype.save=function(){this.savedPosition=this.pos;this.savedCurrent=
this.current;this.savedLine=this.line;this.savedColumn=this.column};S.prototype.restore=function(){this.pos=this.savedPosition;this.current=this.savedCurrent;this.line=this.savedLine;this.column=this.savedColumn};S.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken("TEOF","EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isComma()||this.isNamedOp()||this.isConst()||this.isName())return this.current;
this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};S.prototype.isString=function(){var a=!1,b=this.line,c=this.column,d=this.pos,e=this.expression.charAt(d);if("'"===e||'"'===e){this.pos++;this.column++;for(var f=this.expression.indexOf(e,d+1);0<=f&&this.pos<this.expression.length;){this.pos=f+1;if("\\"!==this.expression.charAt(f-1)){a=this.expression.substring(d+1,f);this.current=this.newToken("TSTRING",this.unescape(a),b,c);b=a.indexOf("\n");for(c=-1;0<=b;)this.line++,
this.column=0,c=b,b=a.indexOf("\n",b+1);this.column+=a.length-c;a=!0;break}f=this.expression.indexOf(e,f+1)}}return a};S.prototype.isParen=function(){var a=this.expression.charAt(this.pos);return"("===a||")"===a?(this.current=this.newToken("TPAREN",a),this.pos++,this.column++,!0):!1};S.prototype.isComma=function(){return","===this.expression.charAt(this.pos)?(this.current=this.newToken("TCOMMA",","),this.pos++,this.column++,!0):!1};S.prototype.isConst=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=
this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&"."!==c&&("0">c||"9"<c)))break}return b>a&&(a=this.expression.substring(a,b),a in this.consts)?(this.current=this.newToken("TNUMBER",this.consts[a]),this.pos+=a.length,this.column+=a.length,!0):!1};S.prototype.isNamedOp=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&("0">c||"9"<c)))break}return b>a&&(a=
this.expression.substring(a,b),a in this.binaryOps||a in this.unaryOps||a in this.ternaryOps)?(this.current=this.newToken("TOP",a),this.pos+=a.length,this.column+=a.length,!0):!1};S.prototype.isName=function(){for(var a=this.pos,b=a;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!==c&&("0">c||"9"<c)))break}return b>a?(a=this.expression.substring(a,b),this.current=this.newToken("TNAME",a),this.pos+=a.length,this.column+=a.length,
!0):!1};S.prototype.isWhitespace=function(){for(var a=!1,b=this.expression.charAt(this.pos);" "===b||"\t"===b||"\n"===b||"\r"===b;){a=!0;this.pos++;this.column++;"\n"===b&&(this.line++,this.column=0);if(this.pos>=this.expression.length)break;b=this.expression.charAt(this.pos)}return a};var ka=/^[0-9a-f]{4}$/i;S.prototype.unescape=function(a){var b=a.indexOf("\\");if(0>b)return a;for(var c=a.substring(0,b);0<=b;){var d=a.charAt(++b);switch(d){case "'":c+="'";break;case '"':c+='"';break;case "\\":c+=
"\\";break;case "/":c+="/";break;case "b":c+="\b";break;case "f":c+="\f";break;case "n":c+="\n";break;case "r":c+="\r";break;case "t":c+="\t";break;case "u":d=a.substring(b+1,b+5);ka.test(d)||this.parseError("Illegal escape sequence: \\u"+d);c+=String.fromCharCode(parseInt(d,16));b+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+d+'"');}++b;d=a.indexOf("\\",b);c+=a.substring(b,0>d?a.length:d);b=d}return c};S.prototype.isComment=function(){if("/"===this.expression.charAt(this.pos)&&
"*"===this.expression.charAt(this.pos+1)){var a=this.pos;this.pos=this.expression.indexOf("*/",this.pos)+2;1===this.pos&&(this.pos=this.expression.length);for(var a=this.expression.substring(a,this.pos),b=a.indexOf("\n");0<=b;)this.line++,this.column=a.length-b,b=a.indexOf("\n",b+1);return!0}return!1};S.prototype.isNumber=function(){for(var a=!1,b=this.pos,c=b,d=b,e=this.column,f=e,g=!1,h=!1,k;b<this.expression.length;)if(k=this.expression.charAt(b),"0"<=k&&"9">=k||!g&&"."===k)"."===k?g=!0:h=!0,b++,
e++,a=h;else break;a&&(d=b,f=e);if("e"===k||"E"===k){b++;e++;g=!0;for(h=!1;b<this.expression.length;){k=this.expression.charAt(b);if(!g||"+"!==k&&"-"!==k)if("0"<=k&&"9">=k)h=!0,g=!1;else break;else g=!1;b++;e++}h||(b=d,e=f)}a?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(c,b))),this.pos=b,this.column=e):(this.pos=d,this.column=f);return a};S.prototype.isOperator=function(){var a=this.expression.charAt(this.pos);if("+"===a||"-"===a||"*"===a||"/"===a||"%"===a||"^"===a||
"?"===a||":"===a||"."===a)this.current=this.newToken("TOP",a);else if("\u2219"===a||"\u2022"===a)this.current=this.newToken("TOP","*");else if(">"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP",">="),this.pos++,this.column++):this.current=this.newToken("TOP",">");else if("<"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP","<="),this.pos++,this.column++):this.current=this.newToken("TOP","<");else if("|"===a)if("|"===this.expression.charAt(this.pos+
1))this.current=this.newToken("TOP","||"),this.pos++,this.column++;else return!1;else if("="===a)if("="===this.expression.charAt(this.pos+1))this.current=this.newToken("TOP","=="),this.pos++,this.column++;else return!1;else if("!"===a)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken("TOP","!="),this.pos++,this.column++):this.current=this.newToken("TOP",a);else return!1;this.pos++;this.column++;return!0};S.prototype.parseError=function(a){throw Error("parse error ["+(this.line+
1)+":"+(this.column+1)+"]: "+a);};var ga={},ha={},ja={};N.prototype.next=function(){this.current=this.nextToken;return this.nextToken=this.tokens.next()};N.prototype.tokenMatches=function(b,c){return"undefined"===typeof c?!0:Array.isArray(c)?0<=a(c,b.value):"function"===typeof c?c(b):b.value===c};N.prototype.save=function(){this.savedCurrent=this.current;this.savedNextToken=this.nextToken;this.tokens.save()};N.prototype.restore=function(){this.tokens.restore();this.current=this.savedCurrent;this.nextToken=
this.savedNextToken};N.prototype.accept=function(a,b){return this.nextToken.type===a&&this.tokenMatches(this.nextToken,b)?(this.next(),!0):!1};N.prototype.expect=function(a,b){if(!this.accept(a,b))throw Error("parse error ["+this.tokens.line+":"+this.tokens.column+"]: Expected "+(b||a));};N.prototype.parseAtom=function(a){if(this.accept("TNAME"))a.push(new b("IVAR",this.current.value));else if(this.accept("TNUMBER"))a.push(new b("INUMBER",this.current.value));else if(this.accept("TSTRING"))a.push(new b("INUMBER",
this.current.value));else if(this.accept("TPAREN","("))this.parseExpression(a),this.expect("TPAREN",")");else throw Error("unexpected "+this.nextToken);};N.prototype.parseExpression=function(a){this.parseConditionalExpression(a)};N.prototype.parseConditionalExpression=function(a){for(this.parseOrExpression(a);this.accept("TOP","?");){var c=[],d=[];this.parseConditionalExpression(c);this.expect("TOP",":");this.parseConditionalExpression(d);a.push(new b("IEXPR",c));a.push(new b("IEXPR",d));a.push(ea("?"))}};
N.prototype.parseOrExpression=function(a){for(this.parseAndExpression(a);this.accept("TOP","or");)this.parseAndExpression(a),a.push(P("or"))};N.prototype.parseAndExpression=function(a){for(this.parseComparison(a);this.accept("TOP","and");)this.parseComparison(a),a.push(P("and"))};N.prototype.parseComparison=function(a){for(this.parseAddSub(a);this.accept("TOP","== != < <= >= >".split(" "));){var b=this.current;this.parseAddSub(a);a.push(P(b.value))}};N.prototype.parseAddSub=function(a){for(this.parseTerm(a);this.accept("TOP",
["+","-","||"]);){var b=this.current;this.parseTerm(a);a.push(P(b.value))}};N.prototype.parseTerm=function(a){for(this.parseFactor(a);this.accept("TOP",["*","/","%"]);){var b=this.current;this.parseFactor(a);a.push(P(b.value))}};N.prototype.parseFactor=function(a){var b=this.tokens.unaryOps;this.save();if(this.accept("TOP",function(a){return a.value in b}))if("-"!==this.current.value&&"+"!==this.current.value&&"TPAREN"===this.nextToken.type&&"("===this.nextToken.value)this.restore(),this.parseExponential(a);
else{var c=this.current;this.parseFactor(a);a.push(Y(c.value))}else this.parseExponential(a)};N.prototype.parseExponential=function(a){for(this.parsePostfixExpression(a);this.accept("TOP","^");)this.parseFactor(a),a.push(P("^"))};N.prototype.parsePostfixExpression=function(a){for(this.parseFunctionCall(a);this.accept("TOP","!");)a.push(Y("!"))};N.prototype.parseFunctionCall=function(a){var c=this.tokens.unaryOps;if(this.accept("TOP",function(a){return a.value in c})){var d=this.current;this.parseAtom(a);
a.push(Y(d.value))}else for(this.parseMemberExpression(a);this.accept("TPAREN","(");)this.accept("TPAREN",")")?a.push(new b("IFUNCALL",0)):(d=this.parseArgumentList(a),a.push(new b("IFUNCALL",d)))};N.prototype.parseArgumentList=function(a){for(var b=0;!this.accept("TPAREN",")");)for(this.parseExpression(a),++b;this.accept("TCOMMA");)this.parseExpression(a),++b;return b};N.prototype.parseMemberExpression=function(a){for(this.parseAtom(a);this.accept("TOP",".");)this.expect("TNAME"),a.push(new b("IMEMBER",
this.current.value))};U.parse=function(a){return(new U).parse(a)};U.evaluate=function(a,b){return U.parse(a).evaluate(b)};U.prototype={parse:function(a){var b=[];a=new N(this,new S(a,this.unaryOps,this.binaryOps,this.ternaryOps,this.consts));a.parseExpression(b);a.expect("TEOF","EOF");return new e(b,this)},evaluate:function(a,b){return this.parse(a).evaluate(b)}};return{Parser:U,Expression:e}})}),Kb=function(){return R.call(this)||this};$jscomp.inherits(Kb,R);Kb.prototype._run=function(){if(!this.hasMetadata("expression"))console.warn('A filter of type ImageBlendExpressionFilter requires a blending expression.\nUse \'setMetadata("expression", "...")\' to set it.');
else if(this.hasSameNcppInput()&&this.hasSameSizeInput())if(this.getNumberOfInputs()){for(var a=this.getInputCategories(),b=this._getInput(a[0]),c=b.getDataCopy(),d=(new Ad.Parser).parse(this.getMetadata("expression")),e=0;e<c.length;e++){for(var f={},h=0;h<a.length;h++)f[a[h]]=this._getInput(a[h]).getData()[e];c[e]=d.evaluate(f)}this._addOutput(C).setData(c,b.getWidth(),b.getHeight())}else console.warn("A filter of type ImageBlendExpressionFilter requires at least one input.")};var Lb=function(){var a;
a=R.call(this)||this;a.addInputValidator(0,C);a.addInputValidator(1,C);return a};$jscomp.inherits(Lb,R);Lb.prototype._run=function(){if(!this.hasValidInput())console.warn("A filter of type MultiplyImageFilter requires 1 input of category '0' and one input of category '1'.");else if(this.hasSameNcppInput()&&this.hasSameSizeInput()){this.addTimeRecord("step1");var a=this._getInput(0),b=this._getInput(1).getData();this.addTimeRecord("step1.5");var c=a.getDataCopy();this.addTimeRecord("step2");for(var d=
0;d<c.length;d++)c[d]*=b[d];this.addTimeRecord("step3");this._addOutput(C).setData(c,a.getWidth(),a.getHeight());this.addTimeRecord("step4");this.getTime("step1","step1.5",!0);this.getTime("step1.5","step2",!0);this.getTime("step2","step3",!0);this.getTime("step3","step4",!0)}};var Mb=function(){var a;a=R.call(this)||this;a.setMetadata("threshold",128);a.setMetadata("lowValue",0);a.setMetadata("highValue",255);a.setMetadata("preserveAlpha",!0);return a};$jscomp.inherits(Mb,R);Mb.prototype._run=function(){if(this.hasValidInput()){var a=
this._getInput(0),b=a.clone(),c=a.getComponentsPerPixel(),a=this.getMetadata("threshold"),d=this.getMetadata("lowValue"),e=this.getMetadata("highValue"),f=b.getData();if(1==c||3==c||4==c){if(this.getMetadata("preserveAlpha")&&4==c)for(c=0;c<f.length;c++)3!=c%4&&(f[c]=f[c]<a?d:e);else for(c=0;c<f.length;c++)f[c]=f[c]<a?d:e;this._output[0]=b}else console.warn("The input data must have 1, 3 or 4 components per pixel.")}};var Nb=function(){var a;a=x.call(this)||this;a.addInputValidator(0,I);a.setMetadata("maxWidth",
4096);a.setMetadata("maxHeight",4096);a.setMetadata("axis","xspace");return a};$jscomp.inherits(Nb,x);Nb.prototype._run=function(){if(this.hasValidInput()){var a=this._getInput(0),b=a.getMetadata(this.getMetadata("axis"));if(b){var c=b.space_length,d=b.width,b=b.height,e=Math.floor(this.getMetadata("maxWidth")/d),f=Math.floor(this.getMetadata("maxHeight")/b),h=e*d,k=f*b,f=e*f;1==Math.ceil(c/f)&&(k=Math.ceil(c/e)*b);this.setMetadata("gridWidth",h/d);this.setMetadata("gridHeight",k/b);for(var l=0,m=
0,n=0,r=null;m<c;m++){var u=a.getSlice(this.getMetadata("axis"),m);0==m%f&&(r=new C({width:h,height:k,color:[0]}),this._output[l]=r,n=0,l++);var p=n%e,t=Math.floor(n/e);n++;for(var p=p*d,t=t*b,v=0;v<b;v++)for(var w=0;w<d;w++)r.setPixel({x:p+w,y:t+v},u.getPixel({x:w,y:v}))}}else console.warn("Sampling axis for mosaicing was not poperly set. Has to be 'xspace', 'yspace' or 'zspace'.")}};f.PixpipeObject=F;f.Filter=x;f.Image2D=C;f.Image3D=I;f.ImageToImageFilter=R;f.MniVolume=ea;f.CanvasImageWriter=Oa;
f.UrlImageReader=cb;f.FileImageReader=db;f.FileToArrayBufferReader=Ta;f.UrlToArrayBufferReader=eb;f.Minc2Decoder=y;f.NiftiDecoder=ya;f.PixpEncoder=Ua;f.PixpDecoder=fb;f.Image3DGenericDecoder=yb;f.TiffDecoder=Hb;f.ForEachPixelImageFilter=gb;f.SpectralScaleImageFilter=Ib;f.ImageBlendExpressionFilter=Kb;f.MultiplyImageFilter=Lb;f.SimpleThresholdFilter=Mb;f.Image3DToMosaicFilter=Nb;Object.defineProperty(f,"__esModule",{value:!0})});
