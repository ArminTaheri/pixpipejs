{"version":3,"file":"pixpipe.js","sources":["../src/core/PixpipeObject.js","../src/core/PipelineElement.js","../src/core/Pipeline.js","../src/core/Filter.js","../src/core/Image2D.js","../src/core/ImageToImageFilter.js","../src/core/PixelWiseImageFilter.js","../src/io/CanvasImageWriter.js","../src/io/UrlImageReader.js","../src/io/FileImageReader.js","../src/filter/ForEachPixelImageFilter.js","../src/filter/SpectralScaleImageFilter.js","../node_modules/expr-eval/dist/bundle.js","../src/filter/ImageBlendExpressionFilter.js","../src/pixpipe.js"],"sourcesContent":["/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\n\n/**\n* PixpipeObject is the base object of all. It creates a uuid and has few\n* generic attributes like type, name and description. Not all these attributes\n* always useful;\n*/\nclass PixpipeObject {\n\n  constructor(){\n    // unique identifier\n    this._uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n\n    // Metadata can be anything, a name, an ID, a description, a DOM element.\n    // everything that is not an input but rather a setting\n    this._metadata = {};\n\n    this._pipeline = null;\n\n    this._type = PixpipeObject.TYPE();\n  }\n\n\n  /**\n  * Acces it like a static attribute.\n  * Must be overloaded.\n  */\n  static TYPE(){\n    return \"GENERIC\";\n  }\n\n\n  /**\n  * Compare a give type to the type of this object.\n  * @param {String} t - a type, better to call the static method of each object, like Image.TYPE()\n  */\n  isOfType( t ){\n    return !(this._type.localeCompare(t))\n  }\n\n\n  /**\n  * Get type of object.\n  * @return {String} the type\n  */\n  getType(){\n    this._type;\n  }\n\n  /**\n  * Return a copy of the uuid\n  */\n  get uuid(){\n    return this._uuid.slice();\n  }\n\n\n  /**\n  * Set a metadata using a pair of key and value.\n  * @param {String} key - the ID of the metadata\n  * @param {Object} value - can be a string, Number or Object\n  */\n  setMetadata( key, value ){\n    if(typeof key === 'string' || key instanceof String){\n      this._metadata[ key ] = value;\n    }else{\n      console.warn(\"The given key must be a String Object.\");\n    }\n\n  }\n\n\n  /**\n  * Retrieve a metadata using a key.\n  * @param {String} key - the ID of the metadata\n  * @return {Object} the metadata object - or null if non existent\n  */\n  getMetadata( key ){\n    if( key in this._metadata){\n      return this._metadata[ key ];\n    }else{\n      console.warn(\"The metadata with key: \" + key + \" doe not exist.\");\n      return null;\n    }\n  }\n\n\n  /**\n  * Check if the metadata with the given key exists.\n  * @param {String} key - the key to look up in the metadata collection\n  * @return {Boolean} true if the metadata with the given is present, false if not.\n  */\n  hasMetadata( key ){\n    return (key in this._metadata);\n  }\n\n\n}\n\nexport { PixpipeObject }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { PixpipeObject } from './PixpipeObject.js';\n\n\nclass PipelineElement extends PixpipeObject {\n\n  constructor(){\n    super();\n\n    this._pipeline = null;\n    this._type = PipelineElement.TYPE();\n  }\n\n\n  /**\n  * Acces it like a static attribute.\n  * Must be overloaded.\n  */\n  static TYPE(){\n    return \"PIPELINE_ELEMENT\";\n  }\n\n\n  /**\n  * Associate a Pipeline instance to this image. Not supposed to be called manually\n  * because it is automatically called-back when adding a filter to a pipeline.\n  * @param {Pipeline} p - Pipeline object.\n  */\n  setPipeline( p ){\n    // only if not already set.\n    if(!this._pipeline){\n      this._pipeline = p;\n    }\n  }\n\n\n} /* ENDS class PipelineElement */\n\nexport { PipelineElement }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { PixpipeObject } from './PixpipeObject.js';\n\n/**\n* A Pipeline instance handles a cascade of filter when an input dataset is updated.\n* Using a Pipeline object is not mandatory and can be replaced by calling  `update()`.\n*/\nclass Pipeline extends PixpipeObject {\n\n  constructor(){\n    super();\n    this._type = Pipeline.TYPE();\n\n    // a list of filters\n    this._filters = [];\n\n    this._isUpdated = false;\n  }\n\n\n  /**\n  * Hardcode the datatype\n  */\n  static TYPE(){\n    return \"PIPELINE\";\n  }\n\n\n  /**\n  * Add a filter to the pipeline.\n  *\n  */\n  addFilter( f ){\n    this._filters.push( f );\n    console.log(\"Filter \" +  f.constructor.name + \" added to the pipeline.\");\n  }\n\n\n  /**\n  *\n  */\n  update(forceAll = true){\n\n    if( forceAll ){\n      this._forceUpdateAll();\n    }else{\n\n    }\n\n    this._isUpdated = true;\n  }\n\n\n  /**\n  * Run an update on every single filter\n  */\n  _forceUpdateAll(){\n    console.log(this._filters);\n    for(var f=0; f<this._filters.length; f++){\n      // if output of filter is not ready, then when have to run this filter\n      if( ! this._filters[f].hasOutputReady() ){\n        this._filters[f].update();\n        this._filters[f].setOutputAsReady();\n      }\n    }\n  }\n\n\n  /**\n  * Update only starting from the step that was modified since the last update\n  */\n  _updateSmart(){\n\n  }\n\n\n} /* END of class Pipeline */\n\nexport { Pipeline };\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { PipelineElement } from './PipelineElement.js';\n//import { Pipeline } from './Pipeline.js';\n\n\n/**\n* Filter is a base class and must be inherited to be used properly.\n* A filter takes one or more Image instances as input and returns one or more\n* instances of images as output.\n* Every filter has a addInput(), a getOutput() and a update() methods.\n* Every input and output can be arranged by category, so that internaly, a filter\n* can use and output diferent kind of data.\n*/\nclass Filter extends PipelineElement {\n\n  constructor(){\n    super();\n    this._type = Filter.TYPE();\n\n    // a bunch of event to be defined. Empty by default.\n    this._events = {};\n\n    this._inputValidator = {};\n\n    this._input = {\n      //\"0\": []\n    };\n\n    this._output = {\n      //\"0\" : []\n    };\n\n    this._isOutputReady = false;\n\n  }\n\n\n  /**\n  * Hardcode the datatype\n  */\n  static TYPE(){\n    return \"FILTER\";\n  }\n\n\n  /**\n  * Set an input, potentially associated to a category.\n  * @param {Image2D} inputObject - most likely an instance of Image2D but can also be HTML5 File or Image3D\n  * @param {Number} category - in case we want to get data from diferent categories.\n  */\n  addInput( inputObject, category=0){\n\n    // the category may not exist, we create it\n    if( !(category in this._input) ){\n      this._input[category] = null;\n    }\n\n    this._input[category] = inputObject ;\n\n    // add the pipeline object if defined\n    if( this._pipeline ){\n      inputObject.setPipeline( this._pipeline );\n    }\n\n    this._isOutputReady = false;\n  }\n\n\n  /**\n  * Return outputs from a category (default category: 0)\n  * @param {Number} category - a category of output.\n  * @return {Object} or null if no output can be returned.\n  */\n  getOutput( category=0 ){\n    if( category in this._output ){\n      return this._output[ category ];\n    }else{\n      return null;\n    }\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Internal way to setup an output for this filter. Acts like a singleton in a sens\n  * that if an output of a given category was already Initialized, it returns it.\n  * If no input was Initialized, it creates one. Then we are sure the pointer of the\n  * output remain the same and does not break the pipeline.\n  * @param {type} dataType - type of object, i.e. Image2D (this is NOT a String!)\n  * @param {Number} category - in case we want to get data from different categories.\n  * @returns {Object} of given type.\n  */\n  _addOutput( dataType, category=0 ){\n    var outputObject = null;\n\n    // the category may not exist, we create it\n    if( !(category in this._output) ){\n      var outputObject = new dataType();\n      this._output[category] = outputObject;\n\n      //console.log(this._output);\n      console.log(\"filter \" + this.constructor.name + \" creates a new output.\");\n      /*\n      if(this._pipeline){\n        outputObject.setPipeline( p );\n      }\n      */\n\n    }else{\n      // TODO: if output object exists but is not from dataType: error!\n      //outputObject = this._output[category];\n      console.warn(\"An output of category \" + category + \" was already defined.\");\n    }\n\n    //return outputObject;\n  }\n\n\n  /**\n  * [PRIVATE]\n  * should noly be used by the class that inherit Filter.\n  * @param {Number} category - in case we want to get data from different categories.\n  * @return {Object} or null if no input can be returned\n  */\n  _getInput( category=0 ){\n    if( category in this._input ){\n      return this._input[ category ];\n    }else{\n      return null;\n    }\n  }\n\n\n  /**\n  * Same as PixpipeObject.setMetadata but add the _isOutputReady to false.\n  */\n  setMetadata( key, value ){\n    super.setMetadata( key, value );\n    this._isOutputReady = false;\n  }\n\n\n\n  hasOutputReady(){\n    return this._isOutputReady;\n  }\n\n\n  setOutputAsReady(){\n    this._isOutputReady = true;\n  }\n\n  /**\n  * Validate the input data using a model defined in _inputValidator.\n  * Every class that implement Filter must implement their own _inputValidator.\n  * Not mandatory to use, still a good practice.\n  */\n  hasValidInput(){\n    var that = this;\n    var inputCategories = Object.keys( this._inputValidator );\n    var valid = true;\n\n    inputCategories.forEach( function(key){\n      valid = valid && that._getInput( key ).isOfType( that._inputValidator[ key ] )\n    });\n\n    if(!valid){\n      console.warn(\"The input is not valid.\");\n    }\n\n    return valid;\n  }\n\n\n  /**\n  * MUST be implemented by the class that inherit this.\n  * Launch the process.\n  */\n  update(){\n    console.error(\"The update() method has not been written, this filter is not valid.\");\n  }\n\n\n  /**\n  * Defines a callback. By defautl, no callback is called.\n  */\n  on(eventId, callback){\n    this._events[ eventId ] = callback;\n  }\n\n\n  /**\n  * Associate a Pipeline instance to this filter. Not supposed to be called manually\n  * because it is automatically called-back when adding a filter to a pipeline.\n  * @param {Pipeline} p - Pipeline object.\n  */\n  setPipeline( p ){\n    /*\n    // only if not already set.\n    if(!this._pipeline){\n      this._pipeline = p;\n\n      // set the pipeline to all input so that they can update the entire\n      // pipeline in case of modification\n      var inputCategories = Object.keys( this._inputValidator );\n      inputCategories.forEach( function(key){\n        widths.push( that._getInput( key ).setPipeline( p ) );\n      });\n\n    }\n    */\n    super.setPipeline( p );\n\n    var inputCategories = Object.keys( this._input );\n    inputCategories.forEach( function(key){\n      that._getInput( key ).setPipeline( p );\n    });\n\n\n    var outputCategories = Object.keys( this._output );\n    outputCategories.forEach( function(key){\n      hat.getOutput( key ).setPipeline( p );\n    });\n\n  }\n\n\n  /**\n  * Update the whole pipeline due to an update in the filter\n  * (new input, new metadata)\n  */\n  _updatePipeline(){\n    if(this._pipeline){\n      this._pipeline.update();\n    }\n  }\n\n\n  /**\n  * @param {String} uuid - uuid to look for\n  * @return {Boolean} true if this filter uses an input with such uuid\n  */\n  hasInputWithUuid( uuid ){\n    var found = false;\n\n    var inputCategories = Object.keys( this._inputValidator );\n    inputCategories.forEach( function(key){\n      found = found | that._getInput( key ).setPipeline( p ) ;\n    });\n\n    return found;\n  }\n\n\n  /**\n  * @return {Number} the number of inputs\n  */\n  getNumberOfInputs(){\n    return Object.keys( this._inputValidator ).length;\n  }\n\n} /* END class Filter */\n\nexport { Filter }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { PipelineElement } from './PipelineElement.js';\n\n/**\n* Image2D class is one of the few base element of Pixpipejs.\n* It is always considered to be 4 channels (RGBA) and stored as a Float32Array\n* typed array.\n*/\nclass Image2D extends PipelineElement{\n\n\n  /**\n  * Constructor of an Image2D instance. If no options, no array is allocated.\n  * @param {Object} options - if present, must have options.width, options.height. Also options.color = [r, g, b, a] is possible but not mandatory, this sets the default color.\n  */\n  constructor( options=null ){\n    super();\n    this._type = Image2D.TYPE();\n\n    // a rgba stored in a Float32Array (typed array)\n    this._data = null;\n    this._width = -1;\n    this._height = -1;\n    this._componentsPerPixel = 4; // RGBA, by default\n\n    // pipeline associated with this image. Not mandatory.\n    this._pipeline = null;\n\n    // allocate the array if size is specified\n    if(options && \"width\" in options && \"height\" in options){\n\n      if( options.width > 0 && options.height > 0){\n        this._width = options.width;\n        this._height = options.height;\n\n        if(\"color\" in options){\n          this._componentsPerPixel = options.color.length;\n        }\n\n        this._data = new Float32Array( this._width * this._height * this._componentsPerPixel );\n\n        // init with the given color\n        if(\"color\" in options){\n          var color = options.color;\n          for(var i=0; i<this._data.length; i++){\n            this._data[i] = color[i%this._componentsPerPixel];\n          }\n        }else{\n          this._data.fill(0);\n        }\n\n      }\n    }\n\n  }\n\n\n  /**\n  * Hardcode the datatype\n  */\n  static TYPE(){\n    return \"IMAGE2D\";\n  }\n\n\n  /**\n  * @return {Image2D} a deep copy instance of this Image2D\n  */\n  clone(){\n    var cpImg = new Image2D();\n    cpImg.setData( this._data, this._width, this._height );\n    return cpImg;\n  }\n\n\n  /**\n  *  Set the data to this Image2D.\n  * @param {Float32Array} array - 1D array of raw data stored as RGBARGBA...\n  * @param {Number} width - width of the Image2D\n  * @param {Number} height - height of the Image2D\n  * @param {Number} ncpp - number of components per pixel (default: 4)\n}\n  */\n  setData( array, width, height, ncpp=4 ){\n    /*\n    // do not allow to set a new internal array\n    if( this._data ){\n      console.warn(\"Data can be set to an Image2D object only once. Cannot init the Image2D.\");\n      return;\n    }\n    */\n\n    this._componentsPerPixel = ncpp;\n\n    if( array.length != width*height*this._componentsPerPixel){\n      console.warn(\"The array size does not match the width and height. Cannot init the Image2D.\");\n      return;\n    }\n\n    this._data = new Float32Array( array );\n    this._width = width;\n    this._height = height;\n  }\n\n\n  /**\n  * Modify the color of a given pixel.\n  * @param {Object} position - 2D position in form {x, y}\n  * @param {Array} color - color, must have the same numb of components per pix than the image\n  */\n  setPixel( position, color ){\n    if(\"x\" in position && position.x >=0 && position.x < this._width &&\n       \"y\" in position && position.y >=0 && position.y < this._height &&\n       color.length == this._componentsPerPixel)\n    {\n\n      var pos1D = this.get1dIndexFrom2dPosition( position );\n\n      for(var i=0; i<this._componentsPerPixel; i++){\n        this._data[ pos1D + i] = color[i];\n      }\n\n    }else{\n      console.error(\"x and y position have to be within the image dimensions and color size must be the same as the original image.\");\n    }\n  }\n\n\n  /**\n  * @return {Array} the color of the given pixel.\n  */\n  getPixel( position ){\n    if(\"x\" in position && position.x >=0 && position.x < this._width &&\n       \"y\" in position && position.y >=0 && position.y < this._height)\n    {\n      var pos1D = this.get1dIndexFrom2dPosition( position );\n      var color = this._data.slice(pos1D, pos1D + this._componentsPerPixel);\n      return color;\n\n    }else{\n      console.warn(\"The requested position is outside the image.\");\n      return null;\n    }\n  }\n\n\n  /**\n  * @return {Number} the width of the Image2D\n  */\n  getWidth(){\n    return this._width;\n  }\n\n\n  /**\n  * @return {Number} the height of the Image2D\n  */\n  getHeight(){\n    return this._height;\n  }\n\n\n  /**\n  * @return {Number} the number of components per pixel\n  */\n  getComponentsPerPixel(){\n    return this._componentsPerPixel;\n  }\n\n\n  /**\n  * @return {Float32Array} the original data, dont mess up with this one.\n  * in case of doubt, use  getDataCopy()\n  */\n  getData(){\n    //return this._data.slice();  // return a copy\n    return this._data;  // return the actual array, editable!\n  }\n\n\n  /**\n  * @return {Float32Array} a deep copy of the data\n  */\n  getDataCopy(){\n    return this._data.slice();\n  }\n\n\n  /**\n  * Compute the (x, y) position from a position in a 1D array.\n  * This has nothing to do with the number of components per pixel.\n  * @param {Number} i - the index of a pixel.\n  * @return {Object} coordinate as {x, y}\n  */\n  get2dPositionFrom1dIndex( i ){\n    return {\n      x: i % this._width,\n      y: Math.floor(i / this._width)\n    }\n  }\n\n\n  /**\n  * Compute the 1D index within the data buffer from a 2D position {x, y}.\n  * This has nothing to do with the number of components per pixel.\n  * @param {Object} position - 2D coord like {x, y}\n  * @return {Number} the 1D position within the buffer\n  */\n  get1dIndexFrom2dPosition( position ){\n    return (position.x + position.y*this._width);\n  }\n\n\n\n\n  // TODO: warn the pipeline if metadata changed or pixel value changed\n  // --> do NOT update the pipeline at every modif because if we change a lot\n  //     of pixel values... (wait to call update() on the pipeline.)\n\n\n} /* END of class Image2D */\n\nexport { Image2D }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { Filter } from './Filter.js';\nimport { Image2D } from './Image2D.js';\n\n/**\n* ImageToImageFilter is not to be used as-is but rather as a base class for any\n* filter that input a single Image2D and output a single Image2D.\n* This class does not overload the update() method.\n*/\nclass ImageToImageFilter extends Filter {\n\n  constructor(){\n    super();\n    this._inputValidator[ 0 ] = Image2D.TYPE();\n\n    // will be a copy of the input Image2D buffer\n    this._inputBuffer = null;\n  }\n\n\n  /**\n  * Check if all input image have the same size.\n  * @return {Boolean} true is same size, false if not.\n  */\n  hasSameSizeInput(){\n    var that = this;\n    var inputCategories = Object.keys( this._input );\n    var sameSize = true;\n\n    var widths = [];\n    var heights = [];\n\n    inputCategories.forEach( function(key){\n      widths.push( that._getInput( key ).getWidth() );\n      heights.push( that._getInput( key ).getHeight() );\n    });\n\n    // if all input have the same size\n    if(widths.length){\n      widths.sort();\n      heights.sort();\n      sameSize = (widths[ 0 ] == widths[ widths.length -1 ] ) &&\n                 (heights[ 0 ] == heights[ heights.length -1 ] );\n\n      if( !sameSize ){\n        console.warn(\"Input image do not all have the same size. Filter not valid\");\n      }\n    }\n\n    return sameSize;\n  }\n\n\n  /**\n  * Check if all the inputs have the same number of component per pixel.\n  * @return {Boolean} true if the ncpp are the same for all input image\n  */\n  hasSameNcppInput(){\n    var inputCategories = Object.keys( this._input );\n\n    // if no input, return false\n    if(!inputCategories.length)\n      return false;\n\n    var ncpp = this._getInput( inputCategories[0] ).getComponentsPerPixel();\n\n    for(var i=0; i<inputCategories.length; i++){\n      if( ncpp != this._getInput( inputCategories[i] ).getComponentsPerPixel()){\n        console.warn(\"Input image do not all have the same number of components per pixel. Filter not valid\");\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n\n\n} /* END class ImageToImageFilter */\n\nexport { ImageToImageFilter }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { ImageToImageFilter } from './ImageToImageFilter.js';\n\n/**\n* PixelWiseImageFilter is not supposed to be use as is and is just to\n* be inherited by other filters.\n* This class does not overload the update() method.\n*/\nclass PixelWiseImageFilter extends ImageToImageFilter{\n\n  constructor(){\n    super();\n  }\n\n\n  /**\n  * [PRIVATE]\n  * generic function for painting row, colum or whole\n  * @param {Number} firstPixel - Index of the first pixel in 1D array\n  * @param {Number} lastPixel - Index of the last pixel in 1D array\n  * @param {Number} increment - jump gap from a pixel to another (in a 1D style)\n  */\n  _forEachPixelOfSuch(firstPixel, lastPixel, increment ){\n    // abort if no callback per pixel\n    if( ! \"pixel\" in this._events){\n      console.warn(\"No function to apply per pixel was specified.\");\n      return;\n    }\n\n    var inputImage2D = this._getInput();\n    var inputBuffer = this._inputBuffer;\n    var componentPerPixel = inputImage2D.getComponentsPerPixel();\n\n    var currentColor = null;\n\n    for(var p=firstPixel; p<lastPixel; p+=increment ){\n      var firstCompoPos1D = p * componentPerPixel;\n      var position2D = inputImage2D.get2dPositionFrom1dIndex(p);\n      currentColor = inputBuffer.slice(firstCompoPos1D, firstCompoPos1D + componentPerPixel)\n\n      var newColor = this._events.pixel( position2D, currentColor);\n\n      if(newColor && newColor.length == componentPerPixel){\n        for(var i=0; i<componentPerPixel; i++){\n          inputBuffer[firstCompoPos1D + i] = newColor[i];\n        }\n      }\n\n    }\n  }\n\n\n} /* END of class PixelWiseImageFilter */\n\nexport { PixelWiseImageFilter }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { Image2D } from '../core/Image2D.js';\nimport { Filter } from '../core/Filter.js';\n\n/**\n* CanvasImageWriter is a filter to output an instance of Image into a\n* HTML5 canvas element.\n* The metadata \"parentDivID\" has to be set using `setMetadata(\"parentDivID\", \"whatever\")`\n* The metadata \"alpha\", if true, enable transparency. Default: false.\n* usage: examples/imageToCanvasFilter.html\n*\n* @example\n// create an image\n* var myImage = new pixpipe.Image2D({width: 100, height: 250, color: [255, 128, 64, 255]})\n*\n* // create a filter to write the image into a canvas\n* var imageToCanvasFilter = new pixpipe.CanvasImageWriter( \"myDiv\" );\n* imageToCanvasFilter.addInput( myImage );\n* imageToCanvasFilter.update();\n*/\nclass CanvasImageWriter extends Filter{\n\n  /**\n  * @param {String} parentDivID - dom id of the future canvas' parent.\n  * (most likely the ID of a div)\n  */\n  constructor(){\n    // call Filter constructor\n    super();\n\n    this._inputValidator[ 0 ] = Image2D.TYPE();\n    this.setMetadata(\"alpha\", false);\n\n    // so that we can flush the content\n    this._canvas = null;\n    this._ctx = null;\n  }\n\n\n  /**\n  * [PRIVATE]\n  * Initialize a new canvas object\n  */\n  _init(){\n\n    var parentElem = document.getElementById( this.getMetadata(\"parentDivID\") );\n    while (parentElem.firstChild) {\n        parentElem.removeChild(parentElem.firstChild);\n    }\n\n    // creating a canvas element\n    this._canvas = document.createElement(\"canvas\");\n    this._canvas.style = \"image-rendering: pixelated;\";\n    this._ctx = this._canvas.getContext('2d');\n\n    // not sure this is useful since the style is \"pixelated\"\n    // (does not seem to well super well with Firefox)\n    this._ctx.imageSmoothingEnabled = true;\n    this._ctx.mozImageSmoothingEnabled = false;\n    this._ctx.webkitImageSmoothingEnabled = false;\n    this._ctx.ctxmsImageSmoothingEnabled = false;\n\n    document.getElementById(this.getMetadata(\"parentDivID\")).appendChild(this._canvas);\n  }\n\n\n  /**\n  * Overwrite the generic (empty) method.\n  */\n  update(){\n\n    // abort if invalid input\n    if(!this.hasValidInput() )\n      return;\n\n    var image = this._input[0];\n    console.log(image);\n    var ncppSrc = image.getComponentsPerPixel();\n\n    // only Image2d with 1 or 4 bands can be displayed\n    if( ncppSrc != 1 && ncppSrc != 4){\n      console.warn(\"Cannot write Image in canvas if contains other than 1 or 4 bands.\");\n      return;\n    }\n\n    if(!this.getMetadata(\"parentDivID\")){\n      console.error(\"The parent DIV ID to place the canvas element was not specified. Unable to display anything.\");\n      return;\n    }\n\n    // build a new canvas\n    this._init();\n    var useAlphaBand = this.getMetadata(\"alpha\");\n\n    // resizing the canvas\n    this._canvas.width = image.getWidth();\n    this._canvas.height = image.getHeight();\n\n    var canvasImageData = this._ctx.getImageData(0, 0, this._canvas.width, this._canvas.height);\n    var canvasImageDataArray = canvasImageData.data;\n\n    // getting Image object data\n    var originalImageDataArray = image.getData();\n\n    if(ncppSrc == 4){\n      // copying the data into the canvas array (clamped uint8)\n      originalImageDataArray.forEach( function(value, index){\n        if(!useAlphaBand && index%4 == 3){\n          canvasImageDataArray[index] = 255;\n        }else{\n          canvasImageDataArray[index] = value;\n        }\n      });\n\n    }else if(ncppSrc == 1){\n      originalImageDataArray.forEach( function(value, index){\n        canvasImageDataArray[index*4] = value;\n        canvasImageDataArray[index*4 + 1] = value;\n        canvasImageDataArray[index*4 + 2] = value;\n        canvasImageDataArray[index*4 + 3] = 255;\n      });\n\n    }\n\n\n\n\n\n    this._ctx.putImageData(canvasImageData, 0, 0);\n\n\n\n  }\n\n}\n\nexport { CanvasImageWriter }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { Image2D } from '../core/Image2D.js';\nimport { Filter } from '../core/Filter.js';\n\n\n/**\n* An instance of UrlImageReader takes an image URL as input and\n* returns an Image2D as output. Use the regular `addInput()` and `getOuput()`\n* with no argument for that.\n* Reading a file from URL takes an AJAX request, which is asynchronous. For this\n* reason, what happens next, once the Image2D is created must take place in the\n* callback defined by the event .on(\"imageLoaded\", function(){ ... }).\n*\n* Usage: examples/urlToImage2D.html\n*\n* @example\n* var url2ImgFilter = new pixpipe.UrlImageReader( ... );\n* url2ImgFilter.addInput( \"images/sd.jpg\" );\n* url2ImgFilter.update();\n*/\nclass UrlImageReader extends Filter {\n\n  /**\n  * @param {function} callback - function to call when the image is loaded.\n  * The _this_ object will be in argument of this callback.\n  */\n  constructor( callback ){\n    super();\n\n    this._addOutput( Image2D );\n  }\n\n\n  /**\n  * Run the reading\n  */\n  update(){\n    var that = this;\n\n    var img = new Image();\n    img.src = this._getInput();\n\n    img.onload = function() {\n      var tmpCanvas = document.createElement(\"canvas\");\n      tmpCanvas.width = img.width;\n      tmpCanvas.height = img.height;\n      var canvasContext = tmpCanvas.getContext('2d');\n      canvasContext.drawImage(img, 0, 0);\n\n      try{\n        var imageData = canvasContext.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height);\n        var dataArray = imageData.data;\n\n        var img2D = that.getOutput();\n        img2D.setData( dataArray, img.width, img.height);\n\n        if(\"imageLoaded\" in that._events){\n          that._events.imageLoaded( that )\n        }\n      }catch(e){\n        console.error(e);\n      }\n\n    };\n\n\n  }\n\n\n} /* END of class UrlImageReader */\n\nexport { UrlImageReader }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { Image2D } from '../core/Image2D.js';\nimport { Filter } from '../core/Filter.js';\n\n/**\n* An instance of FileImageReader takes a HTML5 File object as input and\n* returns an Image2D as output. The point is mainly to use it with a file dialog.\n* Use the regular `addInput()` and `getOuput()` with no argument for that.\n* Reading a local file is an asynchronous process. For this\n* reason, what happens next, once the Image2D is created must take place in the\n* callback defined by the event .on(\"imageLoaded\", function(){ ... }).\n*\n*\n*\n* Usage: examples/fileToImage2D.html\n*\n* @example\n* var file2ImgFilter = new pixpipe.file2ImgFilter( ... );\n* file2ImgFilter.addInput( fileInput.files[0] );\n* file2ImgFilter.update();\n*/\nclass FileImageReader extends Filter {\n\n  /**\n  * @param {function} callback - function to call when the image is loaded.\n  * The _this_ object will be in argument of this callback.\n  */\n  constructor( callback){\n    super();\n\n    this._allowedTypes = /image.*/;\n    this._onReadCallback = callback;\n  }\n\n\n  /**\n  * Overload the default method because HTML5 File is not a Pixpipe type\n  */\n  hasValidInput(){\n    var valid = false;\n    var file = this._getInput();\n\n    if (file && file.type.match( this._allowedTypes )) {\n      this._isInputValid = true;\n    }else{\n      console.error(\"The file must be an image (jpg/png). The type \" + file.type + \" is not compatible with FileImageReader.\");\n    }\n\n    return valid;\n  }\n\n\n  /**\n  * Run the reading\n  */\n  update(){\n\n    if(! this.hasValidInput)\n      return\n\n    var that = this;\n    var file = this._getInput();\n\t\tvar reader = new FileReader();\n\n\t\treader.onload = function(e) {\n\n\t\t\tvar img = new Image();\n\t\t\timg.src = reader.result;\n      var tmpCanvas = document.createElement(\"canvas\");\n      tmpCanvas.width = img.width;\n      tmpCanvas.height = img.height;\n      var canvasContext = tmpCanvas.getContext('2d');\n      canvasContext.drawImage(img, 0, 0);\n      var imageData = canvasContext.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height);\n      var dataArray = imageData.data;\n\n      var img2D = new Image2D();\n      img2D.setData( dataArray, img.width, img.height);\n      console.log(img2D);\n      that._setOutput( img2D );\n\n      if(\"imageLoaded\" in that._events){\n        that._events.imageLoaded( that )\n      }\n\t\t}\n\n\t\treader.readAsDataURL( file );\n  }\n\n\n\n} /* END of class UrlImageReader */\n\nexport { FileImageReader }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { Image2D } from '../core/Image2D.js';\nimport { PixelWiseImageFilter } from '../core/PixelWiseImageFilter.js';\n\n/**\n* A filter of type ForEachPixelImageFilter can perform a operation on evey pixel\n* of an Image2D with a simple interface. For this purpose, a per-pixel-callback\n* must be specified using method\n* .on( \"pixel\" , function( coord, color ){ ... })\n* where coord is of form {x, y} and color is of form [r, g, b, a] (with possibly)\n* a different number of components per pixel.\n* This callback must return, or null (original color not modified),\n* or a array of color (same dimension as the one in arguments).\n*\n* Usage: examples/forEachPixel.html\n*\n* @example\n* var forEachPixelFilter = new pixpipe.ForEachPixelImageFilter();\n* forEachPixelFilter.on( \"pixel\", function(position, color){\n*\n*     return [\n*       color[1], // red (takes the values from green)\n*       color[0], // green (takes the values from red)\n*       color[2] * 0.5, // blue get 50% darker\n*       255 // alpha, at max\n*     ]\n*\n*   }\n* );\n*\n*/\nclass ForEachPixelImageFilter extends PixelWiseImageFilter {\n\n  constructor(){\n    super();\n    this._addOutput( Image2D );\n  }\n\n\n  /**\n  * Run the filter\n  */\n  update(){\n    if( ! this.hasValidInput())\n      return;\n\n    var inputImage2D = this._getInput();\n    var firstPixel = 0;\n    var lastPixel = inputImage2D.getWidth() * inputImage2D.getHeight();\n    var increment = 1;\n\n    this._inputBuffer = inputImage2D.getDataCopy();\n\n    this._forEachPixelOfSuch(firstPixel, lastPixel, increment );\n\n    // 1 - init the output\n    var outputImg = this.getOutput();\n    console.log(outputImg.uuid);\n\n    // 2 - tune the output\n    outputImg.setData(\n      this._inputBuffer,\n      inputImage2D.getWidth(),\n      inputImage2D.getHeight(),\n      inputImage2D.getComponentsPerPixel()\n    );\n\n  }\n\n} /* END class ForEachPixelImageFilter */\n\nexport { ForEachPixelImageFilter }\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\nimport { Image2D } from '../core/Image2D.js';\nimport { ImageToImageFilter } from '../core/ImageToImageFilter.js';\n\n/**\n* Multiply an image by the other, like a scaling function.\n* The image requires two inputs named \"0\" and \"1\".\n* Simply use `addInput( myImg1, \"0\" )`\n* and `addInput( myImg2, \"1\" )`. The input \"0\" can have 1 or more bands while\n* the input \"1\" can have only one band since the same scale is apply to each band.\n*\n* usage: examples/forEachPixelGadient.html\n*/\nclass SpectralScaleImageFilter extends ImageToImageFilter {\n\n  constructor(){\n    super();\n\n    // both input are images.\n    this._inputValidator[ 0 ] = Image2D.TYPE();\n    this._inputValidator[ 1 ] = Image2D.TYPE();\n\n    this._addOutput( Image2D );\n  }\n\n\n  /**\n  * Run the filter\n  */\n  update(){\n    // filter must have valid input of the same size\n    if( !this.hasSameSizeInput() || !this.hasValidInput()){\n      return;\n    }\n\n    var dataImg0 = this._getInput(0);\n    var dataImg1 = this._getInput(1);\n\n    // the input \"1\" (aka. the scaling data) must be single band\n    if( dataImg1.getComponentsPerPixel() != 1 ){\n      console.warn(\"The scaling image must have one single band.\");\n      return;\n    }\n\n    var nbOfPixels = dataImg0.getWidth() * dataImg0.getHeight();\n    var ncpp = dataImg0.getComponentsPerPixel();\n\n    var data0 = dataImg0.getDataCopy();\n    var data1 = dataImg1.getData();\n\n    // scale the spectral info\n    for(var p=0; p<nbOfPixels; p++){\n      for(var b=0; b<ncpp; b++){\n        data0[ p*ncpp + b ] *=  data1[p];\n      }\n    }\n\n    // building the output\n    var img2D = this.getOutput();\n    img2D.setData(\n      data0,\n      dataImg0.getWidth(),\n      dataImg0.getHeight()\n    );\n\n  }\n\n\n} /* END class SpectralScaleImageFilter */\n\nexport { SpectralScaleImageFilter }\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.exprEval = factory());\n}(this, (function () { 'use strict';\n\n/*!\n Based on ndef.parser, by Raphael Graf(r@undefined.ch)\n http://www.undefined.ch/mparser/index.html\n\n Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)\n\n You are free to use and modify this code in anyway you find useful. Please leave this comment in the code\n to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,\n but don't feel like you have to let me know or ask permission.\n*/\n\nfunction indexOf(array, obj) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nvar INUMBER = 'INUMBER';\nvar IOP1 = 'IOP1';\nvar IOP2 = 'IOP2';\nvar IOP3 = 'IOP3';\nvar IVAR = 'IVAR';\nvar IFUNCALL = 'IFUNCALL';\nvar IEXPR = 'IEXPR';\nvar IMEMBER = 'IMEMBER';\n\nfunction Instruction(type, value) {\n  this.type = type;\n  this.value = (value !== undefined && value !== null) ? value : 0;\n}\n\nInstruction.prototype.toString = function () {\n  switch (this.type) {\n    case INUMBER:\n    case IOP1:\n    case IOP2:\n    case IOP3:\n    case IVAR:\n      return this.value;\n    case IFUNCALL:\n      return 'CALL ' + this.value;\n    case IMEMBER:\n      return '.' + this.value;\n    default:\n      return 'Invalid Instruction';\n  }\n};\n\nfunction Expression(tokens, parser) {\n  this.tokens = tokens;\n  this.parser = parser;\n  this.unaryOps = parser.unaryOps;\n  this.binaryOps = parser.binaryOps;\n  this.ternaryOps = parser.ternaryOps;\n  this.functions = parser.functions;\n}\n\nfunction escapeValue(v) {\n  if (typeof v === 'string') {\n    return JSON.stringify(v).replace(/\\u2028/g, '\\\\u2028').replace(/\\u2029/g, '\\\\u2029');\n  }\n  return v;\n}\n\nfunction simplify(tokens, unaryOps, binaryOps, ternaryOps, values) {\n  var nstack = [];\n  var newexpression = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0, L = tokens.length; i < L; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      nstack.push(item);\n    } else if (type === IVAR && values.hasOwnProperty(item.value)) {\n      item = new Instruction(INUMBER, values[item.value]);\n      nstack.push(item);\n    } else if (type === IOP2 && nstack.length > 1) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = binaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value, n2.value));\n      nstack.push(item);\n    } else if (type === IOP3 && nstack.length > 2) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(n1.value ? n2.value : n3.value);\n      } else {\n        f = ternaryOps[item.value];\n        item = new Instruction(INUMBER, f(n1.value, n2.value, n3.value));\n        nstack.push(item);\n      }\n    } else if (type === IOP1 && nstack.length > 0) {\n      n1 = nstack.pop();\n      f = unaryOps[item.value];\n      item = new Instruction(INUMBER, f(n1.value));\n      nstack.push(item);\n    } else if (type === IEXPR) {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(new Instruction(IEXPR, simplify(item.value, unaryOps, binaryOps, ternaryOps, values)));\n    } else if (type === IMEMBER && nstack.length > 0) {\n      n1 = nstack.pop();\n      nstack.push(new Instruction(INUMBER, n1.value[item.value]));\n    } else {\n      while (nstack.length > 0) {\n        newexpression.push(nstack.shift());\n      }\n      newexpression.push(item);\n    }\n  }\n  while (nstack.length > 0) {\n    newexpression.push(nstack.shift());\n  }\n  return newexpression;\n}\n\nExpression.prototype.simplify = function (values) {\n  values = values || {};\n  return new Expression(simplify(this.tokens, this.unaryOps, this.binaryOps, this.ternaryOps, values), this.parser);\n};\n\nfunction substitute(tokens, variable, expr) {\n  var newexpression = [];\n  for (var i = 0, L = tokens.length; i < L; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === IVAR && item.value === variable) {\n      for (var j = 0; j < expr.tokens.length; j++) {\n        var expritem = expr.tokens[j];\n        var replitem;\n        if (expritem.type === IOP1) {\n          replitem = unaryInstruction(expritem.value);\n        } else if (expritem.type === IOP2) {\n          replitem = binaryInstruction(expritem.value);\n        } else if (expritem.type === IOP3) {\n          replitem = ternaryInstruction(expritem.value);\n        } else {\n          replitem = new Instruction(expritem.type, expritem.value);\n        }\n        newexpression.push(replitem);\n      }\n    } else if (type === IEXPR) {\n      newexpression.push(new Instruction(IEXPR, substitute(item.value, variable, expr)));\n    } else {\n      newexpression.push(item);\n    }\n  }\n  return newexpression;\n}\n\nExpression.prototype.substitute = function (variable, expr) {\n  if (!(expr instanceof Expression)) {\n    expr = this.parser.parse(String(expr));\n  }\n\n  return new Expression(substitute(this.tokens, variable, expr), this.parser);\n};\n\nfunction evaluate(tokens, expr, values) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0, L = tokens.length; i < L; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      nstack.push(item.value);\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = expr.binaryOps[item.value];\n      nstack.push(f(n1, n2));\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      if (item.value === '?') {\n        nstack.push(evaluate(n1 ? n2 : n3, expr, values));\n      } else {\n        f = expr.ternaryOps[item.value];\n        nstack.push(f(n1, n2, n3));\n      }\n    } else if (type === IVAR) {\n      if (item.value in expr.functions) {\n        nstack.push(expr.functions[item.value]);\n      } else {\n        var v = values[item.value];\n        if (v !== undefined) {\n          nstack.push(v);\n        } else {\n          throw new Error('undefined variable: ' + item.value);\n        }\n      }\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = expr.unaryOps[item.value];\n      nstack.push(f(n1));\n    } else if (type === IFUNCALL) {\n      var argCount = item.value;\n      var args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      if (f.apply && f.call) {\n        nstack.push(f.apply(undefined, args));\n      } else {\n        throw new Error(f + ' is not a function');\n      }\n    } else if (type === IEXPR) {\n      nstack.push(item.value);\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1[item.value]);\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  return nstack[0];\n}\n\nExpression.prototype.evaluate = function (values) {\n  values = values || {};\n  return evaluate(this.tokens, this, values);\n};\n\nfunction expressionToString(tokens, toJS) {\n  var nstack = [];\n  var n1, n2, n3;\n  var f;\n  for (var i = 0, L = tokens.length; i < L; i++) {\n    var item = tokens[i];\n    var type = item.type;\n    if (type === INUMBER) {\n      if (typeof item.value === 'number' && item.value < 0) {\n        nstack.push('(' + item.value + ')');\n      } else {\n        nstack.push(escapeValue(item.value));\n      }\n    } else if (type === IOP2) {\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (toJS) {\n        if (f === '^') {\n          nstack.push('Math.pow(' + n1 + ', ' + n2 + ')');\n        } else if (f === 'and') {\n          nstack.push('(!!' + n1 + ' && !!' + n2 + ')');\n        } else if (f === 'or') {\n          nstack.push('(!!' + n1 + ' || !!' + n2 + ')');\n        } else if (f === '||') {\n          nstack.push('(String(' + n1 + ') + String(' + n2 + '))');\n        } else if (f === '==') {\n          nstack.push('(' + n1 + ' === ' + n2 + ')');\n        } else if (f === '!=') {\n          nstack.push('(' + n1 + ' !== ' + n2 + ')');\n        } else {\n          nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n        }\n      } else {\n        nstack.push('(' + n1 + ' ' + f + ' ' + n2 + ')');\n      }\n    } else if (type === IOP3) {\n      n3 = nstack.pop();\n      n2 = nstack.pop();\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '?') {\n        nstack.push('(' + n1 + ' ? ' + n2 + ' : ' + n3 + ')');\n      } else {\n        throw new Error('invalid Expression');\n      }\n    } else if (type === IVAR) {\n      nstack.push(item.value);\n    } else if (type === IOP1) {\n      n1 = nstack.pop();\n      f = item.value;\n      if (f === '-' || f === '+') {\n        nstack.push('(' + f + n1 + ')');\n      } else if (toJS) {\n        if (f === 'not') {\n          nstack.push('(' + '!' + n1 + ')');\n        } else if (f === '!') {\n          nstack.push('fac(' + n1 + ')');\n        } else {\n          nstack.push(f + '(' + n1 + ')');\n        }\n      } else if (f === '!') {\n        nstack.push('(' + n1 + '!)');\n      } else {\n        nstack.push('(' + f + ' ' + n1 + ')');\n      }\n    } else if (type === IFUNCALL) {\n      var argCount = item.value;\n      var args = [];\n      while (argCount-- > 0) {\n        args.unshift(nstack.pop());\n      }\n      f = nstack.pop();\n      nstack.push(f + '(' + args.join(', ') + ')');\n    } else if (type === IMEMBER) {\n      n1 = nstack.pop();\n      nstack.push(n1 + '.' + item.value);\n    } else if (type === IEXPR) {\n      nstack.push('(' + expressionToString(item.value, toJS) + ')');\n    } else {\n      throw new Error('invalid Expression');\n    }\n  }\n  if (nstack.length > 1) {\n    throw new Error('invalid Expression (parity)');\n  }\n  return nstack[0];\n}\n\nExpression.prototype.toString = function () {\n  return expressionToString(this.tokens, false);\n};\n\nfunction getSymbols(tokens, symbols) {\n  for (var i = 0, L = tokens.length; i < L; i++) {\n    var item = tokens[i];\n    if (item.type === IVAR && (indexOf(symbols, item.value) === -1)) {\n      symbols.push(item.value);\n    } else if (item.type === IEXPR) {\n      getSymbols(item.value, symbols);\n    }\n  }\n}\n\nExpression.prototype.symbols = function () {\n  var vars = [];\n  getSymbols(this.tokens, vars);\n  return vars;\n};\n\nExpression.prototype.variables = function () {\n  var vars = [];\n  getSymbols(this.tokens, vars);\n  var functions = this.functions;\n  return vars.filter(function (name) {\n    return !(name in functions);\n  });\n};\n\nExpression.prototype.toJSFunction = function (param, variables) {\n  var expr = this;\n  var f = new Function(param, 'with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return ' + expressionToString(this.simplify(variables).tokens, true) + '; }'); // eslint-disable-line no-new-func\n  return function () {\n    return f.apply(expr, arguments);\n  };\n};\n\nfunction add(a, b) {\n  return Number(a) + Number(b);\n}\nfunction sub(a, b) {\n  return a - b;\n}\nfunction mul(a, b) {\n  return a * b;\n}\nfunction div(a, b) {\n  return a / b;\n}\nfunction mod(a, b) {\n  return a % b;\n}\nfunction concat(a, b) {\n  return '' + a + b;\n}\nfunction equal(a, b) {\n  return a === b;\n}\nfunction notEqual(a, b) {\n  return a !== b;\n}\nfunction greaterThan(a, b) {\n  return a > b;\n}\nfunction lessThan(a, b) {\n  return a < b;\n}\nfunction greaterThanEqual(a, b) {\n  return a >= b;\n}\nfunction lessThanEqual(a, b) {\n  return a <= b;\n}\nfunction andOperator(a, b) {\n  return Boolean(a && b);\n}\nfunction orOperator(a, b) {\n  return Boolean(a || b);\n}\nfunction sinh(a) {\n  return ((Math.exp(a) - Math.exp(-a)) / 2);\n}\nfunction cosh(a) {\n  return ((Math.exp(a) + Math.exp(-a)) / 2);\n}\nfunction tanh(a) {\n  if (a === Infinity) return 1;\n  if (a === -Infinity) return -1;\n  return (Math.exp(a) - Math.exp(-a)) / (Math.exp(a) + Math.exp(-a));\n}\nfunction asinh(a) {\n  if (a === -Infinity) return a;\n  return Math.log(a + Math.sqrt(a * a + 1));\n}\nfunction acosh(a) {\n  return Math.log(a + Math.sqrt(a * a - 1));\n}\nfunction atanh(a) {\n  return (Math.log((1 + a) / (1 - a)) / 2);\n}\nfunction log10(a) {\n  return Math.log(a) * Math.LOG10E;\n}\nfunction neg(a) {\n  return -a;\n}\nfunction not(a) {\n  return !a;\n}\nfunction trunc(a) {\n  return a < 0 ? Math.ceil(a) : Math.floor(a);\n}\nfunction random(a) {\n  return Math.random() * (a || 1);\n}\nfunction factorial(a) { // a!\n  return gamma(a + 1);\n}\nfunction stringLength(s) {\n  return String(s).length;\n}\n\nfunction hypot() {\n  var sum = 0;\n  var larg = 0;\n  for (var i = 0, L = arguments.length; i < L; i++) {\n    var arg = Math.abs(arguments[i]);\n    var div;\n    if (larg < arg) {\n      div = larg / arg;\n      sum = sum * div * div + 1;\n      larg = arg;\n    } else if (arg > 0) {\n      div = arg / larg;\n      sum += div * div;\n    } else {\n      sum += arg;\n    }\n  }\n  return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n}\n\nfunction condition(cond, yep, nope) {\n  return cond ? yep : nope;\n}\n\nfunction isInteger(value) {\n  return isFinite(value) && (value === Math.round(value));\n}\n\nvar GAMMA_G = 4.7421875;\nvar GAMMA_P = [\n  0.99999999999999709182,\n  57.156235665862923517, -59.597960355475491248,\n  14.136097974741747174, -0.49191381609762019978,\n  0.33994649984811888699e-4,\n  0.46523628927048575665e-4, -0.98374475304879564677e-4,\n  0.15808870322491248884e-3, -0.21026444172410488319e-3,\n  0.21743961811521264320e-3, -0.16431810653676389022e-3,\n  0.84418223983852743293e-4, -0.26190838401581408670e-4,\n  0.36899182659531622704e-5\n];\n\n// Gamma function from math.js\nfunction gamma(n) {\n  var t, x;\n\n  if (isInteger(n)) {\n    if (n <= 0) {\n      return isFinite(n) ? Infinity : NaN;\n    }\n\n    if (n > 171) {\n      return Infinity; // Will overflow\n    }\n\n    var value = n - 2;\n    var res = n - 1;\n    while (value > 1) {\n      res *= value;\n      value--;\n    }\n\n    if (res === 0) {\n      res = 1; // 0! is per definition 1\n    }\n\n    return res;\n  }\n\n  if (n < 0.5) {\n    return Math.PI / (Math.sin(Math.PI * n) * gamma(1 - n));\n  }\n\n  if (n >= 171.35) {\n    return Infinity; // will overflow\n  }\n\n  if (n > 85.0) { // Extended Stirling Approx\n    var twoN = n * n;\n    var threeN = twoN * n;\n    var fourN = threeN * n;\n    var fiveN = fourN * n;\n    return Math.sqrt(2 * Math.PI / n) * Math.pow((n / Math.E), n) *\n      (1 + 1 / (12 * n) + 1 / (288 * twoN) - 139 / (51840 * threeN) -\n      571 / (2488320 * fourN) + 163879 / (209018880 * fiveN) +\n      5246819 / (75246796800 * fiveN * n));\n  }\n\n  --n;\n  x = GAMMA_P[0];\n  for (var i = 1; i < GAMMA_P.length; ++i) {\n    x += GAMMA_P[i] / (n + i);\n  }\n\n  t = n + GAMMA_G + 0.5;\n  return Math.sqrt(2 * Math.PI) * Math.pow(t, n + 0.5) * Math.exp(-t) * x;\n}\n\nvar TEOF = 'TEOF';\nvar TOP = 'TOP';\nvar TNUMBER = 'TNUMBER';\nvar TSTRING = 'TSTRING';\nvar TPAREN = 'TPAREN';\nvar TCOMMA = 'TCOMMA';\nvar TNAME = 'TNAME';\n\nfunction Token(type, value, line, column) {\n  this.type = type;\n  this.value = value;\n  this.line = line;\n  this.column = column;\n}\n\nToken.prototype.toString = function () {\n  return this.type + ': ' + this.value;\n};\n\nfunction TokenStream(expression, unaryOps, binaryOps, ternaryOps, consts) {\n  this.pos = 0;\n  this.line = 0;\n  this.column = 0;\n  this.current = null;\n  this.unaryOps = unaryOps;\n  this.binaryOps = binaryOps;\n  this.ternaryOps = ternaryOps;\n  this.consts = consts;\n  this.expression = expression;\n  this.savedPosition = 0;\n  this.savedCurrent = null;\n  this.savedLine = 0;\n  this.savedColumn = 0;\n}\n\nTokenStream.prototype.newToken = function (type, value, line, column) {\n  return new Token(type, value, line != null ? line : this.line, column != null ? column : this.column);\n};\n\nTokenStream.prototype.save = function () {\n  this.savedPosition = this.pos;\n  this.savedCurrent = this.current;\n  this.savedLine = this.line;\n  this.savedColumn = this.column;\n};\n\nTokenStream.prototype.restore = function () {\n  this.pos = this.savedPosition;\n  this.current = this.savedCurrent;\n  this.line = this.savedLine;\n  this.column = this.savedColumn;\n};\n\nTokenStream.prototype.next = function () {\n  if (this.pos >= this.expression.length) {\n    return this.newToken(TEOF, 'EOF');\n  }\n\n  if (this.isWhitespace() || this.isComment()) {\n    return this.next();\n  } else if (this.isNumber() ||\n      this.isOperator() ||\n      this.isString() ||\n      this.isParen() ||\n      this.isComma() ||\n      this.isNamedOp() ||\n      this.isConst() ||\n      this.isName()) {\n    return this.current;\n  } else {\n    this.parseError('Unknown character \"' + this.expression.charAt(this.pos) + '\"');\n  }\n};\n\nTokenStream.prototype.isString = function () {\n  var r = false;\n  var startLine = this.line;\n  var startColumn = this.column;\n  var startPos = this.pos;\n  var quote = this.expression.charAt(startPos);\n\n  if (quote === '\\'' || quote === '\"') {\n    this.pos++;\n    this.column++;\n    var index = this.expression.indexOf(quote, startPos + 1);\n    while (index >= 0 && this.pos < this.expression.length) {\n      this.pos = index + 1;\n      if (this.expression.charAt(index - 1) !== '\\\\') {\n        var rawString = this.expression.substring(startPos + 1, index);\n        this.current = this.newToken(TSTRING, this.unescape(rawString), startLine, startColumn);\n        var newLine = rawString.indexOf('\\n');\n        var lastNewline = -1;\n        while (newLine >= 0) {\n          this.line++;\n          this.column = 0;\n          lastNewline = newLine;\n          newLine = rawString.indexOf('\\n', newLine + 1);\n        }\n        this.column += rawString.length - lastNewline;\n        r = true;\n        break;\n      }\n      index = this.expression.indexOf(quote, index + 1);\n    }\n  }\n  return r;\n};\n\nTokenStream.prototype.isParen = function () {\n  var char = this.expression.charAt(this.pos);\n  if (char === '(' || char === ')') {\n    this.current = this.newToken(TPAREN, char);\n    this.pos++;\n    this.column++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isComma = function () {\n  var char = this.expression.charAt(this.pos);\n  if (char === ',') {\n    this.current = this.newToken(TCOMMA, ',');\n    this.pos++;\n    this.column++;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isConst = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && c !== '.' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (str in this.consts) {\n      this.current = this.newToken(TNUMBER, this.consts[str]);\n      this.pos += str.length;\n      this.column += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isNamedOp = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    if (str in this.binaryOps || str in this.unaryOps || str in this.ternaryOps) {\n      this.current = this.newToken(TOP, str);\n      this.pos += str.length;\n      this.column += str.length;\n      return true;\n    }\n  }\n  return false;\n};\n\nTokenStream.prototype.isName = function () {\n  var startPos = this.pos;\n  var i = startPos;\n  for (; i < this.expression.length; i++) {\n    var c = this.expression.charAt(i);\n    if (c.toUpperCase() === c.toLowerCase()) {\n      if (i === this.pos || (c !== '_' && (c < '0' || c > '9'))) {\n        break;\n      }\n    }\n  }\n  if (i > startPos) {\n    var str = this.expression.substring(startPos, i);\n    this.current = this.newToken(TNAME, str);\n    this.pos += str.length;\n    this.column += str.length;\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isWhitespace = function () {\n  var r = false;\n  var char = this.expression.charAt(this.pos);\n  while (char === ' ' || char === '\\t' || char === '\\n' || char === '\\r') {\n    r = true;\n    this.pos++;\n    this.column++;\n    if (char === '\\n') {\n      this.line++;\n      this.column = 0;\n    }\n    if (this.pos >= this.expression.length) {\n      break;\n    }\n    char = this.expression.charAt(this.pos);\n  }\n  return r;\n};\n\nvar codePointPattern = /^[0-9a-f]{4}$/i;\n\nTokenStream.prototype.unescape = function (v) {\n  var index = v.indexOf('\\\\');\n  if (index < 0) {\n    return v;\n  }\n\n  var buffer = v.substring(0, index);\n  while (index >= 0) {\n    var c = v.charAt(++index);\n    switch (c) {\n      case '\\'':\n        buffer += '\\'';\n        break;\n      case '\"':\n        buffer += '\"';\n        break;\n      case '\\\\':\n        buffer += '\\\\';\n        break;\n      case '/':\n        buffer += '/';\n        break;\n      case 'b':\n        buffer += '\\b';\n        break;\n      case 'f':\n        buffer += '\\f';\n        break;\n      case 'n':\n        buffer += '\\n';\n        break;\n      case 'r':\n        buffer += '\\r';\n        break;\n      case 't':\n        buffer += '\\t';\n        break;\n      case 'u':\n        // interpret the following 4 characters as the hex of the unicode code point\n        var codePoint = v.substring(index + 1, index + 5);\n        if (!codePointPattern.test(codePoint)) {\n          this.parseError('Illegal escape sequence: \\\\u' + codePoint);\n        }\n        buffer += String.fromCharCode(parseInt(codePoint, 16));\n        index += 4;\n        break;\n      default:\n        throw this.parseError('Illegal escape sequence: \"\\\\' + c + '\"');\n    }\n    ++index;\n    var backslash = v.indexOf('\\\\', index);\n    buffer += v.substring(index, backslash < 0 ? v.length : backslash);\n    index = backslash;\n  }\n\n  return buffer;\n};\n\nTokenStream.prototype.isComment = function () {\n  var char = this.expression.charAt(this.pos);\n  if (char === '/' && this.expression.charAt(this.pos + 1) === '*') {\n    var startPos = this.pos;\n    this.pos = this.expression.indexOf('*/', this.pos) + 2;\n    if (this.pos === 1) {\n      this.pos = this.expression.length;\n    }\n    var comment = this.expression.substring(startPos, this.pos);\n    var newline = comment.indexOf('\\n');\n    while (newline >= 0) {\n      this.line++;\n      this.column = comment.length - newline;\n      newline = comment.indexOf('\\n', newline + 1);\n    }\n    return true;\n  }\n  return false;\n};\n\nTokenStream.prototype.isNumber = function () {\n  var valid = false;\n  var pos = this.pos;\n  var startPos = pos;\n  var resetPos = pos;\n  var column = this.column;\n  var resetColumn = column;\n  var foundDot = false;\n  var foundDigits = false;\n  var char;\n\n  while (pos < this.expression.length) {\n    char = this.expression.charAt(pos);\n    if ((char >= '0' && char <= '9') || (!foundDot && char === '.')) {\n      if (char === '.') {\n        foundDot = true;\n      } else {\n        foundDigits = true;\n      }\n      pos++;\n      column++;\n      valid = foundDigits;\n    } else {\n      break;\n    }\n  }\n\n  if (valid) {\n    resetPos = pos;\n    resetColumn = column;\n  }\n\n  if (char === 'e' || char === 'E') {\n    pos++;\n    column++;\n    var acceptSign = true;\n    var validExponent = false;\n    while (pos < this.expression.length) {\n      char = this.expression.charAt(pos);\n      if (acceptSign && (char === '+' || char === '-')) {\n        acceptSign = false;\n      } else if (char >= '0' && char <= '9') {\n        validExponent = true;\n        acceptSign = false;\n      } else {\n        break;\n      }\n      pos++;\n      column++;\n    }\n\n    if (!validExponent) {\n      pos = resetPos;\n      column = resetColumn;\n    }\n  }\n\n  if (valid) {\n    this.current = this.newToken(TNUMBER, parseFloat(this.expression.substring(startPos, pos)));\n    this.pos = pos;\n    this.column = column;\n  } else {\n    this.pos = resetPos;\n    this.column = resetColumn;\n  }\n  return valid;\n};\n\nTokenStream.prototype.isOperator = function () {\n  var char = this.expression.charAt(this.pos);\n\n  if (char === '+' || char === '-' || char === '*' || char === '/' || char === '%' || char === '^' || char === '?' || char === ':' || char === '.') {\n    this.current = this.newToken(TOP, char);\n  } else if (char === '∙' || char === '•') {\n    this.current = this.newToken(TOP, '*');\n  } else if (char === '>') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '>=');\n      this.pos++;\n      this.column++;\n    } else {\n      this.current = this.newToken(TOP, '>');\n    }\n  } else if (char === '<') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '<=');\n      this.pos++;\n      this.column++;\n    } else {\n      this.current = this.newToken(TOP, '<');\n    }\n  } else if (char === '|') {\n    if (this.expression.charAt(this.pos + 1) === '|') {\n      this.current = this.newToken(TOP, '||');\n      this.pos++;\n      this.column++;\n    } else {\n      return false;\n    }\n  } else if (char === '=') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '==');\n      this.pos++;\n      this.column++;\n    } else {\n      return false;\n    }\n  } else if (char === '!') {\n    if (this.expression.charAt(this.pos + 1) === '=') {\n      this.current = this.newToken(TOP, '!=');\n      this.pos++;\n      this.column++;\n    } else {\n      this.current = this.newToken(TOP, char);\n    }\n  } else {\n    return false;\n  }\n  this.pos++;\n  this.column++;\n  return true;\n};\n\nTokenStream.prototype.parseError = function (msg) {\n  throw new Error('parse error [' + (this.line + 1) + ':' + (this.column + 1) + ']: ' + msg);\n};\n\nvar unaryInstructionCache = {};\nfunction unaryInstruction(value) {\n  var inst = unaryInstructionCache[value];\n  if (!inst) {\n    inst = unaryInstructionCache[value] = new Instruction(IOP1, value);\n  }\n  return inst;\n}\n\nvar binaryInstructionCache = {};\nfunction binaryInstruction(value) {\n  var inst = binaryInstructionCache[value];\n  if (!inst) {\n    inst = binaryInstructionCache[value] = new Instruction(IOP2, value);\n  }\n  return inst;\n}\n\nvar ternaryInstructionCache = {};\nfunction ternaryInstruction(value) {\n  var inst = ternaryInstructionCache[value];\n  if (!inst) {\n    inst = ternaryInstructionCache[value] = new Instruction(IOP3, value);\n  }\n  return inst;\n}\n\nfunction ParserState(parser, tokenStream) {\n  this.parser = parser;\n  this.tokens = tokenStream;\n  this.current = null;\n  this.nextToken = null;\n  this.next();\n  this.savedCurrent = null;\n  this.savedNextToken = null;\n}\n\nParserState.prototype.next = function () {\n  this.current = this.nextToken;\n  return (this.nextToken = this.tokens.next());\n};\n\nParserState.prototype.tokenMatches = function (token, value) {\n  if (typeof value === 'undefined') {\n    return true;\n  } else if (Array.isArray(value)) {\n    return indexOf(value, token.value) >= 0;\n  } else if (typeof value === 'function') {\n    return value(token);\n  } else {\n    return token.value === value;\n  }\n};\n\nParserState.prototype.save = function () {\n  this.savedCurrent = this.current;\n  this.savedNextToken = this.nextToken;\n  this.tokens.save();\n};\n\nParserState.prototype.restore = function () {\n  this.tokens.restore();\n  this.current = this.savedCurrent;\n  this.nextToken = this.savedNextToken;\n};\n\nParserState.prototype.accept = function (type, value) {\n  if (this.nextToken.type === type && this.tokenMatches(this.nextToken, value)) {\n    this.next();\n    return true;\n  }\n  return false;\n};\n\nParserState.prototype.expect = function (type, value) {\n  if (!this.accept(type, value)) {\n    throw new Error('parse error [' + this.tokens.line + ':' + this.tokens.column + ']: Expected ' + (value || type));\n  }\n};\n\nParserState.prototype.parseAtom = function (instr) {\n  if (this.accept(TNAME)) {\n    instr.push(new Instruction(IVAR, this.current.value));\n  } else if (this.accept(TNUMBER)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TSTRING)) {\n    instr.push(new Instruction(INUMBER, this.current.value));\n  } else if (this.accept(TPAREN, '(')) {\n    this.parseExpression(instr);\n    this.expect(TPAREN, ')');\n  } else {\n    throw new Error('unexpected ' + this.nextToken);\n  }\n};\n\nParserState.prototype.parseExpression = function (instr) {\n  this.parseConditionalExpression(instr);\n};\n\nParserState.prototype.parseConditionalExpression = function (instr) {\n  this.parseOrExpression(instr);\n  while (this.accept(TOP, '?')) {\n    var trueBranch = [];\n    var falseBranch = [];\n    this.parseConditionalExpression(trueBranch);\n    this.expect(TOP, ':');\n    this.parseConditionalExpression(falseBranch);\n    instr.push(new Instruction(IEXPR, trueBranch));\n    instr.push(new Instruction(IEXPR, falseBranch));\n    instr.push(ternaryInstruction('?'));\n  }\n};\n\nParserState.prototype.parseOrExpression = function (instr) {\n  this.parseAndExpression(instr);\n  while (this.accept(TOP, 'or')) {\n    this.parseAndExpression(instr);\n    instr.push(binaryInstruction('or'));\n  }\n};\n\nParserState.prototype.parseAndExpression = function (instr) {\n  this.parseComparison(instr);\n  while (this.accept(TOP, 'and')) {\n    this.parseComparison(instr);\n    instr.push(binaryInstruction('and'));\n  }\n};\n\nParserState.prototype.parseComparison = function (instr) {\n  this.parseAddSub(instr);\n  while (this.accept(TOP, ['==', '!=', '<', '<=', '>=', '>'])) {\n    var op = this.current;\n    this.parseAddSub(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseAddSub = function (instr) {\n  this.parseTerm(instr);\n  while (this.accept(TOP, ['+', '-', '||'])) {\n    var op = this.current;\n    this.parseTerm(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseTerm = function (instr) {\n  this.parseFactor(instr);\n  while (this.accept(TOP, ['*', '/', '%'])) {\n    var op = this.current;\n    this.parseFactor(instr);\n    instr.push(binaryInstruction(op.value));\n  }\n};\n\nParserState.prototype.parseFactor = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  this.save();\n  if (this.accept(TOP, isPrefixOperator)) {\n    if ((this.current.value !== '-' && this.current.value !== '+' && this.nextToken.type === TPAREN && this.nextToken.value === '(')) {\n      this.restore();\n      this.parseExponential(instr);\n    } else {\n      var op = this.current;\n      this.parseFactor(instr);\n      instr.push(unaryInstruction(op.value));\n    }\n  } else {\n    this.parseExponential(instr);\n  }\n};\n\nParserState.prototype.parseExponential = function (instr) {\n  this.parsePostfixExpression(instr);\n  while (this.accept(TOP, '^')) {\n    this.parseFactor(instr);\n    instr.push(binaryInstruction('^'));\n  }\n};\n\nParserState.prototype.parsePostfixExpression = function (instr) {\n  this.parseFunctionCall(instr);\n  while (this.accept(TOP, '!')) {\n    instr.push(unaryInstruction('!'));\n  }\n};\n\nParserState.prototype.parseFunctionCall = function (instr) {\n  var unaryOps = this.tokens.unaryOps;\n  function isPrefixOperator(token) {\n    return token.value in unaryOps;\n  }\n\n  if (this.accept(TOP, isPrefixOperator)) {\n    var op = this.current;\n    this.parseAtom(instr);\n    instr.push(unaryInstruction(op.value));\n  } else {\n    this.parseMemberExpression(instr);\n    while (this.accept(TPAREN, '(')) {\n      if (this.accept(TPAREN, ')')) {\n        instr.push(new Instruction(IFUNCALL, 0));\n      } else {\n        var argCount = this.parseArgumentList(instr);\n        instr.push(new Instruction(IFUNCALL, argCount));\n      }\n    }\n  }\n};\n\nParserState.prototype.parseArgumentList = function (instr) {\n  var argCount = 0;\n\n  while (!this.accept(TPAREN, ')')) {\n    this.parseExpression(instr);\n    ++argCount;\n    while (this.accept(TCOMMA)) {\n      this.parseExpression(instr);\n      ++argCount;\n    }\n  }\n\n  return argCount;\n};\n\nParserState.prototype.parseMemberExpression = function (instr) {\n  this.parseAtom(instr);\n  while (this.accept(TOP, '.')) {\n    this.expect(TNAME);\n    instr.push(new Instruction(IMEMBER, this.current.value));\n  }\n};\n\nfunction Parser() {\n  this.unaryOps = {\n    sin: Math.sin,\n    cos: Math.cos,\n    tan: Math.tan,\n    asin: Math.asin,\n    acos: Math.acos,\n    atan: Math.atan,\n    sinh: Math.sinh || sinh,\n    cosh: Math.cosh || cosh,\n    tanh: Math.tanh || tanh,\n    asinh: Math.asinh || asinh,\n    acosh: Math.acosh || acosh,\n    atanh: Math.atanh || atanh,\n    sqrt: Math.sqrt,\n    log: Math.log,\n    ln: Math.log,\n    lg: Math.log10 || log10,\n    log10: Math.log10 || log10,\n    abs: Math.abs,\n    ceil: Math.ceil,\n    floor: Math.floor,\n    round: Math.round,\n    trunc: Math.trunc || trunc,\n    '-': neg,\n    '+': Number,\n    exp: Math.exp,\n    not: not,\n    length: stringLength,\n    '!': factorial\n  };\n\n  this.binaryOps = {\n    '+': add,\n    '-': sub,\n    '*': mul,\n    '/': div,\n    '%': mod,\n    '^': Math.pow,\n    '||': concat,\n    '==': equal,\n    '!=': notEqual,\n    '>': greaterThan,\n    '<': lessThan,\n    '>=': greaterThanEqual,\n    '<=': lessThanEqual,\n    and: andOperator,\n    or: orOperator\n  };\n\n  this.ternaryOps = {\n    '?': condition\n  };\n\n  this.functions = {\n    random: random,\n    fac: factorial,\n    min: Math.min,\n    max: Math.max,\n    hypot: Math.hypot || hypot,\n    pyt: Math.hypot || hypot, // backward compat\n    pow: Math.pow,\n    atan2: Math.atan2,\n    'if': condition,\n    gamma: gamma\n  };\n\n  this.consts = {\n    E: Math.E,\n    PI: Math.PI,\n    'true': true,\n    'false': false\n  };\n}\n\nParser.parse = function (expr) {\n  return new Parser().parse(expr);\n};\n\nParser.evaluate = function (expr, variables) {\n  return Parser.parse(expr).evaluate(variables);\n};\n\nParser.prototype = {\n  parse: function (expr) {\n    var instr = [];\n    var parserState = new ParserState(this, new TokenStream(expr, this.unaryOps, this.binaryOps, this.ternaryOps, this.consts));\n    parserState.parseExpression(instr);\n    parserState.expect(TEOF, 'EOF');\n\n    return new Expression(instr, this);\n  },\n\n  evaluate: function (expr, variables) {\n    return this.parse(expr).evaluate(variables);\n  }\n};\n\nvar parser = {\n  Parser: Parser,\n  Expression: Expression\n};\n\nreturn parser;\n\n})));\n","/*\n* Author   Jonathan Lurie - http://me.jonahanlurie.fr\n* License  MIT\n* Link      https://github.com/jonathanlurie/pixpipejs\n* Lab       MCIN - Montreal Neurological Institute\n*/\n\n\nimport Parser from 'expr-eval'\nimport { Image2D } from '../core/Image2D.js';\nimport { ImageToImageFilter } from '../core/ImageToImageFilter.js';\n\n\n/**\n* An instance of ImageBlendExpressionFilter takes Image2D inputs, as many as\n* we need as long as they have the same size and the same number of components\n* per pixel.\n* This filter blends images pixel values using a literal expression. This expression\n* should be set using `setMetadata( \"expresssion\", \"A * B\" )` , where `A` and `B`\n* are the categories set in input.\n*\n*/\nclass ImageBlendExpressionFilter extends ImageToImageFilter {\n\n  constructor(){\n    super();\n    this._addOutput( Image2D );\n\n    var parser = new Parser.Parser();\n    var expr = parser.parse('2 * x + 1');\n    console.log(expr.evaluate({ x: 3 })); // 7\n\n    // or\n    //Parser.evaluate('6 * x', { x: 7 }) // 42\n\n  }\n\n\n\n  update(){\n\n    // the metadata was not set\n    if(!this.hasMetadata(\"expression\")){\n      console.warn(\"A filter of type ImageBlendExpressionFilter requires a blending expression.\\nUse 'setMetadata(\\\"expression\\\", \\\"...\\\")' to set it.\" );\n      return;\n    }\n\n    if( !this.hasSameNcppInput() || !this.hasSameSizeInput() ){\n      return;\n    }\n\n    if(!this.getNumberOfInputs()){\n      console.warn(\"A filter of type ImageBlendExpressionFilter requires at least one inpupt.\");\n      return;\n    }\n\n    var inputCategories = Object.keys( this._input );\n    var firstInput = this._getInput( inputCategories[0] );\n    var outputBuffer = firstInput.getDataCopy();\n    var parser = new Parser.Parser();\n    var expr = parser.parse( this.getMetadata(\"expression\") );\n\n    for(var i=0; i<outputBuffer.length; i++){\n\n      var evaluationData = {};\n      for(var c=0; c<inputCategories.length; c++){\n        evaluationData[ inputCategories[c] ] = this._getInput( inputCategories[c] ).getData()[i];\n      }\n\n      outputBuffer[i] = expr.evaluate( evaluationData );\n    }\n\n    // building the output\n    var img2D = this.getOutput();\n\n    img2D.setData(\n      outputBuffer,\n      firstInput.getWidth(),\n      firstInput.getHeight()\n    );\n\n\n  }\n\n\n\n} /* END of class ImageBlendExpressionFilter */\n\n\nexport { ImageBlendExpressionFilter }\n","'use strict'\n\n//import mathjs from 'mathjs';\n\n// core classes\nexport { PixpipeObject } from './core/PixpipeObject.js';\nexport { PipelineElement } from './core/PipelineElement.js';\nexport { Pipeline } from './core/Pipeline.js';\nexport { Filter } from './core/Filter.js';\nexport { Image2D } from './core/Image2D.js';\nexport { ImageToImageFilter } from './core/ImageToImageFilter.js';\nexport { PixelWiseImageFilter } from './core/PixelWiseImageFilter.js';\n\n// io - Readers and writers\nexport { CanvasImageWriter } from './io/CanvasImageWriter.js';\nexport { UrlImageReader } from './io/UrlImageReader.js';\nexport { FileImageReader } from './io/FileImageReader.js';\n\n// filters - processing of Images2D\nexport { ForEachPixelImageFilter } from './filter/ForEachPixelImageFilter.js';\nexport { SpectralScaleImageFilter } from './filter/SpectralScaleImageFilter.js';\nexport { ImageBlendExpressionFilter } from './filter/ImageBlendExpressionFilter.js';\n//export { SpatialConvolutionFilter } from './filter/SpatialConvolutionFilter.js';\n\n\n\n// filters - processing of Image3D\n"],"names":["this","Parser"],"mappings":"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"}